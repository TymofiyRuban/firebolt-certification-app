{"version":3,"file":"lightning-ui-components.min.mjs","sources":["../src/globals/context/logger.js","../src/utils/index.js","../src/globals/context/metrics.js","../src/globals/context/events.js","../../ui-components-theme-base/index.js","../src/globals/context/fonts.js","../src/globals/context/constants.js","../src/globals/context/theme-manager.js","../src/globals/context/index.js","../src/globals/global-update-manager/GlobalUpdateManager.js","../src/mixins/withUpdates/index.js","../src/mixins/withTags/index.js","../src/mixins/withHandleKey/index.js","../src/mixins/withLayout/index.js","../src/mixins/withThemeStyles/utils.js","../src/mixins/withThemeStyles/cache.js","../src/mixins/withThemeStyles/StyleManager.js","../src/mixins/withThemeStyles/index.js","../src/mixins/withExtensions/index.js","../src/components/Base/Base.js","../src/components/Gradient/Gradient.styles.js","../src/components/Gradient/Gradient.js","../src/components/Artwork/Artwork.styles.js","../src/textures/CustomImageTexture.js","../src/components/Artwork/Artwork.js","../src/components/Icon/Icon.styles.js","../src/components/Icon/Icon.js","../src/components/Badge/Badge.styles.js","../src/components/Badge/Badge.js","../src/components/Button/Button.styles.js","../src/components/FocusManager/FocusManager.js","../src/components/NavigationManager/NavigationManager.styles.js","../src/components/NavigationManager/NavigationManager.js","../src/components/Row/Row.styles.js","../src/components/Row/Row.js","../src/components/Surface/Surface.styles.js","../src/components/Surface/Surface.js","../src/components/TextBox/TextBox.styles.js","../src/components/InlineContent/InlineContent.styles.js","../src/components/InlineContent/InlineContent.js","../src/components/Marquee/Marquee.styles.js","../src/shaders/FadeShader.js","../src/components/Marquee/Marquee.js","../src/components/TextBox/TextBox.js","../src/components/Button/Button.js","../src/components/Button/ButtonSmall.styles.js","../src/components/Button/ButtonSmall.js","../src/components/Card/Card.styles.js","../src/components/Card/Card.js","../src/components/Card/CardTitle.styles.js","../src/components/Card/CardTitle.js","../src/components/Card/CardRadio.styles.js","../src/components/Radio/Radio.styles.js","../src/components/Radio/Radio.js","../src/components/Radio/RadioSmall.styles.js","../src/components/Radio/RadioSmall.js","../src/components/Card/CardRadio.js","../src/components/Card/CardSection.styles.js","../src/components/Card/CardSection.js","../src/components/Checkbox/Checkbox.styles.js","../src/components/Checkbox/Checkbox.js","../src/components/Label/Label.styles.js","../src/components/Label/Label.js","../src/mixins/withMarqueeSync/withMarqueeSync.js","../src/components/MetadataBase/MetadataBase.styles.js","../src/components/MetadataBase/MetadataBase.js","../src/components/MetadataTile/MetadataTile.styles.js","../src/components/MetadataTile/MetadataTile.js","../src/components/ProgressBar/ProgressBar.styles.js","../src/components/ProgressBar/ProgressBar.js","../src/components/Tile/Tile.styles.js","../src/components/Tile/Tile.js","../src/components/Provider/Provider.styles.js","../src/components/Provider/Provider.js","../src/components/MetadataCardContent/MetadataCardContent.styles.js","../src/components/MetadataCardContent/MetadataCardContent.js","../src/components/CardContent/CardContent.styles.js","../src/components/CardContent/CardContent.js","../src/components/CardContent/CardContentHorizontal.js","../src/components/CardContent/CardContentHorizontalLarge.styles.js","../src/components/CardContent/CardContentHorizontalLarge.js","../src/components/CardContent/CardContentVertical.styles.js","../src/components/CardContent/CardContentVertical.js","../src/components/CardContent/CardContentVerticalSmall.styles.js","../src/components/CardContent/CardContentVerticalSmall.js","../src/components/Checkbox/CheckboxSmall.styles.js","../src/components/Checkbox/CheckboxSmall.js","../src/components/Column/Column.styles.js","../src/components/Column/Column.js","../src/components/Control/Control.styles.js","../src/components/Control/Control.js","../src/components/Control/ControlSmall.styles.js","../src/components/Control/ControlSmall.js","../src/components/TitleRow/TitleRow.styles.js","../src/components/TitleRow/TitleRow.js","../src/components/ControlRow/ControlRow.styles.js","../src/components/ControlRow/ControlRow.js","../src/components/GridOverlay/GridOverlay.styles.js","../src/components/GridOverlay/GridOverlay.js","../src/components/Input/Input.styles.js","../src/components/Input/Input.js","../src/components/Key/Key.styles.js","../src/components/Key/Key.js","../src/components/Keyboard/Keyboard.styles.js","../src/components/Keyboard/Keyboard.js","../src/components/Keyboard/KeyboardEmail.js","../src/components/Keyboard/KeyboardFullscreen.js","../src/components/Keyboard/KeyboardNumbers.js","../src/components/Keyboard/KeyboardQwerty.js","../src/components/Keyboard/KeyboardInput.js","../src/components/Keyboard/KeyboardSearch.js","../src/components/Knob/Knob.styles.js","../src/components/Knob/Knob.js","../src/components/ListItem/ListItem.styles.js","../src/components/ListItem/ListItem.js","../src/components/ListItem/NestedSlider.styles.js","../src/components/Slider/Slider.styles.js","../src/components/Slider/Slider.js","../src/components/ListItem/NestedSlider.js","../src/components/ListItem/ListItemSlider.styles.js","../src/components/ListItem/ListItemSlider.js","../src/components/ListItem/ListItemPicker.styles.js","../src/components/ListItem/ListItemPicker.js","../src/components/MetadataCard/MetadataCard.js","../src/components/ScrollWrapper/ScrollWrapper.styles.js","../src/components/ScrollWrapper/ScrollSlider.styles.js","../src/components/ScrollWrapper/ScrollSlider.js","../src/components/ScrollWrapper/ScrollWrapper.js","../src/components/Shadow/Shadow.styles.js","../src/components/Shadow/Shadow.js","../src/components/Slider/SliderLarge.styles.js","../src/components/Slider/SliderLarge.js","../src/components/TabBar/ContentSwitcher.js","../src/components/TabBar/TabBar.styles.js","../src/components/TabBar/TabBar.js","../src/components/TabBar/Tab.styles.js","../src/components/TabBar/Tab.js","../src/components/Toggle/Toggle.styles.js","../src/components/Toggle/Toggle.js","../src/components/Toggle/ToggleSmall.styles.js","../src/components/Toggle/ToggleSmall.js","../src/textures/Bubble.js","../src/components/Tooltip/Tooltip.styles.js","../src/components/Tooltip/Tooltip.js","../src/globals/pool/index.js","../src/mixins/withAnnouncer/Speech.js","../src/mixins/withAnnouncer/abbreviations.js","../src/mixins/withAnnouncer/index.js","../src/mixins/withClassCache/index.js","../src/mixins/withSelections/index.js","../src/mixins/withEditItems/index.js","../src/textures/LinearGradient.js","../src/textures/Circle.js","../src/textures/Arrow.js","../src/textures/Line.js","../src/docs/story-components/SignalButton.js"],"sourcesContent":["﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nclass Logger {\n  constructor() {\n    this._logCallback = undefined;\n    this._prefix = 'LightningUI';\n    this._debug = false;\n  }\n\n  get debug() {\n    return this._debug;\n  }\n\n  set debug(value) {\n    this._debug = Boolean(value);\n  }\n\n  get logCallback() {\n    return this._logCallback;\n  }\n\n  set logCallback(value) {\n    if ('function' !== typeof value) {\n      this.warn(\n        `logCallback value must be a function, instead received ${typeof value}`\n      );\n      return;\n    }\n    this._logCallback = value;\n  }\n\n  log(...args) {\n    if (this._logCallback) {\n      this._logCallback({ level: 'log', payload: args });\n    }\n    if (this.debug) {\n      // eslint-disable-next-line\n      console.log(this._prefix, ...args);\n    }\n  }\n\n  info(...args) {\n    if (this._logCallback) {\n      this._logCallback({ level: 'info', payload: args });\n    }\n    if (this.debug) {\n      // eslint-disable-next-line\n      console.info(this._prefix, ...args);\n    }\n  }\n\n  warn(...args) {\n    if (this._logCallback) {\n      this._logCallback({ level: 'warn', payload: args });\n    }\n    if (this.debug) {\n      console.warn(this._prefix, ...args);\n    }\n  }\n\n  error(...args) {\n    if (this._logCallback) {\n      this._logCallback({ level: 'error', payload: args });\n    }\n    if (this.debug) {\n      console.error(this._prefix, ...args);\n    }\n  }\n}\n\nconst loggerInstance = new Logger();\n\nexport { loggerInstance as default, Logger };\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport logger from '../globals/context/logger';\n\n/**\n *\n * Layout Utils\n *\n */\n\n/**\n * Copyright (c) 2009-2012 Jeremy Ashkenas, DocumentCloud\n * Licensed under the MIT License\n * Copyright (c) 2012-2018 The Debounce Contributors. See CONTRIBUTORS\n * Licensed under the MIT License\n */\n\n/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear'\n * that is a function which will clear the timer to prevent previously scheduled executions.\n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {function} function to wrap\n * @param {number} timeout in ms (`100`)\n * @param {boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nexport function debounce(func, wait, immediate) {\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  }\n\n  var debounced = function () {\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function () {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  debounced.flush = function () {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n}\n\nexport function getEuclideanDistance(xA, yA, xB, yB) {\n  const xDiff = xA - xB;\n  const yDiff = yA - yB;\n  return Math.sqrt(Math.pow(xDiff, 2) + Math.sqrt(Math.pow(yDiff, 2)));\n}\n\n/**\n * Returns the shortest distance between a coordinate and a corner or center of an element.\n * @param {[number, number]} coordinate\n * @param {Element} element\n *\n * @return {number} shortest distance between a coordinate and a corner or center of an element.\n */\nexport function getShortestDistance(coordinate, element) {\n  const [xA, yA] = coordinate;\n  const [xB, yB] = element.core ? element.core.getAbsoluteCoords(0, 0) : [0, 0];\n\n  const distanceToStart = getEuclideanDistance(xA, yA, xB, yB);\n  const distanceToMiddle = getEuclideanDistance(\n    xA,\n    yA,\n    xB + element.w / 2,\n    yB + element.h / 2\n  );\n  const distanceToEnd = getEuclideanDistance(\n    xA,\n    yA,\n    xB + element.w,\n    yB + element.h\n  );\n\n  return Math.min(distanceToStart, distanceToMiddle, distanceToEnd);\n}\n\nexport function isComponentOnScreen(component, offsets = {}) {\n  if (!component) return false;\n\n  const {\n    w,\n    h,\n    core: { renderContext: { px, py }, _scissor: scissor = [] } = {}\n  } = component;\n  const stageH = component.stage.h / component.stage.getRenderPrecision();\n  const stageW = component.stage.w / component.stage.getRenderPrecision();\n\n  let finalX = px;\n  let finalY = py;\n  // keep track of the different between the the absolute world position and relative position\n  const relativeOffsetX = px - component.x;\n  const relativeOffsetY = py - component.y;\n  const offsetX = offsets.offsetX - relativeOffsetX || 0;\n  const offsetY = offsets.offsetY - relativeOffsetY || 0;\n  // if the current component is animating, apply the relative offset to the transition value\n  if (component.transition('x')) {\n    finalX = px - component.x + component.transition('x').targetValue;\n  }\n  if (component.transition('y')) {\n    finalY = py - component.y + component.transition('y').targetValue;\n  }\n  // apply any offset passed into the function\n  // this is mainly used to parent components that are transitioning,\n  // like in the case of Rows nested inside of Columns where the Rows themselves do not animate,\n  // but their parent container does\n  finalX += offsetX;\n  finalY += offsetY;\n\n  const wVis = finalX >= 0 && finalX + w <= stageW;\n  const hVis = finalY >= 0 && finalY + h <= stageH;\n\n  if (!wVis || !hVis) return false;\n\n  if (scissor && scissor.length) {\n    const [\n      leftBounds = null,\n      topBounds = null,\n      clipWidth = null,\n      clipHeight = null\n    ] = scissor;\n\n    const withinLeftClippingBounds =\n      Math.round(finalX + w) >= Math.round(leftBounds);\n    const withinRightClippingBounds =\n      Math.round(finalX) <= Math.round(leftBounds + clipWidth);\n    const withinTopClippingBounds =\n      Math.round(finalY + h) >= Math.round(topBounds);\n    const withinBottomClippingBounds =\n      Math.round(finalY + h) <= Math.round(topBounds + clipHeight);\n\n    return (\n      withinLeftClippingBounds &&\n      withinRightClippingBounds &&\n      withinTopClippingBounds &&\n      withinBottomClippingBounds\n    );\n  }\n\n  return true;\n}\n\n/**\n * Returns the width of an item based on upCount.\n *\n * @param {number} upCount\n * @returns {number}\n */\nexport function getWidthByUpCount(theme, upCount = 1) {\n  const screenW = theme.layout.screenW;\n  const columnCount = theme.layout.columnCount;\n  const marginX = theme.layout.marginX;\n  const gutterX = theme.layout.gutterX;\n\n  if (upCount < 1 || upCount > columnCount) {\n    console.error(\n      `Column expects a number between 1 & ${columnCount}. Received ${upCount}`\n    );\n    return;\n  }\n\n  // the screen width, minus the margin x on each side\n  const columnWidth = screenW - marginX * 2;\n  // the total space of column gaps in between items\n  const columnGapTotal = (upCount - 1) * gutterX;\n  // the remaining amount of space left for all items\n  const totalColumnsWidth = columnWidth - columnGapTotal;\n  // the width of each item in that remaining width\n  return totalColumnsWidth / upCount;\n}\n\n/**\n * Returns the width of an item based on how many columns to span.\n *\n * @param {number} columnSpan\n * @returns {number}\n */\nexport function getWidthByColumnSpan(theme, columnSpan) {\n  const columnCount = theme.layout.columnCount;\n  const gutterX = theme.layout.gutterX;\n\n  return (\n    getWidthByUpCount(theme, columnCount) * columnSpan +\n    gutterX * (columnSpan - 1)\n  );\n}\n\n/**\n * Returns the x position of a specified column number based on the theme's columnCount.\n *\n * @param {number} column\n * @returns {number}\n */\nexport function getColumnX(theme, column = 1) {\n  const columnCount = theme.layout.columnCount;\n  const marginX = theme.layout.marginX;\n  const gutterX = theme.layout.gutterX;\n\n  return marginX + (getWidthByUpCount(theme, columnCount) + gutterX) * column;\n}\n\n/**\n * Determines the width and height of an item based off the data passed into the item\n * (either all necessary parameters to calculate the dimensions dynamically,\n * OR all the necessary parameters to hard set the dimensions).\n *\n * @param { object } obj\n * @param { object } fallback\n *\n * @return { { number, number } }\n */\nexport function getDimensions(theme, obj = {}, fallback = {}) {\n  const { w, h, ratioX, ratioY, upCount } = obj;\n  const fallbackW = fallback.w || 0;\n  const fallbackH = fallback.h || 0;\n  let dimensions = {};\n\n  // hard set width and height values were passed in and should override other params\n  if (w && h) {\n    dimensions = {\n      w,\n      h: h\n    };\n  } else if (h && ratioX && ratioY) {\n    // hard set height and ratio values were passed in, meaning the row has items with mixed ratios, so the width needs to be calculated\n    dimensions = {\n      w: Math.round((h * ratioX) / ratioY),\n      h: h\n    };\n    // calculate dynamic width and height based off item ratios\n  } else if (ratioX && ratioY && upCount) {\n    dimensions = getItemRatioDimensions(theme, ratioX, ratioY, upCount);\n  } else if (h && upCount) {\n    // calculate dynamic width based off a row upcount and a given height\n    dimensions = {\n      w: Math.round(getWidthByUpCount(theme, upCount)),\n      h: h\n    };\n  } else if (h) {\n    dimensions = {\n      w: fallbackW,\n      h: h\n    };\n  } else if (w) {\n    dimensions = {\n      w: w,\n      h: fallbackH\n    };\n  } else {\n    // not enough information was provided to properly size the component\n    dimensions = {\n      w: fallbackW,\n      h: fallbackH\n    };\n  }\n\n  dimensions = {\n    ...dimensions,\n    ratioX,\n    ratioY,\n    upCount\n  };\n\n  return dimensions;\n}\n\n/**\n * Calculates the width and height of an item based off the given ratios\n * and number of columns across the screen that should be visible before peaking\n *\n * @param { number } ratioX\n * @param { number } ratioY\n * @param { number } upCount\n *\n * @return { { number, number } }\n */\nexport function getItemRatioDimensions(theme, ratioX, ratioY, upCount) {\n  let w, h;\n\n  if (ratioX && ratioY && upCount) {\n    w = Math.round(getWidthByUpCount(theme, upCount));\n    h = Math.round((w / ratioX) * ratioY);\n  } else {\n    w = 0;\n    h = 0;\n  }\n  return { w, h };\n}\n\n/**\n * /Layout utils\n */\n\nexport function getAspectRatioW(h, ratio = '16:9', seperator = ':') {\n  const [ratioW, ratioH] = ratio.split(seperator);\n  return h * (ratioW / ratioH);\n}\n\nexport function getAspectRatioH(w, ratio = '16:9', seperator = ':') {\n  const [ratioW, ratioH] = ratio.split(seperator);\n  return w / (ratioW / ratioH);\n}\n\n/**\n * Combines rgb hex string and alpha into argb hexadecimal number\n * @param {string|number} hex - 6 alphanumeric characters between 0-f or argb hexadecimal number\n * @param {number} [alpha] - number between 0-1 (0 is invisible, 1 is opaque)\n */\nexport function getHexColor(hex, alpha = 1) {\n  if (!hex) {\n    return 0x00;\n  }\n\n  if (typeof hex === 'number') {\n    hex = hex.toString(16).slice(2);\n  }\n\n  hex = hex.replace('#', '');\n\n  const hexAlpha = Math.round(alpha * 255).toString(16);\n  const str = `0x${hexAlpha}${hex}`;\n  return Number(str);\n}\n\n/**\n * Returns valid string of HEX color\n *\n * @param {string} color\n * @param {boolean} fill\n */\nexport function getValidColor(color) {\n  if (typeof color === 'string' || typeof color === 'number') {\n    if (/^0x[0-9a-fA-F]{8}/g.test(color)) {\n      // User enters a valid 0x00000000 hex code\n      return Number(color);\n    } else if (/^#[0-9a-fA-F]{6}/g.test(color)) {\n      // User enters valid #000000 hex code\n      return getHexColor(color.substr(1, 6));\n    } else if (typeof color === 'string' && /^[0-9]{8,10}/g.test(color)) {\n      return parseInt(color);\n    } else if (\n      typeof color === 'number' &&\n      /^[0-9]{8,10}/g.test(color.toString())\n    ) {\n      return color;\n    } else if (typeof color === 'string' && color.indexOf('rgba') > -1) {\n      return rgba2argb(color);\n    } else if (typeof color === 'string' && color.indexOf('rgb') > -1) {\n      const rgba = [...color.replace(/rgb\\(|\\)/g, '').split(','), '255'];\n      return lng.StageUtils.getArgbNumber(rgba);\n    }\n  }\n  return null;\n}\n\nfunction simplifyFraction([numerator, denominator]) {\n  for (let i = numerator; i > 0; i--) {\n    if (!(numerator % i) && !(denominator % i)) {\n      return [numerator / i, denominator / i];\n    }\n  }\n}\n\n/**\n * Reduce a fraction represented as a string\n * @param {string} - a reprentation of a fraction in this format 16/9\n * @return {string} - a reduced representation of the fraction\n */\nexport function reduceFraction(string) {\n  return simplifyFraction(string.split('/').map(n => +n)).join('/');\n}\n\n/**\n * Gets the value at `path` of `object`.\n * @param {object} object\n * @param {string|Array} path\n * @return {*} value if exists else undefined\n */\nexport const getValFromObjPath = (object, path) => {\n  if (typeof path === 'string')\n    path = path.split('.').filter(key => key.length);\n  return path.reduce((dive, key) => dive && dive[key], object);\n};\n\n/**\n * Lightning uses ARGB values, use this function\n * to convert know color to Lightning value\n * https://ifpb.github.io/javascript-guide/ecma/expression-and-operator/argb.html\n */\nexport function rgba2argb(rgbaStr) {\n  const rgba = rgbaStr.replace(/rgba\\(|\\)/g, '').split(',');\n  // Multiple Alpha Value\n  rgba[3] = rgba[3] * 255;\n  return lng.StageUtils.getArgbNumber(rgba);\n}\n\nexport function capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function lowercaseFirstLetter(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\n/**\n * Helpers for lng.Tools.getRoundRect\n */\nexport const RoundRect = {\n  /**\n   * Returns a value that will render as the given width (w)\n   * when passed to lng.Tools.getRoundRect\n   * @param {number} w - px value for expected width\n   * @param {*} options\n   * @param {number} options.padding - px value for both left and right padding\n   * @param {number} options.paddingLeft - px value for left padding, overrides options.padding\n   * @param {number} options.paddingRight - px value for right padding, overrides options.padding\n   * @param {number} options.strokeWidth - px value for stroke width\n   */\n  getWidth(w, options = {}) {\n    const { padding, paddingLeft, paddingRight, strokeWidth } = {\n      padding: 0,\n      paddingLeft: 0,\n      paddingRight: 0,\n      strokeWidth: 0,\n      ...options\n    };\n\n    if (!w) return 0;\n\n    return (\n      w - (paddingLeft || padding) - (paddingRight || padding) - strokeWidth\n    );\n  },\n  /**\n   * Returns a value that will render as the given height (h)\n   * when passed to lng.Tools.getRoundRect\n   * @param {number} h - px value for expected width\n   * @param {*} options\n   * @param {number} options.padding - px value for both bottom and top padding\n   * @param {number} options.paddingBottom - px value for bottom padding, overrides options.padding\n   * @param {number} options.paddingTop - px value for top padding, overrides options.padding\n   * @param {number} options.strokeWidth - px value for stroke width\n   */\n  getHeight(h, options = {}) {\n    const { padding, paddingBottom, paddingTop, strokeWidth } = {\n      padding: 0,\n      paddingBottom: 0,\n      paddingTop: 0,\n      strokeWidth: 0,\n      ...options\n    };\n\n    if (!h) return 0;\n\n    return (\n      h - (paddingBottom || padding) - (paddingTop || padding) - strokeWidth\n    );\n  }\n};\n\n/**\n * Merges two objects together and returns the duplicate.\n *\n * @param {object} target - object to be cloned\n * @param {object} [object] - secondary object to merge into clone\n */\nexport function clone(target, object) {\n  // Make sure getters and setters are applied correctly\n  const _clone = Object.create(Object.getPrototypeOf(target));\n  Object.defineProperties(_clone, Object.getOwnPropertyDescriptors(target));\n  if (!object || target === object) return _clone;\n\n  for (const key in object) {\n    const value = object[key];\n    if (target.hasOwnProperty(key)) {\n      _clone[key] = getMergeValue(key, target, object);\n    } else {\n      _clone[key] = value;\n    }\n  }\n\n  return _clone;\n}\n\nfunction getMergeValue(key, target, object) {\n  const targetVal = target[key];\n  const objectVal = object[key];\n  const targetValType = typeof targetVal;\n  const objectValType = typeof objectVal;\n\n  if (\n    targetValType !== objectValType ||\n    objectValType === 'function' ||\n    Array.isArray(objectVal)\n  ) {\n    return objectVal;\n  }\n\n  if (objectVal && objectValType === 'object') {\n    return clone(targetVal, objectVal);\n  }\n\n  return objectVal;\n}\n\n/**\n * Returns the rendered width of a given text texture\n * @param {object} text - text texture properties\n * @param {string} text.text - text value\n * @param {string} text.fontStyle - css font-style property\n * @param {(string|number)} text.fontWeight - css font-weight property\n * @param {string} [fontSize=0] - css font-size property (in px)\n * @param {string} [text.fontFamily=sans-serif] - css font-weight property\n * @param {string} text.fontFace - alias for fontFamily\n *\n * @return {number} text width\n * */\nexport function measureTextWidth(text = {}) {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  const {\n    fontStyle,\n    fontWeight,\n    fontSize,\n    fontFamily = text.fontFace || 'sans-serif'\n  } = text;\n  const fontCss = [\n    fontStyle,\n    fontWeight,\n    fontSize ? `${fontSize}px` : '0',\n    `'${fontFamily}'`\n  ]\n    .filter(Boolean)\n    .join(' ');\n  ctx.font = fontCss;\n  const textMetrics = ctx.measureText(text.text || '');\n\n  return Math.round(textMetrics.width);\n}\n\n/**\n * Returns first argument that is a number. Useful for finding ARGB numbers. Does not convert strings to numbers\n * @param {...*} number - maybe a number\n **/\nexport function getFirstNumber(...numbers) {\n  return numbers.find(Number.isFinite);\n}\n\n/**\n * Naively looks for dimensional prop (i.e. w, h, x, y, etc.), first searching for\n * a transition target value then defaulting to the current set value\n * @param {string} prop - property key\n * @param {lng.Component} component - Lightning component to operate against\n */\nexport function getDimension(prop, component) {\n  if (!component) return 0;\n\n  const transition = component.transition(prop);\n  if (transition.isRunning()) return transition.targetValue;\n\n  let renderProp = prop;\n  if (prop === 'w') {\n    renderProp = 'renderWidth';\n  } else if (prop === 'h') {\n    renderProp = 'renderHeight';\n  }\n  return component[renderProp] || component[prop];\n}\n\nexport const getX = component => getDimension('x', component);\nexport const getY = component => getDimension('y', component);\nexport const getW = component => getDimension('w', component);\nexport const getH = component => getDimension('h', component);\n\n/**\n * Array.prototype.flat() is not supported in WPE Browser\n *\n * @param {array} arr\n *\n * @return {array}\n */\nexport function flatten(arr) {\n  return arr.reduce(\n    (flat, toFlatten) =>\n      flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten),\n    []\n  );\n}\n\nexport function objectPropertyOf(object, path) {\n  return path.reduce(\n    (obj, key) => (obj && obj[key] !== 'undefined' ? obj[key] : undefined),\n    object\n  );\n}\n\nexport function stringifyCompare(objA, objB) {\n  return JSON.stringify(objA) === JSON.stringify(objB);\n}\n\nexport function delayForAnimation(callback, delay = 16) {\n  setTimeout(callback, delay);\n}\n\nexport function downloadFile(content, fileName, contentType) {\n  const validContentTypes = ['plain', 'json'];\n  if (!validContentTypes.includes(contentType)) {\n    contentType = 'plain';\n  }\n  const dataStr =\n    `data:text/${contentType};charset=utf-8,` +\n    encodeURIComponent(JSON.stringify(content));\n  const dlAnchorElem = document.createElement('a');\n  dlAnchorElem.setAttribute('href', dataStr);\n  dlAnchorElem.setAttribute('download', fileName);\n  dlAnchorElem.click();\n}\n\nexport const degreesToRadians = deg => deg * (Math.PI / 180);\n\n/**\n *\n * Markup utils\n *\n */\n\nconst MARKUP_STRING_PATTERN = /({ICON.*?}|{BADGE:.*?}|{NEWLINE}|{TEXT:.*?})/g;\n\nexport function isMarkupString(str = '') {\n  if (typeof str !== 'string') {\n    return false;\n  }\n  return MARKUP_STRING_PATTERN.test(str);\n}\n\n/**\n * Returns an array of strings and icon, badge, newline, and text objects from a string using the syntax:\n * 'This is an {ICON:<title>|<url>} and {BADGE:<title>} badge test with a {NEWLINE} newline and {TEXT:<text>|<style>}.'\n *\n * i.e. 'This is an {ICON:settings|./assets/icons/settings.png} icon and {BADGE:HD} badge with a{NEWLINE} and {TEXT:red text|red}.'\n *  would create the array:\n *  [\n *    'This is an ',\n *    { icon: './assets/icons/settings.png', title: 'settings' },\n *    ' icon and ',\n *    { badge: 'HD' },\n *    ' badge with a',\n *    { newline: true },\n *    ' and ',\n *    { text: 'red text', style: 'red' },\n *    '.'\n *  ]\n *\n * @param {(string|object)} str\n *\n * @return {array}\n */\nexport function parseInlineContent(str = '') {\n  const content = [];\n  if ((str && typeof str === 'string') || str.text) {\n    const string = typeof str === 'string' ? str : str.text;\n    const iconRegEx = /^{ICON:(.*?)?\\|(.*?)?}$/g;\n    const badgeRegEx = /^{BADGE:(.*?)}$/g;\n    const newlineRegEx = /^{NEWLINE}$/g;\n    const textRegEx = /^{TEXT:(.*?)?\\|(.*?)?}$/g;\n\n    const splitStr = string.split(MARKUP_STRING_PATTERN);\n\n    if (splitStr && splitStr.length) {\n      splitStr.forEach(item => {\n        let formattedItem = item;\n        const badge = badgeRegEx.exec(item);\n        const icon = iconRegEx.exec(item);\n        const newline = newlineRegEx.exec(item);\n        const text = textRegEx.exec(item);\n\n        if (badge && badge[1]) {\n          formattedItem = { badge: badge[1] };\n        } else if (icon && icon[1]) {\n          formattedItem = { title: icon[1], icon: icon[2] || icon[1] };\n        } else if (newline) {\n          formattedItem = { newline: true };\n        } else if (text && text[1]) {\n          formattedItem = { text: text[1], style: text[2] };\n        }\n        content.push(formattedItem);\n      });\n    }\n  }\n  return content;\n}\n\n/**\n * Given any number of arguments, returns the greatest number passed to the function.\n * If no valid numbers are passed in (ex. NaN, undefined, null), `undefined` will be returned.\n * @param {...*} arguments Any number of arguments may be passed into the function.\n *\n * @return {number|undefined} The greatest number passed in as an argument or `undefined` if no valid number was passed in.\n */\nexport function max() {\n  if (!arguments) {\n    return;\n  }\n\n  const args = Array.from(arguments).filter(arg => !isNaN(arg) && arg != null);\n\n  if (!args.length) {\n    return;\n  }\n\n  return Math.max(...args);\n}\n\n/**\n * Abstracts logic for conditionally forcing a zIndex Context on a component so that\n * any child components with zIndex are relative to it, and not the global zIndex context.\n * @param {lng.Component} component\n * @param {number} zOffset\n */\nexport function createConditionalZContext(component, zOffset) {\n  if (!component.zIndex && typeof zOffset !== 'undefined' && zOffset !== 0) {\n    component.forceZIndexContext = true;\n    component.zIndex = 0;\n  }\n}\n\n/**\n * Runs a side effect function when any values of specified properties on an element change.\n * @param {object} options - defines the `element`, `watchProps`, and `sideEffect` options\n * @param {lng.Element} options.element - Lightning element on which property changes will watched\n * @param {String[]} options.watchProps - properties that when their value changes a side effect function is invoked\n * @param {function} options.sideEffect - function to be invoked when a watched property's value changes\n * @returns {lng.Element}\n */\nexport function watchForUpdates({\n  element,\n  watchProps = [],\n  sideEffect = () => {}\n}) {\n  if (!element?.isElement) {\n    logger.error(\n      `watchForUpdates: Expected a Lightning Element passed to element parameter, received ${typeof element}`\n    );\n  }\n\n  const initialOnAfterUpdate = element.__core?._onAfterUpdate;\n\n  element.onAfterUpdate = function (element) {\n    let hasChanged = false;\n\n    watchProps.forEach(prop => {\n      if (element.transition(prop) && element.transition(prop).isRunning()) {\n        return;\n      }\n\n      const prevValueKey = `__watchPrev${prop}`;\n      const nextValue = element[prop];\n\n      if (nextValue !== element[prevValueKey]) {\n        element[prevValueKey] = nextValue;\n        hasChanged = true;\n      }\n    });\n\n    if (hasChanged) {\n      sideEffect();\n    }\n\n    // if an element already has an onAfterUpdate function, preserve that behavior\n    if (initialOnAfterUpdate) {\n      initialOnAfterUpdate(element);\n    }\n  }.bind(this);\n\n  return element;\n}\n\n/**\n * Given a Lightning text alignment option (left, right, center),\n * return the Lightning flexbox equivalent.\n *\n * @param {string} align\n * @returns {string}\n */\nexport function convertTextAlignToFlexJustify(align) {\n  switch (align) {\n    case 'left':\n      return 'flex-start';\n    case 'center':\n      return 'center';\n    case 'right':\n      return 'flex-end';\n    default:\n      // if there is no alignment passed in, the Lightning Text default is \"left\"\n      console.warn(\n        `Expected \"textAlign\" values are \"left,\" \"center,\" and \"right,\" but instead, ${align} was received and will fall back to \"left.\"`\n      );\n      return 'flex-start';\n  }\n}\n\n/**\n * Prevents user input radius from inverting.\n *\n * @param {number} user input radius\n * @param {number} width\n * @param {number} height\n * @param {number} offset\n * @return {number} max radius for object before border begins to invert\n */\nexport function getMaxRoundRadius(radius, width, height, offset = 0) {\n  const maxRadius = r =>\n    Math.max(0, Math.min(r, Math.min(width, height) / 2) + offset);\n  return Array.isArray(radius)\n    ? radius.map(r => Number(maxRadius(r)) || 0)\n    : Number(maxRadius(radius)) || 0;\n}\n\nconst utils = {\n  isMarkupString,\n  capitalizeFirstLetter,\n  degreesToRadians,\n  downloadFile,\n  delayForAnimation,\n  stringifyCompare,\n  objectPropertyOf,\n  flatten,\n  getDimension,\n  getFirstNumber,\n  measureTextWidth,\n  clone,\n  getMergeValue,\n  RoundRect,\n  rgba2argb,\n  getValFromObjPath,\n  reduceFraction,\n  getValidColor,\n  getHexColor,\n  getAspectRatioH,\n  getAspectRatioW,\n  getWidthByUpCount,\n  getDimensions,\n  getWidthByColumnSpan,\n  createConditionalZContext,\n  watchForUpdates,\n  convertTextAlignToFlexJustify,\n  getMaxRoundRadius\n};\n\nexport default utils;\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport logger from './logger';\nclass Metrics {\n  constructor() {\n    this._keyMetricsCallback = undefined;\n  }\n\n  get keyMetricsCallback() {\n    return this._keyMetricsCallback;\n  }\n\n  set keyMetricsCallback(value) {\n    if (-1 < ['undefined', 'function'].indexOf(typeof value)) {\n      this._keyMetricsCallback = value;\n      return;\n    }\n    logger.warn(\n      `context keyMetricsCallback expected a function. Received ${typeof value}`\n    );\n  }\n}\n\nconst metricsInstance = new Metrics();\n\nexport { metricsInstance as default, Metrics };\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nconst eventEmitterInstance = new lng.EventEmitter();\n\nexport default eventEmitterInstance;\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport default {\n  name: 'Base Lightning TV',\n  alpha: {\n    primary: 1,\n    secondary: 0.7,\n    tertiary: 0.1,\n    inactive: 0.5,\n    full: 1,\n    none: 0,\n    alpha1: 0.1,\n    alpha2: 0.3,\n    alpha3: 0.5,\n    alpha4: 0.7,\n    alpha5: 0.9\n  },\n  animation: {\n    duration: {\n      none: 0,\n      xfast: 0.1,\n      fast: 0.25,\n      normal: 0.5,\n      slow: 0.75,\n      xslow: 0.9\n    },\n    delay: {\n      none: 0,\n      xfast: 0.01,\n      fast: 0.025,\n      normal: 0.05,\n      slow: 0.075,\n      xslow: 0.09\n    },\n    expressive: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    expressiveEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    expressiveExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standard: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standardEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    standardExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utility: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utilityEntrance: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    },\n    utilityExit: {\n      timingFunction: 'cubic-bezier(0, 0, 1, 1)',\n      delay: 0,\n      duration: 0.25\n    }\n  },\n  asset: {\n    arrowLeft:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==',\n    arrowRight:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=',\n    backspaceOutline:\n      'data:image/png;base64,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',\n    check:\n      'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=='\n  },\n  color: {\n    white: ['#ffffff', 1],\n    black: ['#000000', 1],\n    grey: ['#929096', 1],\n    red: ['#e74c3c', 1],\n    orange: ['#dc7633', 1],\n    yellow: ['#f7dc6f', 1],\n    green: ['#2Ecc71', 1],\n    blue: ['#93a9fd', 1],\n    purple: ['#663399', 1],\n    palette: {\n      'grey-05': ['#f8f7fa', 1],\n      'grey-40': ['#929096', 1],\n      'grey-70': ['#48474b', 1],\n      'grey-90': ['#181819', 1],\n      'blue-20': ['#becffe', 1],\n      'blue-40': ['#93a9fd', 1],\n      'blue-90': ['#000033', 1]\n    },\n    material: ['#181819', 1],\n    materialBrand: ['#000033', 1],\n    overlay: ['#181819', 0.7],\n    textNeutral: ['#f8f7fa', 1],\n    textNeutralSecondary: ['#f8f7fa', 0.7],\n    textNeutralTertiary: ['#f8f7fa', 0.1],\n    textNeutralDisabled: ['#f8f7fa', 0.5],\n    textInverse: ['#181819', 1],\n    textInverseSecondary: ['#181819', 0.7],\n    textInverseTertiary: ['#181819', 0.1],\n    textInverseDisabled: ['#181819', 0.5],\n    textBrand: ['#93a9fd', 1],\n    textBrandSecondary: ['#93a9fd', 0.7],\n    textBrandTertiary: ['#93a9fd', 0.1],\n    textBrandDisabled: ['#93a9fd', 0.5],\n    textPositive: ['#2Ecc71', 1],\n    textNegative: ['#e74c3c', 1],\n    textInfo: ['#93a9fd', 1],\n    textCaution: ['#dc7633', 1],\n    fillTransparent: ['#ffffff', 0],\n    fillNeutral: ['#f8f7fa', 1],\n    fillNeutralSecondary: ['#f8f7fa', 0.7],\n    fillNeutralTertiary: ['#f8f7fa', 0.1],\n    fillNeutralDisabled: ['#f8f7fa', 0.5],\n    fillInverse: ['#181819', 1],\n    fillInverseSecondary: ['#181819', 0.7],\n    fillInverseTertiary: ['#181819', 0.1],\n    fillInverseDisabled: ['#181819', 0.5],\n    fillBrand: ['#93a9fd', 1],\n    fillBrandSecondary: ['#93a9fd', 0.7],\n    fillBrandTertiary: ['#93a9fd', 0.1],\n    fillBrandDisabled: ['#93a9fd', 0.5],\n    fillPositive: ['#2Ecc71', 1],\n    fillNegative: ['#e74c3c', 1],\n    fillInfo: ['#93a9fd', 1],\n    fillCaution: ['#dc7633', 1],\n    strokeNeutral: ['#f8f7fa', 1],\n    strokeNeutralSecondary: ['#f8f7fa', 0.7],\n    strokeNeutralTertiary: ['#f8f7fa', 0.1],\n    strokeNeutralDisabled: ['#f8f7fa', 0.5],\n    strokeInverse: ['#181819', 1],\n    strokeInverseSecondary: ['#181819', 0.7],\n    strokeInverseTertiary: ['#181819', 0.1],\n    strokeInverseDisabled: ['#181819', 0.5],\n    strokeBrand: ['#93a9fd', 1],\n    strokeBrandSecondary: ['#93a9fd', 0.7],\n    strokeBrandTertiary: ['#93a9fd', 0.1],\n    strokeBrandDisabled: ['#93a9fd', 0.5],\n    strokePositive: ['#2Ecc71', 1],\n    strokeNegative: ['#e74c3c', 1],\n    strokeInfo: ['#93a9fd', 1],\n    strokeCaution: ['#dc7633', 1],\n    interactiveNeutral: ['#ffffff', 0.1],\n    interactiveNeutralFocus: ['#ffffff', 1],\n    interactiveNeutralFocusSoft: ['#ffffff', 0.1],\n    interactiveInverse: ['#48474b', undefined],\n    interactiveInverseFocus: ['#48474b', 1],\n    interactiveInverseFocusSoft: ['#48474b', 0.1],\n    interactiveBrand: ['#becffe', 0.1],\n    interactiveBrandFocus: ['#becffe', 1],\n    interactiveBrandFocusSoft: ['#becffe', 0.1],\n    shadowNeutral: ['#000000', 0.7],\n    shadowNeutralFocus: ['#000000', 0.7],\n    shadowNeutralFocusSoft: ['#000000', 0.7],\n    shadowNeutralText: ['#000000', 1],\n    shadowInverse: ['#000000', 0.7],\n    shadowInverseFocus: ['#000000', 0.7],\n    shadowInverseFocusSoft: ['#000000', 0.7],\n    shadowInverseText: ['#000000', 1],\n    shadowBrand: ['#000000', 0.7],\n    shadowBrandFocus: ['#000000', 0.7],\n    shadowBrandFocusSoft: ['#000000', 0.7],\n    shadowBrandText: ['#000000', 1]\n  },\n  componentConfig: {\n    Keyboard: {\n      style: {\n        keyProps: {\n          delete: {\n            title: null,\n            icon: 'data:image/png;base64,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'\n          }\n        }\n      }\n    }\n  },\n  font: [],\n  layout: {\n    columnCount: 10,\n    focusScale: 1.2,\n    gutterX: 20,\n    gutterY: 20,\n    marginX: 150,\n    marginY: 150,\n    safe: 50,\n    screenW: 1920,\n    screenH: 1080\n  },\n  radius: { none: 0, xs: 2, sm: 4, md: 8, lg: 16, xl: 24 },\n  spacer: {\n    none: 0,\n    xxs: 2,\n    xs: 4,\n    sm: 8,\n    md: 10,\n    lg: 20,\n    xl: 30,\n    xxl: 40,\n    xxxl: 50\n  },\n  stroke: { none: 0, sm: 2, md: 4, lg: 6, xl: 8 },\n  typography: {\n    display1: {\n      fontFamily: 'Arial',\n      fontSize: 75,\n      lineHeight: 85,\n      fontStyle: '500',\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    display2: {\n      fontFamily: 'Arial',\n      fontSize: 50,\n      lineHeight: 60,\n      fontStyle: '500',\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline1: {\n      fontFamily: 'Arial',\n      fontSize: 35,\n      fontStyle: '500',\n      lineHeight: 48,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline2: {\n      fontFamily: 'Arial',\n      fontSize: 30,\n      fontStyle: '500',\n      lineHeight: 40,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    headline3: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontStyle: '500',\n      lineHeight: 36,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body1: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontStyle: '300',\n      lineHeight: 40,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body2: {\n      fontFamily: 'Arial',\n      fontSize: 22,\n      fontStyle: '300',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    body3: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontStyle: '300',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    button1: {\n      fontFamily: 'Arial',\n      fontSize: 25,\n      fontStyle: '500',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    button2: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontStyle: '500',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    callout1: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontStyle: '500',\n      lineHeight: 32,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    caption1: {\n      fontFamily: 'Arial',\n      fontSize: 15,\n      fontStyle: '500',\n      lineHeight: 24,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    tag1: {\n      fontFamily: 'Arial',\n      fontSize: 20,\n      fontStyle: '500',\n      lineHeight: 24,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    },\n    footnote1: {\n      fontFamily: 'Arial',\n      fontSize: 22,\n      fontStyle: '300',\n      lineHeight: 30,\n      verticalAlign: 'middle',\n      textBaseline: 'bottom'\n    }\n  }\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport logger from './logger';\n\nlet customFontFaces = [];\n\n/**\n * Function to get a list of all custom fonts that have been loaded using the FontFace Web API from the theme\n * @return {Array}\n */\nexport function getCustomFontFaces() {\n  return customFontFaces;\n}\n\n/**\n * Function to load all the fonts from the theme\n */\nexport const fontLoader = fonts => {\n  const promises = [];\n  // Loop through all fonts in the array and attempt to load them using the FontFace Web API\n  for (let i = 0; i < fonts.length; i++) {\n    const { family, src, descriptors } = fonts[i];\n    // If url(s) are specified format them according to the spec https://developer.mozilla.org/en-US/docs/Web/API/FontFace\n    const fontSrc =\n      src && Array.isArray(src) && src.length\n        ? // loop through each string and format it in a way that's readable for the FontFace API\n          src\n            .map(url => {\n              // if the url is a local font then the src is just the string provided in the array\n              // otherwise, format the url string like url(<urlString>)\n              return url.substr(0, 5) === 'local' ? url : `url(${url})`; // Local system fonts are supported by passing a string starting with local. ex local(Impact)\n            })\n            .join(',')\n        : 'url(' + src + ')';\n    const fontFace = new FontFace(family, fontSrc, descriptors || {});\n    logger.info('Loading font', family);\n    document.fonts.add(fontFace);\n    // Push all pending promises into an array, theme manager will wait on everything to resolve before triggering another update cycle\n    promises.push(\n      new Promise(resolve => {\n        fontFace\n          .load()\n          .then(() => {\n            customFontFaces.push(fontFace);\n            resolve(family);\n          })\n          .catch(err => {\n            resolve(new Error(`${family}: ${err.message}`)); // Even if a font fails to load resolve it with an error so the theme doesn't fail to update all other values\n          });\n      })\n    );\n  }\n  return Promise.all(promises).then(fontsLoaded => {\n    // After the promise has resolved log the appropriate success and error messages\n    const loaded = fontsLoaded\n      .filter(font => !(font instanceof Error))\n      .join(', ');\n\n    if (loaded) {\n      logger.log(`Fonts loaded: ${loaded}`);\n    }\n\n    const failed = fontsLoaded\n      .filter(font => font instanceof Error)\n      .map(item => item.message)\n      .join(', ');\n\n    if (failed) {\n      logger.error(`Unable to load fonts: ${failed}`);\n    }\n  });\n};\n\n/**\n * Async function to remove all the fonts loaded by the theme. Useful if a theme is switched at runtime\n */\nexport const cleanupFonts = async fonts => {\n  if (document.fonts && 'delete' in document.fonts) {\n    if (!customFontFaces.length) return;\n    customFontFaces = customFontFaces.filter(fontFace => {\n      if (!fonts.find(font => font.family === fontFace.family)) {\n        logger.info('Removing font', fontFace.family);\n        document.fonts.delete(fontFace);\n        return false;\n      } else {\n        return fontFace;\n      }\n    });\n  } else {\n    logger.info('Unable to remove manually-added fonts');\n  }\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const THEME_KEY_REPLACER = {\n  fontFamily: 'fontFace'\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  clone,\n  getValFromObjPath,\n  getHexColor,\n  getValidColor\n} from '../../utils/index';\nimport baseTheme from '@lightningjs/ui-components-theme-base';\nimport logger from './logger';\nimport events from './events';\nimport { fontLoader, cleanupFonts } from './fonts';\nimport { THEME_KEY_REPLACER } from './constants';\n\nconst merge = {\n  all: objArray => {\n    let result = {};\n    for (let i = 0; i < objArray.length; i++) {\n      result = clone(result, objArray[i]);\n    }\n    return result;\n  }\n};\n\nconst base64Cache = [];\n\nconst isSubTheme = themeName => 'subTheme' === themeName.slice(0, 8);\n\n/**\n * Extracts the MIME type from a Data URI.\n *\n * @param {string} dataUri - The Data URI string.\n * @returns {string|null} The extracted MIME type, or null if not found.\n */\nfunction getMimeTypeFromDataUri(dataUri) {\n  const matches = dataUri.match(/^data:(.*?);base64,/);\n  if (matches && matches.length === 2) {\n    return matches[1];\n  }\n  return null;\n}\n\n/**\n * Checks if a string represents a Base64-encoded image and extracts the MIME type.\n *\n * @param {string} str - The string to check.\n * @returns {{ isImage: boolean, mimeType: string|null }} An object indicating whether the string is an image and the extracted MIME type.\n */\nfunction checkBase64EncodedImage(str) {\n  const regex = /^data:image\\/(jpeg|jpg|png|gif);base64,/;\n  const isImage = regex.test(str);\n  const mimeType = isImage ? getMimeTypeFromDataUri(str.match(regex)[0]) : null;\n\n  return {\n    isImage,\n    mimeType\n  };\n}\n\n/**\n * Converts a Base64-encoded image to a Blob URL.\n * Note: Make sure to handle potential memory leaks caused by the browser's image caching.\n *\n * @param {string} base64String - The Base64-encoded image string.\n * @param {string} mimeType - The MIME type of the image.\n * @returns {string|null} The Blob URL representing the converted image, or null if conversion fails.\n */\nfunction base64ToBlobURL(base64String, mimeType) {\n  const byteCharacters = atob(\n    base64String.substring(base64String.indexOf(',') + 1)\n  );\n  const byteArrays = [];\n\n  try {\n    for (let offset = 0; offset < byteCharacters.length; offset += 512) {\n      const slice = byteCharacters.slice(offset, offset + 512);\n      const byteNumbers = new Array(slice.length);\n\n      for (let i = 0; i < slice.length; i++) {\n        byteNumbers[i] = slice.charCodeAt(i);\n      }\n\n      const byteArray = new Uint8Array(byteNumbers);\n      byteArrays.push(byteArray);\n    }\n\n    const blob = new Blob(byteArrays, { type: mimeType });\n    const blobURL = URL.createObjectURL(blob);\n\n    return blobURL;\n  } catch (error) {\n    logger.info('Unable to convert base64 image to URL');\n    return null;\n  }\n}\n\nclass ThemeManager {\n  constructor() {\n    this._cache = new Map();\n    if (typeof window === 'undefined') return;\n    if (!window.LUI) {\n      window.LUI = {};\n    }\n    if (!window.LUI.themeManagerInstances) {\n      window.LUI.themeManagerInstances = [{ themeManager: this, events }];\n    } else {\n      window.LUI.themeManagerInstances.push({ themeManager: this, events });\n    }\n  }\n\n  // Handle separate instances of context across the application and keep them in sync\n  _setCache(key, payload) {\n    if (typeof window === 'undefined') return;\n    window.LUI.themeManagerInstances.forEach(({ themeManager }) => {\n      if (themeManager) themeManager._cache.set(key, payload);\n    });\n  }\n\n  _deleteCache(key) {\n    if (typeof window === 'undefined') return;\n    window.LUI.themeManagerInstances.forEach(({ themeManager }) => {\n      if (themeManager) themeManager._cache.delete(key);\n    });\n  }\n\n  _emit(key, payload) {\n    if (typeof window === 'undefined') return;\n    window.LUI.themeManagerInstances.forEach(({ events }) => {\n      events.emit(key, payload);\n    });\n  }\n\n  getTheme() {\n    if (this._cache.has('theme')) {\n      return this._cache.get('theme');\n    }\n\n    const theme = this._processTheme.call(this);\n    this._setCache('theme', theme);\n    return theme;\n  }\n\n  async setTheme(themeConfig) {\n    let value;\n    if (Array.isArray(themeConfig)) {\n      value = merge.all(themeConfig);\n    } else {\n      value = themeConfig;\n    }\n\n    if ('object' !== typeof value || null === value) {\n      logger.warn(`context theme expected an object. Received ${typeof value}`);\n      return;\n    }\n\n    this._clearCache();\n    const theme = this._processTheme.call(this, [value], value.extensions);\n    this._setCache('theme', theme);\n    await cleanupFonts(theme.font);\n    if (theme.font && theme.font.length) {\n      await this._loadFonts(theme.font);\n    }\n    this._refreshSubThemes();\n    this._emit('themeExtensionsUpdate');\n    this._emit('themeUpdate'); // Notify components that an update cycle is required\n    return theme;\n  }\n\n  getSubTheme(subThemeName) {\n    if (this._cache.has(`subTheme${subThemeName}`)) {\n      return this._cache.get(`subTheme${subThemeName}`).result;\n    }\n    return;\n  }\n\n  async setSubTheme(subThemeName, value, triggerUpdate = true) {\n    if (!subThemeName) {\n      logger.warn('Sub theme name not specified');\n      return;\n    }\n    if ('string' !== typeof subThemeName) {\n      logger.warn(\n        `Sub theme name must be a string. Received an ${typeof subThemeName}`\n      );\n      return;\n    }\n    if ('object' !== typeof value || !Object.keys(value).length) {\n      logger.warn(\n        `Could not set subTheme ${subThemeName}, value should be an object with properties. Received an ${typeof value}`\n      );\n      return;\n    }\n    const globalTheme = this.getTheme();\n    const subTheme = this._processTheme.call(this, [globalTheme, value]);\n    if (subTheme.font && subTheme.font.length) {\n      await this._loadFonts(subTheme.font);\n    }\n    this._setCache(`subTheme${subThemeName}`, {\n      original: value,\n      result: subTheme\n    });\n\n    if (triggerUpdate) this._emit(`themeUpdate${subThemeName}`);\n    return subTheme;\n  }\n\n  _refreshSubThemes() {\n    // Triggered when global theme is updated\n    [...this._cache.keys()].forEach(key => {\n      if ('string' === typeof key && isSubTheme(key)) {\n        const cache = this._cache.get(key);\n        if (cache.original)\n          this.updateSubTheme(key.replace(/^subTheme/, ''), cache.original);\n      }\n    });\n  }\n\n  async _loadFonts(fontArray) {\n    try {\n      await fontLoader(fontArray);\n    } catch (err) {\n      logger.error(`Unable to load font: ${err}`);\n    }\n  }\n\n  /**\n   * Merge values with current theme\n   */\n  async updateTheme(themeConfig) {\n    let value;\n    if (Array.isArray(themeConfig)) {\n      value = merge.all(themeConfig);\n    } else {\n      value = themeConfig;\n    }\n\n    let currentTheme = {};\n\n    if (this._cache.has('theme')) {\n      currentTheme = this._cache.get('theme');\n    }\n    this._clearCache();\n    const theme = this._processTheme.call(\n      this,\n      [currentTheme, value],\n      value.extensions || currentTheme.extensions\n    );\n    this._setCache('theme', theme);\n    if (theme.font && theme.font.length) {\n      await this._loadFonts(theme.font);\n    }\n    this._refreshSubThemes();\n    if (value.extensions) this._emit('themeExtensionsUpdate');\n    this._emit('themeUpdate'); // Notify components that an update cycle is required\n    return theme;\n  }\n\n  _clearCache() {\n    // Clean up any base64 image that were converted to blobs using createObjectURL\n    base64Cache.filter(image => {\n      if (window.URL && typeof window.URL.revokeObjectURL === 'function')\n        URL.revokeObjectURL(image);\n      return false;\n    });\n\n    this._cache.forEach((value, key) => {\n      if ('string' !== typeof key || !isSubTheme(key)) {\n        this._deleteCache(key);\n      }\n    });\n    // Regenerate sub themes\n    this._cache.forEach((value, key) => {\n      if ('string' === typeof key && isSubTheme(key)) {\n        this.setSubTheme(key.replace('subTheme', ''), value.original, false); // Dont trigger the update...the parent theme will trigger\n      }\n    });\n  }\n\n  async updateSubTheme(subThemeName, value, triggerUpdate = true) {\n    if (!subThemeName) {\n      logger.warn('Sub theme name not specified');\n      return;\n    }\n    if ('object' !== typeof value || !Object.keys(value).length) {\n      logger.warn(\n        `Could not update subTheme ${subThemeName} due to invalid value`\n      );\n      return;\n    }\n\n    const globalTheme = this.getTheme();\n    let currentTheme = {};\n\n    if (this._cache.has(`subTheme${subThemeName}`)) {\n      currentTheme = this._cache.get(`subTheme${subThemeName}`).original;\n    }\n\n    const subTheme = this._processTheme.call(this, [\n      globalTheme,\n      currentTheme,\n      value\n    ]);\n\n    if (subTheme.font && subTheme.font.length) {\n      await this._loadFonts(subTheme.font);\n    }\n\n    this._setCache(`subTheme${subThemeName}`, {\n      original: clone(currentTheme, value),\n      result: subTheme\n    });\n\n    if (triggerUpdate) this._emit(`themeUpdate${subThemeName}`);\n\n    return subTheme;\n  }\n\n  removeSubTheme(subThemeName) {\n    if (this._cache.has(`subTheme${subThemeName}`)) {\n      this._deleteCache(`subTheme${subThemeName}`);\n    }\n    this._emit(`themeUpdate${subThemeName}`);\n  }\n\n  _getComponentUUID(id) {\n    return `componentStyle${id}`;\n  }\n\n  _processTheme(themeArray = [], extensions) {\n    if (!Array.isArray(themeArray)) {\n      throw new Error(\n        `context processTheme expected an array. Received ${typeof themeArray}`\n      );\n    }\n\n    const theme = merge.all([baseTheme, ...themeArray]);\n\n    // Parse all colors in theme\n    const themeFunctions = {};\n    const themeString = JSON.stringify(theme, (key, originalValue) => {\n      let value = originalValue;\n      // Replacer\n      if (value && typeof value === 'object') {\n        const replacement = originalValue;\n        for (var k in value) {\n          if (Object.hasOwnProperty.call(value, k) && THEME_KEY_REPLACER[k]) {\n            replacement[k && THEME_KEY_REPLACER[k]] = value[k];\n            delete replacement[k]; // Removes the original key that was replaced. example: fontFamily is replaced by fontFace so fontFamily is removed from the theme\n          }\n        }\n\n        value = replacement;\n      }\n      // Base64 encoded values can cause memory leaks convert to an image\n      const { isImage, mimeType } = checkBase64EncodedImage(value);\n      if (\n        window.URL &&\n        typeof window.URL.createObjectURL === 'function' &&\n        isImage\n      ) {\n        // base64Cache\n        try {\n          const blobURL = base64ToBlobURL(value, mimeType);\n          base64Cache.push(blobURL);\n          return blobURL;\n        } catch (error) {\n          return value;\n        }\n      }\n\n      if (\n        Array.isArray(value) &&\n        2 === value.length &&\n        !value[0].targetComponent &&\n        value[0].length &&\n        typeof value[0] === 'string' &&\n        value[0].substr(0, 1) === '#' &&\n        typeof value[1] === 'number'\n      ) {\n        // Better check to filter out extensions?\n        return getHexColor(value[0], value[1]);\n      } else if (\n        'extensions' === key ||\n        'function' === typeof value ||\n        ('object' === typeof value &&\n          value !== null &&\n          'Object' !== value.constructor.name &&\n          !Array.isArray(value))\n      ) {\n        // Functions will not stringify, they will be merged after\n        themeFunctions[key] = value;\n        return;\n      } else if ('string' === typeof value && value.includes('theme.')) {\n        const themeValue = getValFromObjPath({ theme }, value);\n        if (themeValue) {\n          return themeValue;\n        } else {\n          return value;\n        }\n      } else {\n        const validColor = getValidColor(value);\n        if (validColor) {\n          return validColor;\n        }\n        return value;\n      }\n    });\n\n    return { ...JSON.parse(themeString), ...themeFunctions, extensions };\n  }\n}\n\nconst themeManagerInstance = new ThemeManager();\n\nexport { themeManagerInstance as default, ThemeManager };\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { capitalizeFirstLetter } from '../../utils';\nimport logger from './logger';\nimport metrics from './metrics';\nimport events from './events';\nimport themeManager from './theme-manager';\n\n/**\n * Class to create a context object. Context is a singleton that will hold settings and logic to be used across all Lightning UI components.\n */\n\n/**\n * @typedef ThemeObject\n * @type {any}\n */\nclass Context {\n  /**\n   * @type {ThemeObject}\n   */\n  get theme() {\n    return themeManager.getTheme();\n  }\n  /**\n   * theme cannot be set directly\n   */\n  set theme(value) {\n    logger.warn(\n      'Context.theme must be set using context.setTheme or context.updateTheme'\n    );\n  }\n  /**\n   * @type {object}\n   */\n  get keyMetricsCallback() {\n    return metrics.keyMetricsCallback;\n  }\n  /**\n   * keyMetricsCallback cannot be set directly\n   */\n  set keyMetricsCallback(value) {\n    logger.warn(\n      'Context.keyMetricsCallback must be set using context.setKeyMetricsCallback'\n    );\n  }\n  /**\n   * @type {boolean}\n   */\n  get debug() {\n    return logger.debug;\n  }\n\n  set debug(value) {\n    logger.debug = value;\n  }\n  /**\n   * @type {function}\n   * @param {string} name\n   * @param {function} callback\n   */\n  on() {\n    return events.on(...arguments);\n  }\n  /**\n   * @type {function}\n   */\n  off() {\n    return events.off(...arguments);\n  }\n  /**\n   * @type {function}\n   * @param {string} name\n   * @param {string|object|number|boolean} payload\n   */\n  emit() {\n    return events.emit(...arguments);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  log(...args) {\n    logger.log(...args);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  info(...args) {\n    logger.info(...args);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  warn(...args) {\n    logger.warn(...args);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  error(...args) {\n    logger.error(args);\n  }\n  /**\n   * @property {object|array}\n   * @return {object}\n   */\n  setTheme(value) {\n    return themeManager.setTheme(value);\n  }\n  /**\n   * @property {object|array}}\n   * @return {object}\n   */\n  updateTheme(value) {\n    return themeManager.updateTheme(value);\n  }\n  /**\n   * @property {string}\n   * @return {object}\n   */\n  getSubTheme(subThemeName) {\n    return themeManager.getSubTheme(subThemeName);\n  }\n  /**\n   * Expects an object where properties are child theme names. Values will be merged with the global themeManager.\n   * @property {object}\n   */\n  setSubThemes(subThemesObj) {\n    if ('object' !== typeof subThemesObj) {\n      logger.warn('subThemes must be an object');\n      return;\n    }\n    for (const subTheme in subThemesObj) {\n      themeManager.setSubTheme(subTheme, subThemesObj[subTheme]);\n    }\n  }\n  /**\n   * @property {string}\n   * @return {object}\n   */\n  setSubTheme(subThemeName, value) {\n    return themeManager.setSubTheme(subThemeName, value);\n  }\n  /**\n   * @property {string}\n   * @return {object}\n   */\n  updateSubTheme(subThemeName, value) {\n    return themeManager.updateSubTheme(subThemeName, value);\n  }\n  /**\n   * @property {string}\n   * @return {void}\n   */\n  removeSubTheme(subThemeName) {\n    themeManager.removeSubTheme(subThemeName);\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  setLogCallback(value) {\n    logger.logCallback = value;\n  }\n  /**\n   * @property {function}\n   * @return {void}\n   */\n  setKeyMetricsCallback(value) {\n    metrics.keyMetricsCallback = value;\n  }\n  /**\n   * @property {function}\n   * @return {object}\n   */\n  config(config = {}) {\n    const configKeys = Object.keys(config);\n    for (let i = 0; i < configKeys.length; i++) {\n      const setMethod = this['set' + capitalizeFirstLetter(configKeys[i])];\n      if (setMethod) {\n        setMethod(config[configKeys[i]]);\n      }\n    }\n    return this;\n  }\n}\n\nconst contextInstance = new Context();\n\nexport { contextInstance as default, Context };\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../context';\n\nclass GlobalUpdateManager {\n  constructor() {\n    this._updateThemeSet = new Set();\n    this._requestUpdateSet = new Set();\n    this._timeout = null;\n    this._runUpdatesTimeoutHandler = this._runUpdatesTimeoutHandler.bind(this);\n  }\n\n  _runUpdatesTimeoutHandler() {\n    this._timeout = null;\n    this._updateThemeSet.forEach(component => {\n      try {\n        component._updateThemeComponent();\n      } catch (e) {\n        context.error('Error updating component themes', e);\n      }\n    });\n    this._updateThemeSet.clear();\n\n    this._requestUpdateSet.forEach(component => {\n      try {\n        component.requestUpdate();\n      } catch (e) {\n        context.error('Error updating component', e);\n      }\n    });\n    this._requestUpdateSet.clear();\n  }\n\n  /**\n   * Force all updates now\n   *\n   * @returns\n   */\n  flush() {\n    // If there is no timeout then there is definately nothing to update\n    if (!this._timeout) return;\n    clearTimeout(this._timeout);\n    this._runUpdatesTimeoutHandler();\n  }\n\n  addUpdateTheme(component) {\n    this._updateThemeSet.add(component);\n    if (!this._timeout) {\n      this._timeout = setTimeout(this._runUpdatesTimeoutHandler, 0);\n    }\n  }\n\n  deleteUpdateTheme(component) {\n    // Don't bother checking and clearing the timeout if one is active\n    // Not worth the overhead. More than likely it needs to run again anyway.\n    this._updateThemeSet.delete(component);\n  }\n\n  addRequestUpdate(component) {\n    this._requestUpdateSet.add(component);\n    if (!this._timeout) {\n      this._timeout = setTimeout(this._runUpdatesTimeoutHandler, 0);\n    }\n  }\n\n  deleteRequestUpdate(component) {\n    // See note in deleteRequestUpdate()\n    this._requestUpdateSet.delete(component);\n  }\n\n  hasQueuedRequestFor(component) {\n    return this._requestUpdateSet.has(component);\n  }\n}\n\nexport const updateManager = new GlobalUpdateManager();\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context';\nimport { updateManager } from '../../globals/global-update-manager/GlobalUpdateManager';\nimport { clone } from '../../utils';\n\nfunction capital(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n// Merge the componentConfigProp with the prop value\nfunction mergeProps(componentConfigProp, prop) {\n  let result = prop;\n  if (\n    typeof componentConfigProp === 'object' &&\n    Object.keys(componentConfigProp).length &&\n    typeof prop === 'object'\n  ) {\n    result = clone(componentConfigProp, prop);\n  }\n\n  return result ?? componentConfigProp;\n}\n\nfunction getPropertyDescriptor(name, key) {\n  return {\n    get() {\n      const customGetter = this[`_get${capital(name)}`];\n      if (customGetter && typeof customGetter === 'function') {\n        const value = customGetter.call(this, this[key]);\n        this[key] = value || this.__componentConfigProps?.[name]; // Defaults can also be set from withThemeStyles if used\n        return mergeProps(this.__componentConfigProps?.[name], value);\n      }\n\n      return mergeProps(this.__componentConfigProps?.[name], this[key]); // Defaults can also be set from withThemeStyles if used\n    },\n    set(value) {\n      const oldValue = this[key];\n      if (value !== oldValue) {\n        const changeHandler = this[`_set${capital(name)}`];\n        if (changeHandler && typeof changeHandler === 'function') {\n          value = changeHandler.call(this, value);\n        }\n\n        const newValue = key === 'style' ? clone(this[key], value) : value;\n\n        if (\n          typeof this[key] === 'object' &&\n          this[key] !== null &&\n          this[key].style\n        ) {\n          // If the property is for a nested component, recursively combine it with the component's existing styles, ensuring that any styles defined in componentConfig are also applied.\n          const style = clone(this[key].style, value.style || {});\n          newValue.style = style;\n        }\n\n        this[key] = newValue;\n        this.queueRequestUpdate();\n      }\n    },\n    configurable: true,\n    enumerable: true\n  };\n}\n\nfunction getAliasPropertyDescriptor(prev, curr) {\n  const deprecationWarning = `The property \"${prev}\" is deprecated and will be removed in a future release. Please use \"${curr}\" instead.`;\n  return {\n    get() {\n      console.warn(deprecationWarning);\n      return this[curr];\n    },\n    set(value) {\n      console.warn(deprecationWarning);\n      this[curr] = value;\n    }\n  };\n}\n\nexport default function withUpdates(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _construct() {\n      const prototype = Object.getPrototypeOf(this);\n      if (!prototype._withUpdatesInitialized) {\n        // create custom accessors and mutators for the props in the properties array\n        const props = this.constructor.properties || [];\n        props.forEach(name => {\n          const key = '_' + name;\n          const descriptor = getPropertyDescriptor(name, key);\n          if (descriptor !== undefined) {\n            Object.defineProperty(prototype, name, descriptor);\n          }\n        });\n\n        // create custom accessors and mutators that map the props in the alias array to\n        // the props in the properties array (and use the getters/setters defined above)\n        const aliasProps = this.constructor.aliasProperties || [];\n        aliasProps.forEach(alias => {\n          if (\n            alias &&\n            typeof alias.prev === 'string' &&\n            typeof alias.curr === 'string'\n          ) {\n            const descriptor = getAliasPropertyDescriptor(\n              alias.prev,\n              alias.curr\n            );\n            if (descriptor !== undefined) {\n              Object.defineProperty(prototype, alias.prev, descriptor);\n            }\n          }\n        });\n\n        prototype._withUpdatesInitialized = true;\n      }\n\n      this._whenEnabled = new Promise(resolve => {\n        this._whenEnabledResolver = resolve;\n      });\n\n      super._construct && super._construct();\n    }\n\n    queueRequestUpdate() {\n      if (!this._isAttached()) return;\n      updateManager.addRequestUpdate(this);\n    }\n\n    _firstEnable() {\n      this._readyForUpdates = true;\n      this._whenEnabledResolver();\n      updateManager.deleteRequestUpdate(this);\n      this.requestUpdate();\n      super._firstEnable && super._firstEnable();\n    }\n\n    requestEarlyUpdate() {\n      this._readyForUpdates = true;\n      if (updateManager.hasQueuedRequestFor(this)) {\n        updateManager.deleteRequestUpdate(this);\n        // method also triggers ready for updates\n        this._readyForUpdates = true;\n        this.requestUpdate();\n        return true;\n      }\n      return false;\n    }\n\n    _detach() {\n      super._detach();\n      updateManager.deleteRequestUpdate(this);\n    }\n\n    /**\n     * Request an immediate component update.\n     *\n     * @remarks\n     * Except for when calling `super._update()` from a `_update()`\n     * implementation, call this instead of calling `_update()` directly\n     *\n     * @param {boolean} force If set, bypasses the '_readyForUpdates' check\n     */\n    requestUpdate(force = false) {\n      if (this._readyForUpdates || force) {\n        const result = this._update();\n        if (typeof result === 'object' && result !== null && result.catch) {\n          // This is a promise, make sure to capture any errors\n          result.catch(e => {\n            context.error(\n              `asyncronous _update() error in '${this.constructor.__componentName}'`,\n              this,\n              e\n            );\n          });\n        }\n      }\n    }\n\n    logPropTable() {\n      console.table(this._propTable);\n    }\n\n    get _propTable() {\n      return this.constructor.properties.reduce((acc, prop) => {\n        acc[prop] = this[prop];\n        return acc;\n      }, {});\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nfunction getPropertyDescriptor(path) {\n  return {\n    get() {\n      return this.tag(path);\n    },\n    configurable: true,\n    enumerable: true\n  };\n}\n\nexport default function withTags(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _construct() {\n      const prototype = Object.getPrototypeOf(this);\n      if (!prototype._withTagsInitialized) {\n        const tags = this.constructor.tags || [];\n        tags.forEach(tag => {\n          if (typeof tag === 'object') {\n            var { name, path } = tag;\n          } else {\n            var name = tag; // eslint-disable-line no-redeclare\n            var path = tag; // eslint-disable-line no-redeclare\n          }\n          const key = '_' + name;\n          const descriptor = getPropertyDescriptor(path);\n          Object.defineProperty(prototype, key, descriptor);\n        });\n        prototype._withTagsInitialized = true;\n      }\n      super._construct && super._construct();\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context/index';\n\nexport default function withHandleKey(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _handleKey(keyEvent) {\n      return this._processEvent(keyEvent);\n    }\n\n    _handleKeyRelease(keyEvent) {\n      return this._processEvent(keyEvent, 'Release');\n    }\n\n    _processEvent(keyEvent, suffix = '') {\n      const keyMap = this.stage.application.__keymap || {};\n      let key = keyMap[keyEvent.keyCode];\n      if (!key) {\n        key = keyEvent.key;\n      }\n      if (key && typeof this[`on${key}${suffix}`] === 'function') {\n        this._invokeKeyPayloadCallback(key + suffix);\n        return this[`on${key}${suffix}`].call(this, this, keyEvent);\n      }\n      return false;\n    }\n\n    _invokeKeyPayloadCallback(key) {\n      if (\n        this.metricsPayload &&\n        typeof context.keyMetricsCallback === 'function'\n      ) {\n        context.keyMetricsCallback(key, this.metricsPayload);\n      }\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context/index';\nimport { stringifyCompare, getDimensions } from '../../utils';\n\nexport default function withLayout(Base) {\n  return class extends Base {\n    _construct() {\n      super._construct && super._construct();\n      this._previousDimensionData = null; // Store the previous dimension data to compare next time _updateItemLayout is called\n    }\n\n    get itemLayout() {\n      return this._itemLayout;\n    }\n\n    set itemLayout(v) {\n      const componentName =\n        this.constructor._componentName || this.constructor.name;\n      let itemLayout;\n      if (v) {\n        itemLayout = JSON.parse(\n          JSON.stringify(v, (k, v) => {\n            if (k !== 'circle' && v < 0) {\n              context.error(\n                `itemLayout for ${componentName} received an invalid value of ${v} for ${k}`\n              );\n              return;\n            } else if (k === 'circle') {\n              return Boolean(v);\n            }\n            return v;\n          })\n        );\n      }\n\n      if (!stringifyCompare(this._itemLayout, itemLayout)) {\n        if (itemLayout && !itemLayout.upCount) {\n          this._originalW = this.w;\n          this._originalH = this.h;\n          this._itemLayout = {\n            w: this._originalW,\n            h: this._originalH,\n            ...itemLayout\n          };\n        } else {\n          this._itemLayout = itemLayout;\n        }\n\n        this._updateItemLayout();\n      }\n    }\n\n    _allowUpdate() {\n      const {\n        w = '',\n        h = '',\n        circle = '',\n        ratioX = '',\n        ratioY = '',\n        upCount = ''\n      } = this._itemLayout || {};\n      // Store a string representation of all values from previous update to compare and decide if layout should change\n      const layoutString =\n        Object.values(context.theme.layout).join('') +\n        `${w}${h}${circle ? 1 : 0}${ratioX}${ratioY}${upCount}`;\n      if (layoutString !== this._previousDimensionData) {\n        this._previousDimensionData = layoutString;\n        return true;\n      }\n      return false;\n    }\n\n    _updateItemLayout() {\n      if (!this._allowUpdate()) return;\n      const { w, h } = getDimensions(this.theme, this._itemLayout);\n      if (h || w) {\n        // If there is not enough information passed in args to calculate item size\n        const width = context.theme.layout.screenW;\n        const height = context.theme.layout.screenH;\n        const calculatedWidth = w || h * (width / height);\n        const calculatedHeight = h || w * (height / width);\n        this.w =\n          this._itemLayout && this._itemLayout.circle\n            ? calculatedHeight\n            : calculatedWidth; // Width must be set first in order for Cards to be displayed properly\n        this.h = calculatedHeight;\n        if (this._itemLayout && this._itemLayout.circle && this.style.radius) {\n          this._circleSet = true;\n          this._originalRadius = this.style.radius;\n          this.style = {\n            ...this.style,\n            radius: calculatedHeight / 2\n          };\n        } else if (this._circleSet) {\n          // Restore to it's original state\n          this.style = {\n            ...this.style,\n            radius: this._originalRadius\n          };\n          this._originalRadius = undefined;\n          this._circleSet = false;\n        }\n        this.queueRequestUpdate && this.queueRequestUpdate();\n        this.fireAncestors('$itemChanged');\n      }\n    }\n  };\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { clone, getValFromObjPath, getHexColor } from '../../utils';\nimport log from '../../globals/context/logger';\n\n/**\nGiven a character, return its ASCII value multiplied by its position.\n *\n@param {string} char - The character to process.\n@param {number} index - The position of the character in the string.\n@returns {number} - The ASCII value of the character multiplied by its position.\n */\nexport const getCharacterValue = (char, index) => {\n  return char.charCodeAt(0) * (index + 1);\n};\n\n/**\n * Recursively sorts an object by its keys. If an object has nested objects as values,\n * it will sort those nested objects as well.\n *\n * @param {Object} obj - The object to be sorted.\n * @returns {Object} A new object that is a sorted version of the input object.\n */\nexport const sortObject = obj => {\n  const sortedObj = {};\n  Object.keys(obj)\n    .sort()\n    .forEach(key => {\n      if (\n        typeof obj[key] === 'object' &&\n        obj[key] !== null &&\n        !Array.isArray(obj[key])\n      ) {\n        sortedObj[key] = sortObject(obj[key]); // Recursive call for nested objects\n      } else {\n        sortedObj[key] = obj[key];\n      }\n    });\n  return sortedObj;\n};\n\n/**\nGiven an object, return a sum of the ASCII values of all characters in its\nJSON stringified representation, each multiplied by its position.\n*\n@param {object} obj - The object to process.\n@returns {number} - The sum of ASCII values, each multiplied by its position.\n*/\nexport const getCharacterSum = obj => {\n  const sortedObj = sortObject(obj);\n  const str = JSON.stringify(sortedObj).replace(/[{}:\",\\s]/g, ''); // Remove brackets, colons, and whitespace\n  let sum = 0;\n  for (let i = 0; i < str.length; i++) {\n    sum += getCharacterValue(str[i], i);\n  }\n  return sum;\n};\n\n/**\nGiven an object, return a \"hash\" of the object, which is a combination of\nthe length of its JSON stringified representation and the sum of the ASCII\nvalues of all characters in that string, each multiplied by its position.\n*\n@param {object} obj - The object to process.\n@returns {string} - The hash of the object.\n*/\nexport const getHash = obj => {\n  const str = JSON.stringify(obj);\n  return str.length + '-' + getCharacterSum(obj);\n};\n\n/**\n * Recursively executes functions within an object or array structure, passing them a given context.\n * @param {Function|Object|Array} objOrFunction - The object, array, or function to process.\n * @param {*} theme - The context to pass to any encountered functions.\n * @returns {*} The processed structure with functions executed.\n */\nexport function executeWithContextRecursive(objOrFunction, theme) {\n  if (typeof objOrFunction === 'function') {\n    // If the input is a function, execute it with the theme as a parameter\n    const result = objOrFunction(theme);\n    return executeWithContextRecursive(result, theme);\n  } else if (Array.isArray(objOrFunction)) {\n    // If the input is an array, iterate through its elements and apply the function recursively.\n    return objOrFunction.map(item => executeWithContextRecursive(item, theme));\n  } else if (typeof objOrFunction === 'object' && objOrFunction !== null) {\n    // If the input is an object (and not null), iterate through its properties and apply the function recursively.\n    const result = {};\n    for (const key in objOrFunction) {\n      if (objOrFunction.hasOwnProperty(key)) {\n        result[key] = executeWithContextRecursive(objOrFunction[key], theme);\n      }\n    }\n    return result;\n  } else {\n    // Return the value as is if it's neither a function, an object, nor an array.\n    return objOrFunction;\n  }\n}\n\n/**\n * Checks if a value is a plain object.\n *\n * @param {*} value - The value to check.\n * @returns {boolean} - True if the value is a plain object, false otherwise.\n */\nexport function isPlainObject(value) {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    !Array.isArray(value) &&\n    !(value instanceof Date) &&\n    !(value instanceof RegExp) &&\n    !(value instanceof Function) &&\n    !(value instanceof Error)\n  );\n}\n\n/**\n * Returns the subTheme property of the first parent object that has one, or undefined if none exist.\n *\n * @param {object} obj - The object to search for a subTheme property.\n * @returns {(String | Undefined)} - The value of the subTheme property, or undefined if none exists.\n */\nexport const getSubTheme = obj => {\n  while (obj && (!obj.subTheme || typeof obj.subTheme !== 'string')) {\n    obj = obj.p;\n  }\n  return obj ? obj.subTheme : undefined;\n};\n\n/**\n * Returns the component configuration object for the given object based on its prototype chain.\n *\n * @param {object} obj - The object to get the component configuration for.\n * @returns {object} - The component configuration object.\n */\nexport const getComponentConfig = obj => {\n  if (!isPlainObject(obj)) return {};\n  return obj?.theme?.componentConfig?.[obj.constructor.__componentName] || {};\n};\n\n/**\n * Returns an array of the names of all components in the prototype chain of the given object.\n * @param {object} obj - The object to get the prototype chain from.\n * @returns {string[]} - An array of component names.\n */\nexport const getPrototypeChain = obj => {\n  if (!isPlainObject(obj)) return [];\n  const prototypeChain = new Set();\n  let proto = obj;\n\n  if (obj.constructor && obj.constructor.__componentName) {\n    prototypeChain.add(obj.constructor.__componentName);\n  }\n\n  /**\n   * Traverse the prototype chain and add component names to the set\n   */\n  do {\n    proto = Object.getPrototypeOf(proto);\n    if (proto !== null && typeof proto === 'object') {\n      // Add only components that support theming\n      if (proto.constructor.__componentName) {\n        prototypeChain.add(proto.constructor.__componentName);\n      }\n    }\n  } while (proto);\n\n  // Convert the set to an array and return it\n  return Array.from(prototypeChain);\n};\n\n/**\n * Recursively removes properties from an object that are themselves empty objects.\n * Does not remove arrays, non-plain objects, or non-empty objects.\n *\n * @param {Object} obj - The object to clean of empty objects.\n * @returns {Object} The cleaned object.\n */\nexport function removeEmptyObjects(obj) {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key) && isPlainObject(obj[key])) {\n      removeEmptyObjects(obj[key]); // Recurse into the object\n\n      // After recursion, if the object is empty, delete it from the parent\n      if (Object.keys(obj[key]).length === 0) {\n        delete obj[key];\n      }\n    }\n  }\n\n  return obj; // Always return obj, even if it's empty\n}\n\n// This map will store hashes of objects to detect duplicates.\n\nexport function createSharedReferences(obj = {}) {\n  const seenObjects = new Map();\n\n  // Generates a hash for an object.\n  // Sorting keys ensures consistent hash regardless of property order.\n  function hash(object) {\n    return JSON.stringify(object, Object.keys(object).sort());\n  }\n\n  function process(currentObj) {\n    for (const key in currentObj) {\n      if (currentObj.hasOwnProperty(key)) {\n        const value = currentObj[key];\n        if (typeof value === 'object' && value !== null) {\n          // Ensure it's an object\n          const valueHash = hash(value);\n          if (seenObjects.has(valueHash)) {\n            // If we've seen this object before, replace the current reference\n            // with the original reference.\n            currentObj[key] = seenObjects.get(valueHash);\n          } else {\n            seenObjects.set(valueHash, value);\n            process(value); // Recursively process this object\n          }\n        }\n      }\n    }\n  }\n\n  process(obj);\n\n  return obj;\n}\n\n/**\n * Combines the provided properties and returns a list of unique properties.\n *\n * @param {string[]} defaultProps - Default property names.\n * @param {Object} additionalProps - Object whose keys are additional property names.\n * @param {string[]} subProps - Sub property names.\n * @returns {string[]} - Array of unique property names.\n */\nexport function getUniqueProperties(defaultProps = []) {\n  if (!Array.isArray(defaultProps)) {\n    throw new TypeError('Expected defaultProps to be an array of strings.');\n  }\n\n  return [...new Set(defaultProps)];\n}\n\n/**\n * Generate the payload by cloning and merging multiple objects.\n *\n * @param {Object} base - The base object to start with.\n * @param {Object} defaultStyle - Default styles provided by the user.\n * @param {string} toneItem - The current tone being processed.\n * @param {string} modeItem - The current mode being processed.\n * @param {Object} tone - Tone configurations.\n * @param {Object} mode - Mode configurations.\n * @returns {Object} - The merged payload.\n */\nexport function generatePayload(\n  base,\n  defaultStyle,\n  toneItem,\n  modeItem,\n  tone,\n  mode\n) {\n  let payload = clone(defaultStyle, base);\n  payload = clone(payload, tone?.[toneItem]);\n  payload = clone(payload, mode?.[modeItem]);\n  payload = clone(payload, tone?.[toneItem]?.mode?.[modeItem] || {});\n  payload = clone(payload, mode?.[modeItem]?.tone?.[toneItem] || {});\n  return payload;\n}\n\n/**\n * Recursively searches for and returns all the property keys nested within the specified key in the object.\n *\n * @param {Object} obj - The object to search through.\n * @param {string} keyToFind - The key whose nested keys are to be found.\n * @returns {string[]} An array containing all nested property keys under the specified key.\n */\nfunction findNestedKeys(obj, keyToFind) {\n  const nestedKeys = [];\n\n  /**\n   * Inner function to recursively search for nested keys.\n   *\n   * @param {Object} obj - The nested object to search through.\n   */\n  function searchNestedKeys(obj) {\n    if (typeof obj === 'object' && obj !== null) {\n      for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          nestedKeys.push(key); // Add the nested key to the array\n        }\n      }\n    }\n  }\n\n  /**\n   * Outer function to initiate search when the specified key is found.\n   *\n   * @param {Object} obj - The object to search through.\n   */\n  function searchForKey(obj) {\n    if (typeof obj === 'object' && obj !== null) {\n      for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          if (key === keyToFind) {\n            searchNestedKeys(obj[key]); // Start searching for nested keys\n            break; // Once the specified key is found, we don't need to look further at this level\n          }\n          searchForKey(obj[key]); // Continue searching for the specified key\n        }\n      }\n    }\n  }\n\n  searchForKey(obj); // Initialize the search with the object\n  return nestedKeys; // Return the array of nested keys\n}\n\n/**\n * Generates a solution based on the provided configurations.\n *\n * @param {Object} options - The configuration options for generating the solution.\n * @param {Object} [options.base={}] - Base object.\n * @param {Object} [options.tone={}] - Tone configurations.\n * @param {Object} [options.mode={}] - Mode configurations.\n * @param {Object} [options.defaultStyle={}] - Default styles provided by the user.\n * @returns {Object} - The generated solution with shared references and merged identical properties.\n */\nexport const generateSolution = (\n  { base = {}, tone = {}, mode = {}, defaultStyle = {} },\n  modeKeys = [],\n  toneKeys = []\n) => {\n  const solution = {};\n\n  const uniqueModes = getUniqueProperties([\n    'focused',\n    'disabled',\n    ...modeKeys,\n    'unfocused' // Unfocused must be at the end for proper fallback since base === 'unfocused' in many cases\n  ]);\n\n  const uniqueTones = getUniqueProperties([\n    'neutral',\n    'inverse',\n    'brand',\n    ...toneKeys\n  ]);\n\n  for (const modeItem of uniqueModes) {\n    for (const toneItem of uniqueTones) {\n      const payload = generatePayload(\n        base,\n        defaultStyle,\n        toneItem,\n        modeItem,\n        tone,\n        mode\n      );\n      solution[`${modeItem}_${toneItem}`] = payload;\n    }\n  }\n\n  return solution;\n};\n\nconst DEFAULT_KEYS = [\n  // ORDER MATTERS\n  'unfocused_neutral',\n  'unfocused_inverse',\n  'unfocused_brand',\n  'focused_neutral',\n  'focused_inverse',\n  'focused_brand',\n  'disabled_neutral',\n  'disabled_inverse',\n  'disabled_brand'\n];\n\n/**\n * Enforce a contract on an input object by ensuring that it contains a set of specified keys\n * and, if not, substituting them with values from fallback keys in a predefined order.\n *\n * @param {Object} inputObj - The input object to enforce the contract on.\n * @returns {Object} - An object that adheres to the contract, with missing keys replaced by fallback values.\n */\nexport function enforceContract(inputObj) {\n  const result = {};\n  for (const key of [...DEFAULT_KEYS, ...Object.keys(inputObj)]) {\n    if (!inputObj.hasOwnProperty(key)) {\n      // Find the first fallback property that exists in inputObj\n      const fallbackKey = DEFAULT_KEYS.find(fallback =>\n        inputObj.hasOwnProperty(fallback)\n      );\n      if (fallbackKey) {\n        const fallback = inputObj[fallbackKey];\n        result[key] = typeof fallback !== 'object' ? {} : fallback;\n      } else {\n        result[key] = {};\n      }\n    } else {\n      if (typeof inputObj[key] !== 'object') {\n        // If the value is not an object, replace it with an empty object\n        result[key] = {};\n      } else {\n        result[key] = inputObj[key];\n      }\n    }\n  }\n  return result;\n}\n\n/**\n * Generates the source style object for a given component by merging base, mode, and tone styles from the component's style chain\n * @param {object} component - The component for which to generate the style source\n * @returns {object} - The source style object for the component\n */\nexport const generateComponentStyleSource = ({\n  theme = {},\n  styleChain = [],\n  inlineStyle = {},\n  alias = []\n} = {}) => {\n  if (typeof theme !== 'object') {\n    throw new Error('Expected theme to be an object');\n  }\n\n  if (!Array.isArray(styleChain)) {\n    throw new Error('Expected styleChain to be an array');\n  }\n\n  if (typeof inlineStyle !== 'object') {\n    throw new Error('Expected inlineStyle to be an object');\n  }\n\n  if (!Array.isArray(alias)) {\n    throw new Error('Expected alias to be an array');\n  }\n\n  /**\n   * Component default styles\n   */\n  const componentDefault = styleChain.map(({ style }) => {\n    if (\n      typeof style === 'object' &&\n      !style.base &&\n      !style.mode &&\n      !style.tone &&\n      !style.default\n    ) {\n      return { base: style };\n    } else {\n      const { base = {}, mode = {}, tone = {} } = style;\n\n      let componentConfigDefaultStyle;\n      if (style) {\n        const defaultStyle = JSON.parse(JSON.stringify(style));\n        delete defaultStyle.base;\n        delete defaultStyle.tone;\n        delete defaultStyle.mode;\n        componentConfigDefaultStyle = defaultStyle; // Anything in the root level of style\n      }\n\n      return {\n        defaultStyle: componentConfigDefaultStyle || {},\n        base,\n        mode,\n        tone\n      };\n    }\n  });\n\n  /**\n   * Local / Instance level styles\n   * DefaultStyle will apply to the next level in the hierarchy\n   */\n  let localDefaultStyle;\n  if (inlineStyle) {\n    const defaultStyle = JSON.parse(JSON.stringify(inlineStyle));\n    delete defaultStyle.base;\n    delete defaultStyle.tone;\n    delete defaultStyle.mode;\n    localDefaultStyle = defaultStyle; // Anything in the root level of style\n  }\n\n  const local = {\n    defaultStyle: localDefaultStyle || {},\n    base: inlineStyle?.base || {},\n    mode: inlineStyle?.mode || {},\n    tone: inlineStyle?.tone || {}\n  };\n\n  // Merge all the styles together into one array to loop\n  const merged = [...componentDefault, local];\n\n  // Execute all style functions with the theme\n  const parsedStyles = merged.map(style => {\n    return executeWithContextRecursive(style, theme);\n  });\n\n  // Find all the keys that are in mode/tone as well as nested under mode and tone this will help generate the final solution\n  const modeKeys = findNestedKeys(parsedStyles, 'mode');\n  const toneKeys = findNestedKeys(parsedStyles, 'tone');\n\n  // Merge all the styles together into one object\n  const solution = parsedStyles.reduce((acc, style) => {\n    return clone(acc, generateSolution(style, modeKeys, toneKeys));\n  }, {});\n\n  const final = formatStyleObj(\n    removeEmptyObjects(colorParser({ theme }, solution)) || {},\n    alias\n  );\n\n  const cleanObj = createSharedReferences(final);\n\n  return enforceContract(cleanObj);\n};\n\n/**\n * Parse and process a style object to replace theme strings and process color arrays.\n * @param {object} targetObject - In most cases, this will be a theme object.\n * @param {object} styleObj - The input style object to be processed.\n * @returns {object} The processed style object with theme strings replaced and color arrays processed.\n */\nexport const colorParser = (targetObject, styleObj) => {\n  // Check if targetObject is an object\n  if (typeof targetObject !== 'object' || targetObject === null) {\n    throw new TypeError('targetObject must be an object.');\n  }\n\n  // Check if styleObj is an object\n  if (typeof styleObj !== 'object' || styleObj === null) {\n    throw new TypeError('styleObj must be an object.');\n  }\n\n  // Process style object and remove unnecessary properties\n  const processedStyle = JSON.stringify(styleObj, (_, value) => {\n    if (-1 < ['tone', 'mode'].indexOf(_)) return value; // Remove any tone/mode or mode/tone properties as they have already been processed\n\n    // Handle theme strings, e.g., 'theme.radius.md'\n    if (typeof value === 'string' && value.startsWith('theme.')) {\n      // Retrieve the value from the target object using the theme path\n      return getValFromObjPath(targetObject, value); // If no theme value exists, the property will be removed\n    }\n\n    function isValidColor(num) {\n      return num >= 0 && num <= 0xffffffff;\n    }\n\n    // Handle color arrays, e.g., ['#663399', 1] or [255, 0.5]\n    if (\n      Array.isArray(value) &&\n      value.length === 2 &&\n      ((typeof value[0] === 'string' && value[0].startsWith('#')) ||\n        (typeof value[0] === 'number' && isValidColor(value[0]))) &&\n      typeof value[1] === 'number'\n    ) {\n      // Return processed hex color or the original value if processing fails\n      return getHexColor(value[0], value[1]) || value;\n    }\n\n    // Return all other values as-is\n    return value;\n  });\n\n  return JSON.parse(processedStyle || {});\n};\n\n/**\n * Generates the final style object for a component using its style source.\n * @param {object} component - The component for which to generate a style object.\n * @param {object} componentStyleSource - The style source object for the component.\n * @returns {object} - The generated style object.\n */\nexport const generateStyle = (component, componentStyleSource = {}) => {\n  if (!isPlainObject(component)) return {};\n  const { mode = 'unfocused', tone = 'neutral' } = component;\n  return (\n    componentStyleSource[`${mode}_${tone}`] ||\n    componentStyleSource['unfocused_neutral'] ||\n    {}\n  );\n};\n\n/**\n * Generates a name by concatenating the names of constructors in the prototype chain.\n * @param {object} obj - The object for which to generate the name.\n * @returns {string} - The generated name.\n */\nexport function generateNameFromPrototypeChain(obj, name = '') {\n  if (!obj) return name;\n  const proto = Object.getPrototypeOf(obj);\n  if (!proto || !proto.constructor) return name;\n  const componentName = `${name ? name + '.' : ''}${\n    proto?.constructor?.__componentName || ''\n  }`\n    .replace(/\\.*$/, '')\n    .trim();\n  const result = generateNameFromPrototypeChain(proto, componentName);\n  return result;\n}\n/**\n * Creates a cache object to store the results of getStyleChainMemoized function calls.\n * @type {object}\n */\nconst styleChainCache = {};\n\n/**\n * Flush the memoization cache for styleChain\n *\n */\nexport const clearStyleChainCache = () => {\n  for (const key in styleChainCache) {\n    if (styleChainCache.hasOwnProperty(key)) {\n      delete styleChainCache[key];\n    }\n  }\n};\n\n/**\n * Memoized version of getStyleChain function. Retrieves the style chain for a component by traversing its prototype chain.\n * @param {object} componentObj - The component object to get the style chain from.\n * @returns {{ style: (object | function) }[]} - An array of style objects containing either an object of styles or a function to return an object of styles.\n */\nexport const getStyleChainMemoized = componentObj => {\n  /**\n   * Create a cache key based on the stringified component object.\n   * @type {string}\n   */\n\n  const cacheKey = generateNameFromPrototypeChain(componentObj);\n\n  // Check if the result is already in the cache\n  if (styleChainCache[cacheKey]) {\n    return styleChainCache[cacheKey];\n  }\n\n  /**\n   * Compute the style chain using the getStyleChain function.\n   * @type {{ style: (object | function) }[]}\n   */\n  const styleChain = getStyleChain(componentObj);\n\n  // Cache the result for future use\n  styleChainCache[cacheKey] = styleChain;\n\n  // Return the style chain\n  return styleChain;\n};\n\n/**\n * Traverse up the prototype chain to create an array of all the styles that are present in the Components ancestors\n * @param {object} componentObj - The component object to get the style chain from.\n * @returns {{ style: (object | function) }[]} - An array of style objects containing either an object of styles or a function to return an object of styles.\n */\nexport const getStyleChain = componentObj => {\n  const styleMap = new Map(); // Use a Map to store styles as JSON strings\n  let proto;\n\n  do {\n    proto = !proto ? componentObj : Object.getPrototypeOf(proto);\n    if (proto?.constructor === Object) break; // Stop traversing the prototype chain if we reach the Object prototype\n    if (\n      proto &&\n      typeof proto === 'object' &&\n      proto.hasOwnProperty('constructor')\n    ) {\n      // ComponentConfig Level\n      const { style: componentConfigStyle } = getComponentConfig(proto);\n      if (Object.keys(componentConfigStyle || {}).length) {\n        if (!styleMap.has(componentConfigStyle)) {\n          styleMap.set(componentConfigStyle, { style: componentConfigStyle });\n        }\n      }\n\n      // Access the __themeStyle property from the current prototype's constructor\n      const themeStyle =\n        proto.constructor.hasOwnProperty('__themeStyle') &&\n        proto.constructor.__themeStyle;\n\n      if (Object.keys(themeStyle || {}).length) {\n        if (!styleMap.has(themeStyle)) {\n          styleMap.set(themeStyle, { style: { ...themeStyle } });\n        }\n      } else if (typeof themeStyle === 'function') {\n        // If the style is a function, add it to the styleMap\n        if (!styleMap.has(themeStyle)) {\n          styleMap.set(themeStyle, { style: themeStyle });\n        }\n      }\n\n      // Access the __mixinStyle property from the current prototype's constructor\n      const mixinStyle =\n        proto.constructor.hasOwnProperty('__mixinStyle') &&\n        proto.constructor.__mixinStyle;\n\n      if (Object.keys(mixinStyle || {}).length) {\n        if (!styleMap.has(mixinStyle)) {\n          styleMap.set(mixinStyle, { style: mixinStyle });\n        }\n      }\n    }\n  } while (proto);\n\n  // Convert the values of the Map (unique styles) back to an array\n  const uniqueStyles = Array.from(styleMap.values());\n\n  // Return an array of unique style objects with a \"style\" property\n  return uniqueStyles.map(style => style).reverse();\n};\n\n/**\n * Formats a style object by applying a series of formatter functions.\n *\n * @param {object} originalObj - The original style object to be formatted.\n * @param {array} [aliasStyles=[]] - An array of alias styles to be used during formatting.\n * @returns {object} The formatted style object after applying all formatter functions.\n */\nexport const formatStyleObj = (originalObj, aliasStyles = []) => {\n  if (typeof originalObj !== 'object' || originalObj === null) {\n    throw new Error('The originalObj parameter must be an object.');\n  }\n\n  const formatters = new Set();\n\n  // Adding a key-value pair to the 'formatters' Set.\n  // This pattern is used so more formatters can be easily added if required at a later time\n  formatters.add([replaceAliasValues, [aliasStyles]]);\n\n  // Generating an array from the 'formatters' Set\n  const formattersArray = Array.from(formatters);\n\n  // Using reduce to apply functions from 'formattersArray' to 'finalStyle'\n  // Each function takes 'obj' (initially 'finalStyle') as input and applies transformations\n  // The result of the previous function is passed as input to the next function\n  // The final transformed style is assigned to 'this._style'\n  return formattersArray.reduce(\n    (obj, [func, args]) => func(obj, ...args),\n    originalObj\n  );\n};\n\n/**\n * Replaces alias values in the provided style object with their corresponding aliases.\n * @param {object} value - The style object to process.\n * @param {Array<Object>} [aliasStyles=[]] - Optional array of alias styles to apply.\n * @returns {object} The style object with alias values replaced.\n */\nexport const replaceAliasValues = (value, aliasStyles = []) => {\n  if (typeof value !== 'object' || value === null) {\n    throw new Error('Value must be an object');\n  }\n\n  if (!Array.isArray(aliasStyles)) {\n    throw new Error('Alias styles must be an array');\n  }\n\n  let str = JSON.stringify(value);\n  const aliasProps = [\n    { prev: 'height', curr: 'h', skipWarn: true },\n    { prev: 'width', curr: 'w', skipWarn: true },\n    ...(aliasStyles || [])\n  ];\n\n  aliasProps.forEach(alias => {\n    if (\n      alias &&\n      typeof alias.prev === 'string' &&\n      typeof alias.curr === 'string'\n    ) {\n      !alias.skipWarn &&\n        str.search(`\"${alias.prev}\":`) >= 0 &&\n        log.warn(\n          `The style property \"${alias.prev}\" is deprecated and will be removed in a future release. Please use \"${alias.curr}\" instead.`\n        );\n      str = str.replace(\n        new RegExp(`\"${alias.prev}\":`, 'gi'),\n        `\"${alias.curr}\":`\n      );\n    }\n  });\n  return JSON.parse(str);\n};\n","import context from '../../globals/context/index';\n\nconst themeStyleCache = new Map();\n\ncontext.on('themeUpdate', () => {\n  themeStyleCache.clear();\n});\n\nexport default themeStyleCache;\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  generateComponentStyleSource,\n  getStyleChainMemoized,\n  clearStyleChainCache,\n  generateStyle,\n  getHash\n} from './utils';\nimport context from '../../globals/context/index';\nimport { clone } from '../../utils/index';\nimport cache from './cache';\nimport lng from '@lightningjs/core';\n\nexport default class StyleManager extends lng.EventEmitter {\n  /**\n   * Create a Style Manager instance.\n   * @param {object} options - The options object.\n   * @param {object} options.component - The LightningJS component instance.\n   */\n  constructor({ component = {} } = {}) {\n    super(...arguments);\n    this.init(component);\n  }\n\n  init(component) {\n    this.isActive = true;\n    this.component = component;\n    this.setupListeners();\n    this._style = {}; // This will be the source of truth for the style manager\n    // Initial update is not debounced\n    this.update();\n  }\n\n  setupListeners() {\n    // Bind the _onThemeUpdate method to the current instance of the StyleManager class.\n    this._boundThemeUpdate = this._onThemeUpdate.bind(this);\n    this._hasSubTheme = Boolean(this.component._targetSubTheme);\n    if (!this.component._targetSubTheme) {\n      context.on('themeUpdate', this._boundThemeUpdate);\n    } else {\n      context.on(\n        `themeUpdate${this.component._targetSubTheme}`,\n        this._boundThemeUpdate\n      );\n    }\n  }\n\n  clearListeners() {\n    // Bind the _onThemeUpdate method to the current instance of the StyleManager class.\n    if (!this._boundThemeUpdate) return;\n    if (!this.component._targetSubTheme) {\n      context.off('themeUpdate', this._boundThemeUpdate);\n    } else {\n      context.off(\n        `themeUpdate${this.component._targetSubTheme}`,\n        this._boundThemeUpdate\n      );\n    }\n  }\n\n  /**\n   * Destroy the Style Manager instance and remove the themeUpdate event listener.\n   */\n  destroy() {\n    this.isActive = false;\n    this._cleanupCache();\n    // Remove event listeners and subscriptions\n    this.clearListeners();\n    // Set references to null\n    this._styleCache = null;\n    this._boundThemeUpdate = null;\n    this.component = null;\n  }\n\n  /**\n   * Handler for the themeUpdate event. Clears the cache and updates the component's style.\n   * @private\n   */\n  _onThemeUpdate() {\n    clearStyleChainCache();\n    this.clearSourceCache();\n    this.clearStyleCache();\n    this.update();\n  }\n\n  /**\n   * Clears the style chain cache.\n   */\n  clearStyleChainCache() {\n    clearStyleChainCache();\n  }\n\n  /**\n   * Clears the source cache.\n   */\n  clearSourceCache() {\n    if (!this.component) return;\n    const sourceKey = this._generateCacheKey('styleSource');\n    this._removeCache(sourceKey);\n  }\n\n  /**\n   * Clears the style cache.\n   */\n  clearStyleCache() {\n    if (!this.component) return;\n    const { tone, mode } = this.component;\n    const styleKey = this._generateCacheKey(`style_${mode}_${tone}`);\n    cache.delete(styleKey);\n  }\n\n  /**\n   * Generates a cache key.\n   * @param {string} name - The name of the cache.\n   * @returns {string} - The generated cache key.\n   */\n  _generateCacheKey(name) {\n    const cacheKey = [\n      name,\n      this.component._targetSubTheme,\n      this.component.constructor.__componentName,\n      this._customStyleHash\n    ]\n      .filter(Boolean)\n      .join('_');\n    return cacheKey;\n  }\n\n  /**\n   * Adds a cache.\n   * @param {string} name - The name of the cache.\n   * @param {object} payload - The payload of the cache.\n   */\n  _addCache(name, payload) {\n    const key = this._generateCacheKey(name);\n    const existing = cache.get(key);\n    cache.set(key, {\n      ids: [...new Set([...(existing?.ids || []), this.component.__id])], // Add current id and remove duplicates\n      payload\n    });\n  }\n\n  /**\n   * Called when component is destroyed\n   */\n  _cleanupCache() {\n    if (!this.component) return;\n    cache.forEach(({ ids, payload }, name) => {\n      const removeIndex = ids && ids.length && ids.indexOf(this.component.__id);\n      if (removeIndex > -1 && ids.length > 1) {\n        cache.set(name, {\n          ids: ids.slice(0, removeIndex).concat(ids.slice(removeIndex + 1)),\n          payload\n        });\n      } else if (removeIndex > -1) {\n        cache.delete(name);\n      }\n    });\n  }\n\n  /**\n   * Removes a cache.\n   * @param {string} name - The name of the cache.\n   */\n  _removeCache(name) {\n    cache.delete(name);\n  }\n\n  /**\n   * Gets a cache.\n   * @param {string} name - The name of the cache.\n   * @returns {object|boolean} - The cache or false if the component has inline styles.\n   */\n  _getCache(name) {\n    const key = this._generateCacheKey(name);\n    return cache.get(key);\n  }\n\n  /**\n   * Updates the component's style based on changes in tone, mode, theme, and `_componentLevelStyle`.\n   * Clears the style cache if tone or mode have changed, and clears the source cache if `_componentLevelStyle` has changed.\n   * Generates the component's style source and style objects, saves them to the cache, and emits a `styleUpdate` event with the updated style.\n   * @returns {Promise<void>}\n   */\n  update() {\n    if (!this.component) return;\n\n    const { mode, tone } = this.component;\n\n    try {\n      // Attempt to fetch style source from cache\n      let styleSource = this._getCache('styleSource')?.payload;\n\n      if (!styleSource) {\n        // Style source does not exist so it will need to be generated. We attempt to run this function only when necessary for optimal performance\n        styleSource = generateComponentStyleSource({\n          alias: this.component.constructor.aliasStyles,\n          inlineStyle: this.component._componentLevelStyle,\n          styleChain: getStyleChainMemoized(this.component),\n          theme: this.component.theme\n        });\n\n        this._addCache('styleSource', styleSource);\n      }\n\n      // Attempt to fetch style from cache\n      let style = this._getCache(`style_${mode}_${tone}`)?.payload;\n\n      if (!style) {\n        // Style does not exist so will also need to be generated\n        style = generateStyle(this.component, styleSource);\n        this._addCache(`style_${mode}_${tone}`, style);\n      }\n\n      this._style = style;\n      this.emit('styleUpdate', this.style);\n    } catch (error) {\n      context.error('styleManager: ', error.message);\n    }\n  }\n\n  /**\n   * Accessors\n   */\n  set style(v) {\n    context.warn('styleManager: Cannot mutate style directly');\n  }\n\n  get style() {\n    return this._style;\n  }\n\n  set props(v) {\n    context.warn('styleManager: Cannot mutate props directly');\n  }\n\n  get props() {\n    return Object.keys(this.component._componentConfig).reduce((acc, key) => {\n      if (!['base', 'tone', 'mode', 'style', 'styleConfig'].includes(key)) {\n        acc[key] = this.component._componentConfig[key];\n      }\n\n      return acc;\n    }, {});\n  }\n\n  /**\n   * Simple check to see if this component can leverage caching. Components using .style cannot use the cache at this time\n   */\n  get _customStyleHash() {\n    const hasCustomStyle =\n      Boolean(\n        Object.keys(this.component.constructor.__mixinStyle || {}).length\n      ) ||\n      Boolean(Object.keys(this.component._componentLevelStyle || {}).length);\n\n    if (hasCustomStyle) {\n      return getHash(\n        clone(\n          this.component.constructor.__mixinStyle || {},\n          this.component._componentLevelStyle || {}\n        )\n      );\n    }\n\n    return undefined;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport StyleManager from './StyleManager';\nimport { updateManager } from '../../globals/global-update-manager/GlobalUpdateManager';\nimport context from '../../globals/context';\nimport { getComponentConfig, getSubTheme } from './utils';\nimport { capitalizeFirstLetter } from '../../utils';\n\n/**\n * Merges two objects based on the following rules:\n * 1. If a key exists in both objects, use the value from the second object.\n * 2. If a key exists in the first object but not in the second, set the value to undefined.\n * 3. If a key exists in the second object but not in the first, include it in the result.\n * 4. Maintain the structure of the first object and augment it with extra keys from the second object.\n *\n * @param {Object|Array} firstObj - The first object, providing the structure to match.\n * @param {Object|Array} secondObj - The second object, whose values take precedence.\n * @returns {Object|Array} A new object with a merged structure and values.\n */\nfunction mergeObjectsWithSecondDominant(firstObj, secondObj) {\n  if (firstObj !== null && typeof firstObj === 'object') {\n    if (Array.isArray(firstObj)) {\n      return firstObj.map((item, index) =>\n        mergeObjectsWithSecondDominant(\n          item,\n          Array.isArray(secondObj) ? secondObj[index] : undefined\n        )\n      );\n    } else {\n      const result = {};\n      // Combine keys from both objects to ensure all keys are covered\n      const allKeys = new Set([\n        ...Object.keys(firstObj),\n        ...Object.keys(secondObj)\n      ]);\n      allKeys.forEach(key => {\n        // Recurse for nested objects or arrays\n        if (typeof firstObj[key] === 'object' && firstObj[key] !== null) {\n          result[key] = mergeObjectsWithSecondDominant(\n            firstObj[key],\n            secondObj[key] || {}\n          );\n        } else if (\n          typeof secondObj[key] === 'object' &&\n          secondObj[key] !== null\n        ) {\n          result[key] = mergeObjectsWithSecondDominant(\n            firstObj[key] || {},\n            secondObj[key]\n          );\n        } else {\n          // Use value from the second object if available, else set to undefined\n          result[key] = secondObj.hasOwnProperty(key)\n            ? secondObj[key]\n            : undefined;\n        }\n      });\n      return result;\n    }\n  } else {\n    // Return non-object values directly\n    return firstObj;\n  }\n}\n\n/**\n * A higher-order function that returns a class with theme styles.\n * @param {function} Base - The base class to extend.\n * @param {object} mixinStyle - The mixin style to add to the component.\n * @returns {function} A class that extends the base class with theme styles.\n */\nexport default function withThemeStyles(Base, mixinStyle = {}) {\n  return class extends Base {\n    _construct() {\n      if (this._withThemeStylesSetupComplete) {\n        // Make sure this runs ony once if being used on a component that extends another component that is utilizing withThemeStyles\n        super._construct();\n        return;\n      }\n\n      this._hSetByUser = false;\n      this._wSetByUser = false;\n\n      this._styleManager = new StyleManager({ component: this });\n      this._style = this._styleManager.style; // Set the style for the first time. After this is will be updated by events\n      this._updatePropDefaults();\n      this._styleManager.on('styleUpdate', () => {\n        this._style = this._styleManager.style;\n        this._updatePropDefaults();\n        this.queueThemeUpdate();\n      });\n      this._withThemeStylesSetupComplete = true;\n      super._construct(); // Important that this is called at the bottom to ensure that withThemeStyles is only initialized once per component to prevent potential memory leaks\n    }\n\n    /**\n     * Checks for subThemes on _setup lifecycle event to allow the component to traverse the tree to find child theme properties.\n     * @private\n     * @returns {void}\n     */\n    _setup() {\n      super._setup && super._setup();\n      this._targetSubTheme = getSubTheme(this);\n      if (this._targetSubTheme) {\n        this._styleManager.clearListeners();\n        this._styleManager.setupListeners();\n        this._styleManager.clearStyleChainCache();\n        this._styleManager.clearStyleCache();\n        this._styleManager.clearSourceCache();\n        this._styleManager.update();\n      }\n    }\n\n    /**\n     * Updates the default properties of the component based on the current theme.\n     * It compares the previous component configuration properties with the current style manager properties,\n     * and updates the component's properties accordingly. If the properties are unchanged, no action is taken.\n     * This method is crucial for ensuring the component's properties are synchronized with the theme.\n     */\n    _updatePropDefaults() {\n      // If the current properties are the same as the previous configuration, no update is needed\n\n      if (\n        !Object.keys(this._styleManager.props).length ||\n        JSON.stringify(this._styleManager.props) ===\n          JSON.stringify(this._prevComponentConfigProps)\n      ) {\n        return;\n      }\n\n      // Compare current properties with previous configuration and get the payload\n      const payload = this._prevComponentConfigProps\n        ? mergeObjectsWithSecondDominant(\n            this._prevComponentConfigProps || {},\n            this._styleManager.props || {}\n          )\n        : this._styleManager.props || {};\n\n      // Store a deep copy of the current properties for future comparison\n      this._prevComponentConfigProps =\n        this._styleManager.props &&\n        JSON.parse(JSON.stringify(this._styleManager.props));\n\n      // This will be used by withUpdates to set defaults\n      this.__componentConfigProps = payload;\n    }\n\n    /**\n     * On component attach, ensures the StyleManager has been reinitialized if it was previously destroyed in detach.\n     * @private\n     * @returns {void}\n     */\n    _attach() {\n      super._attach();\n      if (!this._styleManager.isActive) {\n        this._styleManager.init(this);\n      }\n    }\n\n    /**\n     * Detaches the component and destroys the style manager.\n     * @private\n     * @returns {void}\n     */\n    _detach() {\n      super._detach();\n      this._styleManager.destroy();\n    }\n\n    /**\n     * Updates the mode to 'unfocused' when the component is unfocused.\n     * @private\n     * @internal\n     * @returns {void}\n     */\n    _unfocus() {\n      if (this._isFocusedMode) this.mode = 'unfocused';\n      super._unfocus();\n    }\n\n    /**\n     * Updates the mode to 'focused' when the component is focused.\n     * @private\n     * @returns {void}\n     */\n    _focus() {\n      if (!this._isDisabledMode) this.mode = 'focused';\n      super._focus();\n    }\n\n    /**\n     * Checks if dimensions need updating, and updates if necessary.\n     * Fixes mount issues if height is controlled by a component's style alone.\n     * Setters for w/h will set the wSetByUser and hSetByUser flag to block this functionality and allow customization.\n     * @private\n     * @returns {void}\n     */\n    _checkDimensionUpdates() {\n      let dimensionUpdateRequired = false;\n\n      if (!this._wSetByUser && this.style.w && this._w !== this.style.w) {\n        this._w = this.style.w;\n        dimensionUpdateRequired = true;\n      }\n\n      if (!this._hSetByUser && this.style.h && this._h !== this.style.h) {\n        this._h = this.style.h;\n        dimensionUpdateRequired = true;\n      }\n\n      if (dimensionUpdateRequired) {\n        this._updateDimensions();\n      }\n    }\n\n    /**\n     * Called by the update manager to trigger the _update lifecycle.\n     * If `queueRequestUpdate` is undefined, then it's OK to call `_update()` directly because\n     * the component does not have the `withUpdates` mixin, and hence `requestUpdate()` will not be defined either.\n     * This check allows this mixin to work without `withUpdates`.\n     * @private\n     * @returns {void}\n     */\n    _updateThemeComponent() {\n      if (!this.style) return;\n      if (!this._isAttached()) return;\n      this._checkDimensionUpdates();\n      this.queueRequestUpdate\n        ? this.queueRequestUpdate()\n        : this._update && this._update();\n      this._updateItemLayout && this._updateItemLayout();\n    }\n\n    /**\n     * Queues component for update by the Global Update Manager.\n     * @returns {void}\n     */\n    queueThemeUpdate() {\n      updateManager.addUpdateTheme(this);\n    }\n\n    static get name() {\n      return Base.name;\n    }\n\n    static get __componentName() {\n      if (!super.__componentName) {\n        throw new Error(\n          `A valid static __componentName property is required for theming to work properly. Please add this to the ${this.constructor.name} class.`\n        );\n      }\n      return super.__componentName;\n    }\n\n    static get __mixinStyle() {\n      return mixinStyle;\n    }\n\n    /**\n     * Reference to the global theme\n     * @return {object}\n     */\n    get theme() {\n      const subTheme =\n        this._targetSubTheme && context.getSubTheme(this._targetSubTheme);\n      return subTheme || context.theme;\n    }\n\n    /**\n     * Set component level styles\n     * @param {object} v - The styles to set, mode, and tone are not allowed\n     */\n    set style(v) {\n      if (Object.prototype.toString.call(v) !== '[object Object]') {\n        context.error('style must be an object');\n        return;\n      }\n      this._componentLevelStyle = v;\n      this._styleManager.clearStyleCache();\n      this._styleManager.update();\n    }\n\n    /**\n     * Get component level styles\n     * @return {object}\n     */\n    get style() {\n      return this._style;\n    }\n\n    /**\n     * Get component level styles\n     * @return {object}\n     */\n    get _componentStyle() {\n      /** No longer supported */\n      context.info(\n        '_componentStyle will soon be deprecated. Please use Component.style'\n      );\n      return this._style;\n    }\n\n    /**\n     * Set component styleConfig\n     * @param {object} v - Special configuration rules to override styles\n     */\n    set styleConfig(v) {\n      context.info(\n        'style config is deprecated. Please use style = { base: {}, tone: {}, mode: {} }'\n      );\n      this._styleConfig = v;\n      this._styleManager.update();\n    }\n\n    /**\n     * Get component styleConfig\n     * @return {object}\n     */\n    get styleConfig() {\n      return this._styleConfig;\n    }\n\n    /**\n     * Theme configuration for overrides and defaults\n     * @return {object}\n     */\n    get _componentConfig() {\n      return getComponentConfig(this);\n    }\n\n    /**\n     * Get the mode property\n     * @return {string}\n     */\n    get mode() {\n      return this._mode || this._componentConfig?.mode || 'unfocused';\n    }\n\n    /**\n     * Set the mode property\n     * @param {string} v - The mode value to set\n     */\n    set mode(v) {\n      if (typeof v !== 'string' || this._mode === v) return;\n      this._mode = v;\n      const event = this[`on${capitalizeFirstLetter(v)}`];\n      if (event && typeof event === 'function') event.call(this);\n      this._styleManager.update();\n    }\n\n    /**\n     * Get the tone property\n     * @return {string}\n     */\n    get tone() {\n      return this._tone || this._componentConfig.tone || 'neutral';\n    }\n\n    /**\n     * Set the tone property\n     * @param {string} value - The tone value to set\n     */\n    set tone(v) {\n      if (typeof v !== 'string' || this._tone === v) return;\n      this._tone = v;\n      this._styleManager.update();\n    }\n\n    /**\n     * Allow for w to be overwritten by user if also in component's style file\n     * @return {number}\n     */\n    get w() {\n      return (this._wSetByUser && this._w) || this.style?.w || 0;\n    }\n\n    /**\n     * Set the w property\n     * @param {number} v - The w value to set\n     */\n    set w(v) {\n      if (this._w === v) return;\n      super.w = v;\n      this._wSetByUser = true;\n      this._updateThemeComponent();\n    }\n\n    /**\n     * Get the h property\n     * @return {number}\n     */\n    get h() {\n      return (this._hSetByUser && this._h) || this.style?.h || this._h || 0;\n    }\n\n    /**\n     * Set the h property\n     * @param {number} v - The h value to set\n     */\n    set h(v) {\n      if (this._h === v) return;\n      super.h = v;\n      this._hSetByUser = true;\n      this._updateThemeComponent();\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context/index';\n\nconst SUFFIX = '__original';\n\nexport default function withExtensions(Base) {\n  if (Base.prototype.constructor._withExtensionsApplied) {\n    return Base;\n  }\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    static get __componentName() {\n      if (!super.__componentName) {\n        throw new Error(\n          `A valid static __componentName property is required for theming to work properly. Please add this to the ${this.constructor.name} class.`\n        );\n      }\n      return super.__componentName;\n    }\n\n    static get _withExtensionsApplied() {\n      // Extensions should only be applied once per class. This prevents it running multiple times. Ex. Surface -> Tile\n      return true;\n    }\n\n    /**\n     * Climb the prototype chain to establish what component's extension rules this component should also inherit\n     * @returns {set} // set of strings\n     */\n    get _prototypeChain() {\n      if (this.__prototypeChain) return this.__prototypeChain;\n      const prototypeChain = new Set();\n      let proto = this;\n      do {\n        proto = Object.getPrototypeOf(proto);\n        if (null !== proto && typeof proto === 'object') {\n          try {\n            if (proto.constructor.__componentName)\n              prototypeChain.add(proto.constructor.__componentName);\n          } catch (error) {\n            // Catch error when __componentName is not set in Base component\n          }\n        }\n      } while (proto);\n      this.__prototypeChain = prototypeChain;\n      return prototypeChain;\n    }\n\n    /**\n     * Get all valid extensions from the current theme\n     * @returns {object[]} // Array of objects\n     */\n    get _extensions() {\n      const extensions = context && context.theme && context.theme.extensions;\n      if (\n        !extensions ||\n        !Array.isArray(extensions) ||\n        (Array.isArray(extensions) && !extensions.length)\n      )\n        return [];\n      return (\n        extensions\n          .filter(\n            ({ targetComponent, extension }) =>\n              (typeof targetComponent === 'string' ||\n                Array.isArray(targetComponent)) &&\n              typeof extension === 'function'\n          )\n          .slice()\n          .reverse() || [] // Array is reversed to ensure extensions are executed in the proper order top -> bottom\n      );\n    }\n\n    /**\n     * Get all extensions to apply to this component\n     * @return {class[]} // Array of classes\n     */\n    get _componentExtensions() {\n      return this._extensions\n        .filter(({ targetComponent }) => {\n          // check to see if extension should be applied to this component\n          if (typeof targetComponent === 'string') {\n            return (\n              targetComponent === this.constructor.__componentName ||\n              this._prototypeChain.has(targetComponent)\n            );\n          } else if (Array.isArray(targetComponent)) {\n            return targetComponent.find(pattern => {\n              if (pattern.startsWith('/') && pattern.endsWith('/')) {\n                const ComponentRegExp = new RegExp(pattern.slice(1, -1));\n                return Array.from(this._prototypeChain).some(name =>\n                  ComponentRegExp.test(name)\n                );\n              } else {\n                return this._prototypeChain.has(pattern);\n              }\n            });\n          }\n          return false;\n        })\n        .reduce((acc, { extension }) => {\n          acc.push(extension);\n          return acc;\n        }, []);\n    }\n\n    /**\n     * Check if theme extension mixins have already been applied\n     * @return {boolean}\n     */\n    get _extensionApplied() {\n      return (\n        this._currentComponentExtensionLength === this._appliedExtensionLength\n      );\n    }\n\n    _construct() {\n      this._appliedExtensionLength = 0; // After the extensions are applied we store the length of all to determine later on if they have been applied before\n      this._extendedList = {};\n      this._extensionInstance = {}; // This will hold the extension instance once created\n      this._setupExtensionBound = this._setupExtension.bind(this);\n      context.on('themeUpdate', this._setupExtensionBound);\n      this._currentComponentExtensionLength =\n        this._calculateComponentExtensionLength();\n      this._createExtension();\n      super._construct();\n    }\n\n    _detach() {\n      super._detach();\n      context.off('themeUpdate', this._setupExtensionBound);\n    }\n\n    _setupExtension() {\n      this._currentComponentExtensionLength =\n        this._calculateComponentExtensionLength();\n      this._createExtension.call(this);\n    }\n\n    _resetComponent() {\n      this._extensionInstance._extensionCleanup &&\n        this._extensionInstance._extensionCleanup.call(this);\n\n      (Object.keys(this._extendedList) || []).forEach(prop => {\n        delete this[prop];\n        delete this[prop + SUFFIX];\n      });\n\n      this._extensionInstance = {};\n      this._extendedList = {};\n    }\n\n    _calculateComponentExtensionLength() {\n      const extensionLength = this._componentExtensions.reduce(\n        (acc, extensionMixin) => {\n          acc += extensionMixin.toString().length;\n          return acc;\n        },\n        0\n      );\n      return extensionLength;\n    }\n\n    _createExtension() {\n      if (this._extensionApplied) return;\n      this._resetComponent();\n      const ExtendedClass = this._createExtensionClass();\n      const instance = new ExtendedClass();\n      this._extendedList = this._createExtensionAliases(instance);\n      this._extensionInstance = instance;\n      this._setComponentAliases(this._extendedList);\n    }\n\n    /**\n     * Create the extension class\n     * @return {class}\n     */\n    _createExtensionClass() {\n      /**\n       *\n       * This class will sit at the bottom of the prototype stack and redirect all calls to the original to prevent an infinite loop\n       *\n       */\n      function ExtensionBase() {}\n\n      /** Create a new class the represents the extensions */\n      const ExtendedClass = this._componentExtensions.reduce(\n        (acc, extension) => {\n          // Get the length of the extension and store the value. This will be used to determine if the mixin has been changed and needs to be re-applied\n          return extension(acc);\n        },\n        ExtensionBase\n      );\n\n      // Store the length of the extension to be applied\n      this._appliedExtensionLength = this._calculateComponentExtensionLength();\n\n      return ExtendedClass;\n    }\n\n    _createExtensionAliases(obj) {\n      // Find the prototype to be replaced\n      let baseProto = obj;\n      for (let i = 0; i < this._componentExtensions.length + 1; i++) {\n        baseProto = Object.getPrototypeOf(baseProto);\n      }\n\n      /**\n       * We will create alias for all the methods, getters, setters that will be overwritten by the extension layer\n       * Create a list of properties to alias\n       */\n\n      const extended = {};\n\n      const extensionOverrides = this._componentExtensions.reduce(\n        (acc, extension) => {\n          const extensionClass = new extension(class FakeClass {});\n          const instance = new extensionClass();\n          // Get the descriptors\n          const originalComponentDescriptors = Object.getOwnPropertyDescriptors(\n            Object.getPrototypeOf(instance)\n          );\n          Object.keys(originalComponentDescriptors).forEach(prop => {\n            if (['constructor'].includes(prop)) return;\n            if (\n              originalComponentDescriptors[prop].get ||\n              originalComponentDescriptors[prop].set\n            ) {\n              extended[prop] = { type: 'accessor' };\n              acc[prop] = {\n                get: function () {\n                  return this[prop + SUFFIX];\n                },\n                set: function (v) {\n                  this[prop + SUFFIX] = v;\n                }\n              };\n              return;\n            }\n            extended[prop] = { type: 'method' };\n            acc[prop] = {\n              value: function () {\n                this[prop + SUFFIX] && this[prop + SUFFIX]();\n              }\n            };\n          });\n          return acc;\n        },\n        {}\n      );\n\n      Object.defineProperties(baseProto, extensionOverrides);\n      Object.setPrototypeOf(baseProto, this); // Set the bottom level prototype === the component\n\n      return extended;\n    }\n\n    _setComponentAliases(aliasObj) {\n      Object.keys(aliasObj).forEach(prop => {\n        // Create an alias for the existing component property to save the original value\n        this[prop + SUFFIX] = this[prop];\n        if (aliasObj[prop].type === 'method') {\n          this[prop] = this._extensionInstance[prop];\n        } else if (aliasObj[prop].type === 'accessor') {\n          Object.defineProperty(this, prop, {\n            configurable: true, // Allow accessors to be updated on theme change\n            get() {\n              return this._extensionInstance[prop];\n            },\n            set(v) {\n              this._extensionInstance[prop] = v;\n            }\n          });\n        }\n      });\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport context from '../../globals/context/index';\nimport withUpdates from '../../mixins/withUpdates';\nimport withTags from '../../mixins/withTags';\nimport withHandleKey from '../../mixins/withHandleKey';\nimport withLayout from '../../mixins/withLayout';\nimport withThemeStyles from '../../mixins/withThemeStyles';\nimport withExtensions from '../../mixins/withExtensions';\nimport { isComponentOnScreen } from '../../utils';\n\nclass Base extends lng.Component {\n  static get __componentName() {\n    return 'Base';\n  }\n\n  _construct() {\n    this.constructor.__componentName; // Check that __componentName is set\n    this.skipPlinko = false;\n    this.centerInParent = false;\n    if (!this.loaded) this.loaded = Promise.resolve(); // By default this is a resolved promise. Components can use _resetLoadedPromise if they require the functionality\n  }\n\n  _init() {\n    this.queueRequestUpdate();\n  }\n\n  _resetLoadedPromise() {\n    this.loaded = new Promise((resolve, reject) => {\n      this._resolveLoadedPromise = resolve;\n      this._rejectLoadedPromise = reject;\n    });\n  }\n\n  _update() {}\n\n  _focus() {\n    this._updateShouldSmooth();\n    this.queueRequestUpdate();\n  }\n\n  _unfocus() {\n    this.queueRequestUpdate();\n  }\n\n  _updateShouldSmooth() {\n    if (this.shouldSmooth === undefined) this.shouldSmooth = true;\n  }\n\n  /**\n   * This method accepts a target component, patch object, and optional smooth object.\n   * If the component is visible, it will smooth in the smooth object, or fall back to\n   * the patch object, if not it will apply the patch.\n   *\n   * @param {component reference} ref tag ref of target component\n   * @param {object} patch object of properties to patch to target\n   * @param {object} smooth object of properties to smooth to target\n   */\n  applySmooth(ref, patch, smooth) {\n    if (this.shouldSmooth) {\n      ref.smooth = smooth || patch;\n    } else {\n      ref.patch(patch);\n    }\n  }\n\n  // keep announce methods out of the update lifecycle (do not put in properties array)\n  // announce methods do not need to re-render component\n  get announce() {\n    return this._announce;\n  }\n\n  set announce(announce) {\n    this._announce = announce;\n  }\n\n  get announceContext() {\n    return this._announceContext;\n  }\n\n  set announceContext(announce) {\n    this._announceContext = announce;\n  }\n\n  get shouldSmooth() {\n    return this._shouldSmooth;\n  }\n\n  set shouldSmooth(shouldSmooth) {\n    this._shouldSmooth = shouldSmooth;\n  }\n\n  get _isDisabledMode() {\n    return this.mode === 'disabled';\n  }\n\n  get _isUnfocusedMode() {\n    return this.mode === 'unfocused';\n  }\n\n  get _isFocusedMode() {\n    return this.mode === 'focused';\n  }\n\n  isFullyOnScreen(offsets) {\n    return isComponentOnScreen(this, offsets);\n  }\n\n  getFocusScale() {\n    return context.theme.layout.focusScale;\n  }\n\n  getUnfocusScale() {\n    return 1;\n  }\n}\n\nfunction withMixins(baseComponent) {\n  return withExtensions(\n    withLayout(\n      withThemeStyles(withUpdates(withTags(withHandleKey(baseComponent))))\n    )\n  );\n}\n\nexport default withMixins(Base);\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  gradientTop: theme.color.fillTransparent,\n  radius: theme.radius.none\n});\n\nexport const tone = theme => ({\n  neutral: { gradientColor: theme.color.material },\n  inverse: { gradientColor: theme.color.fillNeutral },\n  brand: { gradientColor: theme.color.fillBrand }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Gradient.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Gradient extends Base {\n  static get __componentName() {\n    return 'Gradient';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _update() {\n    this.patch({\n      rect: true,\n      rtt: true,\n      colorTop: this.style.gradientTop,\n      colorBottom: this.style.gradientColor,\n      texture: lng.Tools.getRoundRect(\n        this.w,\n        this.h,\n        getMaxRoundRadius(this.style.radius, this.w, this.h)\n      )\n    });\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  animationBlurEntrance: theme.animation.utilityEntrance,\n  animationBlurExit: theme.animation.utilityExit,\n  animationComponentEntrance: theme.animation.utilityEntrance,\n  animationGradientEntrance: theme.animation.utilityEntrance,\n  animationGradientExit: theme.animation.utilityExit,\n  animationImageScaleEntrance: theme.animation.standardEntrance,\n  animationImageScaleExit: theme.animation.standardEntrance,\n  blur: 4,\n  centerImageRadius: theme.radius.md,\n  fallbackSrc: undefined,\n  fillColor: theme.color.overlay,\n  gradientColor: theme.color.material,\n  imageScale: 1,\n  imageScalePivotX: 0.5,\n  imageScalePivotY: 0.5,\n  padding: theme.spacer.md,\n  radius: 0,\n  zIndexSet: {\n    image: 1,\n    blur: 2,\n    centerImage: 3,\n    fill: 4,\n    gradient: 5,\n    foreground: 6\n  }\n});\n","import lng from '@lightningjs/core';\n\n/**\n * Represents an image texture that supports loading blob images and SVG strings without using web workers.\n */\n\n/**\n * Checks the file type based on the given string.\n * @param {string} str - The input string to check.\n * @returns {string} The file type.\n */\nfunction checkFileType(str) {\n  if (str.startsWith('<svg')) {\n    return 'SVG';\n  } else if (str.startsWith('blob:')) {\n    return 'Blob';\n  } else if (/\\.(jpeg|jpg|gif|png|svg)$/i.test(str)) {\n    return 'Image';\n  } else {\n    return 'Unknown';\n  }\n}\n\n/**\n * Creates an SVG canvas.\n * @param {function} cb - The callback function.\n * @param {object} stage - The stage object.\n * @param {string} url - The URL of the SVG.\n * @param {number} w - The width of the canvas.\n * @param {number} h - The height of the canvas.\n */\nfunction createSvg(cb, stage, url, w, h) {\n  const canvas = stage.platform.getDrawingCanvas();\n  const ctx = canvas.getContext('2d');\n  ctx.imageSmoothingEnabled = true;\n\n  const img = new Image();\n  img.onload = () => {\n    canvas.width = w;\n    canvas.height = h;\n    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    cb(null, { source: canvas, w, h });\n  };\n  img.onerror = err => {\n    cb(err);\n  };\n\n  // On the PS4 platform setting the `crossOrigin` attribute on images\n  // can cause CORS failures.\n  if (!lng.Utils.isPS4) {\n    img.crossOrigin = 'Anonymous';\n  }\n\n  img.src = url;\n}\n\n/**\n * Loads an image from the given source.\n * @param {object} params - The parameters object.\n * @param {string} params.src - The source URL of the image.\n * @param {function} cb - The callback function.\n * @returns {function} A cancel callback function.\n */\nfunction imageLoader({ src }, cb) {\n  const image = new Image();\n\n  // On the PS4 platform setting the `crossOrigin` attribute on\n  // images can cause CORS failures.\n  if (!(src.substr(0, 5) == 'data:') && !lng.Utils.isPS4) {\n    image.crossOrigin = 'Anonymous';\n  }\n  image.onerror = function () {\n    // Ignore error message when cancelled.\n    if (image.src) {\n      return cb('Image load error');\n    }\n  };\n  image.onload = function () {\n    cb(null, {\n      source: image,\n      renderInfo: { src: src, compressed: false },\n      hasAlpha: true\n    });\n  };\n\n  image.src = src;\n\n  return function () {\n    // Cancel Callback\n    image.onerror = null;\n    image.onload = null;\n    image.removeAttribute('src');\n  };\n}\n\n/**\n * Represents an image texture.\n */\nexport default class CustomImageTexture extends lng.Texture {\n  /**\n   * Creates a new ImageTexture instance.\n   * @param {object} stage - The stage object.\n   */\n  constructor(stage) {\n    super(stage);\n\n    this._src = undefined;\n    this._hasAlpha = false;\n  }\n\n  /**\n   * Gets the source URL of the image.\n   * @returns {string} The source URL.\n   */\n  get src() {\n    return this._src;\n  }\n\n  /**\n   * Sets the source URL of the image.\n   * @param {string} v - The source URL.\n   */\n  set src(v) {\n    if (this._src !== v) {\n      this._src = v;\n      this._changed();\n    }\n  }\n\n  /**\n   * Gets the flag indicating whether the image has an alpha channel.\n   * @returns {boolean} The flag value.\n   */\n  get hasAlpha() {\n    return this._hasAlpha;\n  }\n\n  /**\n   * Sets the flag indicating whether the image has an alpha channel.\n   * @param {boolean} v - The flag value.\n   */\n  set hasAlpha(v) {\n    if (this._hasAlpha !== v) {\n      this._hasAlpha = v;\n      this._changed();\n    }\n  }\n\n  /**\n   * Gets the width of the image.\n   * @returns {number} The width value.\n   */\n  get w() {\n    return this._w;\n  }\n\n  /**\n   * Sets the width of the image.\n   * @param {number} l - The width value.\n   */\n  set w(l) {\n    this._w = l;\n    this._changed();\n  }\n\n  /**\n   * Gets the height of the image.\n   * @returns {number} The height value.\n   */\n  get h() {\n    return this._h;\n  }\n\n  /**\n   * Sets the height of the image.\n   * @param {number} l - The height value.\n   */\n  set h(l) {\n    this._h = l;\n    this._changed();\n  }\n\n  /**\n   * Checks if the image texture is valid.\n   * @returns {boolean} True if valid, otherwise false.\n   */\n  _getIsValid() {\n    return !!this._src;\n  }\n\n  /**\n   * Gets the lookup ID of the image texture.\n   * @returns {string} The lookup ID.\n   */\n  _getLookupId() {\n    return this._src;\n  }\n\n  /**\n   * Gets the source loader function for the image texture.\n   * @returns {function} The source loader function.\n   */\n  _getSourceLoader() {\n    const w = this._w;\n    const h = this._h;\n    let src = this._src;\n    const hasAlpha = this._hasAlpha;\n    if (this.stage.getOption('srcBasePath')) {\n      const fc = src.charCodeAt(0);\n      if (\n        src.indexOf('//') === -1 &&\n        ((fc >= 65 && fc <= 90) || (fc >= 97 && fc <= 122) || fc == 46)\n      ) {\n        // Alphabetical or dot: prepend base path.\n        src = this.stage.getOption('srcBasePath') + src;\n      }\n    }\n\n    return cb => {\n      const fileType = checkFileType(src);\n      switch (fileType) {\n        case 'SVG':\n          return createSvg(\n            cb,\n            this.stage,\n            `data:image/svg+xml,${encodeURIComponent(src)}`,\n            w,\n            h\n          );\n\n        case 'Blob':\n          return imageLoader({ src }, cb);\n        default:\n          return this.stage.platform.loadSrcTexture(\n            { src: src, hasAlpha: hasAlpha },\n            cb\n          );\n      }\n    };\n  }\n\n  /**\n   * Gets the non-default properties of the image texture.\n   * @returns {object} The non-default properties.\n   */\n  getNonDefaults() {\n    const obj = super.getNonDefaults();\n    if (this._src) {\n      obj.src = this._src;\n    }\n    return obj;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport { getMaxRoundRadius, getValidColor, reduceFraction } from '../../utils';\nimport Base from '../Base';\nimport Gradient from '../Gradient';\nimport * as styles from './Artwork.styles';\nimport context from '../../globals/context/index';\nimport CustomImageTexture from '../../textures/CustomImageTexture';\n\nexport default class Artwork extends Base {\n  static get __componentName() {\n    return 'Artwork';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [\n      'blur',\n      'fallbackSrc',\n      'foregroundHeight',\n      'foregroundSrc',\n      'foregroundWidth',\n      'gradient',\n      'format',\n      'src',\n      'fill',\n      'shouldScale',\n      'srcCallback',\n      'srcCallbackAspectRatios'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'Blur',\n      'CenterImage',\n      'FillColor',\n      'ForegroundImage',\n      'Gradient',\n      'Image',\n      'Item'\n    ];\n  }\n\n  static get aliasProperties() {\n    return [\n      { prev: 'foregroundH', curr: 'foregroundHeight' },\n      { prev: 'foregroundW', curr: 'foregroundWidth' }\n    ];\n  }\n\n  static _template() {\n    return {\n      rtt: true,\n      Image: {}\n    };\n  }\n\n  get _shouldBlur() {\n    const shouldBur = this._blur || this._hasCenterImage;\n    this._Image.rtt = shouldBur; // rtt can cause a performance hit. Remove if not needed on Image\n    return shouldBur; // Artwork should always use blur when circleImage is set to true\n  }\n\n  get _hasCenterImage() {\n    return (\n      -1 < ['circle', 'square'].indexOf(this.format) ||\n      ('contain' === this.format && !this._aspectRatioEqual)\n    );\n  }\n\n  set w(v) {\n    if (v === super.w) return;\n    super.w = v;\n    this._componentSrc = this._generatePromise();\n  }\n\n  get w() {\n    return super.w;\n  }\n\n  set h(v) {\n    if (v === super.h) return;\n    super.h = v;\n    this._componentSrc = this._generatePromise();\n  }\n\n  get h() {\n    return super.h;\n  }\n\n  get _actualAspectRatio() {\n    if (!this.w || !this.h) return null;\n    return reduceFraction(`${this.w}/${this.h}`).replace('/', 'x');\n  }\n\n  get _supportedAspectRatioHeights() {\n    return this.srcCallbackAspectRatios.map(ratio => {\n      const [rw, rh] = ratio.split('x').map(v => parseInt(v));\n      const calcHeight = (this.w / rw) * rh;\n      return calcHeight;\n    });\n  }\n\n  get _closestSupportedAspectRatio() {\n    const closest = this._supportedAspectRatioHeights.reduce((prev, curr) =>\n      Math.abs(curr - this.h) < Math.abs(prev - this.h) ? curr : prev\n    );\n    return this.srcCallbackAspectRatios[\n      this._supportedAspectRatioHeights.indexOf(closest)\n    ];\n  }\n\n  get _processedImageSrc() {\n    let src = this.src || this.fallbackSrc;\n    if (\n      src !== this.fallbackSrc &&\n      this.srcCallback &&\n      typeof this.srcCallback === 'function'\n    ) {\n      src = this.srcCallback({\n        closestAspectRatio: this._closestSupportedAspectRatio,\n        aspectRatio: this._actualAspectRatio,\n        src: this.src,\n        w: this.w,\n        h: this.h\n      });\n    }\n\n    return src && src.then ? src : Promise.resolve(src);\n  }\n\n  get _gradientPatch() {\n    return {\n      alpha: !this._Gradient && this.shouldSmooth ? 0.001 : 1,\n      style: {\n        gradientColor: getValidColor(this.style.gradientColor)\n      },\n      h: this.h + 4,\n      type: Gradient,\n      w: this.w + 4,\n      x: -2,\n      y: -2,\n      zIndex: this.core.findZContext().zIndex + this.style.zIndexSet.gradient\n    };\n  }\n\n  _construct() {\n    super._construct();\n    this._srcCallbackAspectRatios = ['16x9', '3x4', '4x3', '2x1', '1x1'];\n  }\n\n  _setSrc(v) {\n    this._componentSrc = this._generatePromise();\n    return v;\n  }\n\n  _getFallbackSrc() {\n    return this._fallbackSrc || (this.style && this.style.fallbackSrc);\n  }\n\n  _generatePromise() {\n    // When a new src, w, or h value is added promises need to be reset\n    let resolvePromise, rejectPromise;\n    const complete = new Promise(function (resolve, reject) {\n      resolvePromise = resolve;\n      rejectPromise = reject;\n    });\n    return {\n      complete,\n      resolve: resolvePromise,\n      reject: rejectPromise\n    };\n  }\n\n  _setup() {\n    this.alpha = 0.001; // Hide on first load to stop flash of un-styled content on first creation\n    this._componentSrc = this._generatePromise(); // Initialize loading promises\n    this._aspectRatioEqual = false;\n    // Wait for _Image to be added to the tree to set listeners\n    this._Image.on('txLoaded', this._resolveLoading.bind(this));\n    this._Image.on('txError', this._rejectLoading.bind(this));\n  }\n\n  _resolveLoading() {\n    this._aspectRatioEqual = this._Image.texture.source\n      ? parseFloat(this.finalW / this.finalH).toFixed(2) ===\n        parseFloat(\n          this._Image.texture.source.w / this._Image.texture.source.h\n        ).toFixed(2)\n      : false;\n    this._componentSrc.resolve && this._componentSrc.resolve();\n    this.signal('imageLoaded');\n  }\n\n  _rejectLoading(error) {\n    this._componentSrc.reject && this._componentSrc.reject(error);\n    this.signal('imageLoadFailed');\n  }\n\n  async _update() {\n    this._updateRadius();\n    this._updateGradient();\n\n    await this._updateImage();\n    this._updateFillColor();\n    this._updateForegroundImage();\n    if (!this.src) {\n      this._showComponent(); // Ensure that component displays even in the case that src is not set\n      return;\n    }\n    try {\n      // These actions are dependent on the image loading so we wait for the process to complete\n      await this._componentSrc.complete;\n      await this._updateCenterImage();\n      this._updateBlur();\n      // After everything is setup fade in the Artwork component for the first time\n      this._showComponent();\n      this._updateScale();\n    } catch (e) {\n      this._handleImageLoadError();\n    }\n    if (this.shouldSmooth === undefined) this.shouldSmooth = true;\n  }\n\n  _updateScale() {\n    if (this.shouldScale) {\n      let imageScale;\n      switch (typeof this.style.imageScale) {\n        case 'function':\n          imageScale = this.style.imageScale(this.w);\n          break;\n        case 'number':\n          imageScale = this.style.imageScale;\n          break;\n        default:\n          imageScale = 1;\n      }\n\n      this._Image.smooth = {\n        pivotX: this.style.imageScalePivotX,\n        pivotY: this.style.imageScalePivotY,\n        scale: [\n          imageScale,\n          this._Image.scale < imageScale\n            ? this.style.animationImageScaleEntrance\n            : this.style.animationImageScaleExit\n        ]\n      };\n    } else {\n      const scale = 1;\n      this._Image.smooth = {\n        scale: [scale, this.style.animationImageScaleExit]\n      };\n    }\n  }\n\n  _handleImageLoadError() {\n    if (this.src === this.fallbackSrc) return;\n    context.error(`Image ${this._src} failed to load`);\n    if (this.fallbackSrc && this.fallbackSrc !== this.src) {\n      this.src = this.fallbackSrc;\n    }\n  }\n\n  _showComponent() {\n    this.smooth = {\n      alpha: [1, this.style.animationComponentEntrance]\n    };\n  }\n\n  async _updateForegroundImage() {\n    if (!this._foregroundSrc) {\n      if (this._ForegroundImage) {\n        this.patch({\n          ForegroundImage: undefined\n        });\n      }\n      return;\n    }\n\n    const foregroundImagePatch = {\n      mount: 0.5,\n      x: this.w / 2,\n      y: this.h / 2,\n      zIndex: this.core.findZContext().zIndex + this.style.zIndexSet.foreground,\n      texture: {\n        type: CustomImageTexture,\n        src: this._foregroundSrc,\n        hasAlpha: true\n      }\n    };\n\n    if (this.foregroundWidth && this.foregroundHeight) {\n      // The image size is already known so we can just patch it\n      foregroundImagePatch.h = this.foregroundHeight;\n      foregroundImagePatch.w = this.foregroundWidth;\n\n      this.patch({\n        ForegroundImage: foregroundImagePatch\n      });\n    } else if (this.foregroundWidth || this.foregroundHeight) {\n      // Load the image to get the aspect ratio before showing\n      this.patch({\n        ForegroundImage: { ...foregroundImagePatch, alpha: 0.001 }\n      });\n\n      this._ForegroundImage.once('txLoaded', () => {\n        const imageW = this._ForegroundImage.texture.getRenderWidth();\n        const imageH = this._ForegroundImage.texture.getRenderHeight();\n        this._ForegroundImage.patch({\n          alpha: 1,\n          w: this.foregroundHeight\n            ? this.foregroundHeight * (imageW / imageH)\n            : this.foregroundWidth,\n          h: this.foregroundWidth\n            ? this.foregroundWidth * (imageH / imageW)\n            : this.foregroundHeight\n        });\n      });\n    }\n\n    this.patch({\n      ForegroundImage: foregroundImagePatch\n    });\n  }\n\n  _updateBlur() {\n    if (\n      (!this._shouldBlur ||\n        (this._Image &&\n          this._Image.texture &&\n          this._Image.texture.src === this.fallbackSrc)) &&\n      this._Blur\n    ) {\n      // Remove Blur element as it is not longer required\n      if (this.shouldSmooth) {\n        this._Blur._getTransition('alpha').once('finish', () => {\n          // Clean up gradient after animation is complete\n          this.patch({ Blur: undefined });\n        });\n        this._Blur.smooth = {\n          alpha: [0, this.style.animationBlurExit]\n        };\n      } else {\n        this.patch({\n          Blur: undefined\n        });\n      }\n      return;\n    }\n    // Create/update the Blur element\n    if (!this._srcFailed && this._shouldBlur) {\n      this.patch({\n        Blur: {\n          alpha: !this._Blur && this.shouldSmooth ? 0.001 : 1, // If the Blur element already exists there is no need to fade it in again\n          amount: this.style.blur,\n          zIndex: this.core.findZContext().zIndex + this.style.zIndexSet.blur,\n          content: {\n            Image: {\n              h: this.h,\n              texture: this._Image.getTexture(),\n              w: this.w\n            }\n          },\n          h: this.h,\n          rtt: true,\n          type: lng.components.FastBlurComponent,\n          w: this.w\n        }\n      });\n\n      if (this._Blur.alpha < 1) {\n        this._Blur.smooth = {\n          alpha: [1, this.style.animationBlurEntrance]\n        };\n      }\n    }\n  }\n\n  _updateCenterImage() {\n    if (this.format === 'contain') {\n      this._updateFormatContain();\n    } else if (this.format === 'circle' || this.format === 'square') {\n      this._updateFormatSquareCircle();\n    } else if (this._CenterImage) {\n      // Remove the center image element if no longer required\n      this.patch({\n        CenterImage: undefined\n      });\n    }\n  }\n\n  async _updateFormatContain() {\n    if (\n      (this._CenterImage && this._CenterImage.mode !== this.format) ||\n      this.src === this.fallbackSrc ||\n      this._aspectRatioEqual\n    ) {\n      // Make sure previous mode is propertly cleaned up\n      this.patch({\n        CenterImage: undefined\n      });\n\n      if (this.src === this.fallbackSrc || this._aspectRatioEqual) {\n        this._Image.alpha = 1;\n        return; // If is fallback image or the aspect ratio already fits the space there is no need to proceed\n      }\n    }\n\n    let imageW;\n    let imageH;\n\n    const ratioW = Math.abs(\n      this._Image.texture.source.w / this._Image.texture.source.h\n    );\n\n    const ratioH = Math.abs(\n      this._Image.texture.source.h / this._Image.texture.source.w\n    );\n\n    if (this._Image.texture.source.w < this._Image.texture.source.h) {\n      // portrait\n      if (this.h * ratioW < this.w) {\n        // make sure it is set to show 100% height\n        imageW = this.h * ratioW;\n        imageH = this.h;\n      } else {\n        // make 100% width\n\n        imageW = this.w;\n        imageH = this.w * ratioH;\n      }\n    } else if (this._Image.texture.source.w > this._Image.texture.source.h) {\n      // landscape\n      if (this.w * ratioH < this.h) {\n        // make sure it is set to show 100% w\n        imageW = this.w;\n        imageH = this.w * ratioH;\n      } else {\n        // make 100% width\n        imageW = this.h * ratioW;\n        imageH = this.h;\n      }\n    } else {\n      // render a square\n      imageW = Math.min(this.w, this.h);\n      imageH = imageW;\n    }\n\n    const src = await this._processedImageSrc;\n\n    this.patch({\n      CenterImage: {\n        format: this.format,\n        mount: 0.5,\n        w: imageW,\n        h: imageH,\n        x: this.w / 2,\n        y: this.h / 2,\n        zIndex:\n          this.core.findZContext().zIndex + this.style.zIndexSet.centerImage,\n        texture: {\n          src,\n          resizeMode: {\n            h: imageH,\n            type: 'cover',\n            w: imageW\n          },\n          type: CustomImageTexture\n        }\n      }\n    });\n  }\n\n  _updateFormatSquareCircle() {\n    if (\n      (this._CenterImage && this._CenterImage.mode !== this.format) ||\n      this.src === this.fallbackSrc\n    ) {\n      // Make sure previous mode is properly cleaned up\n      this.patch({\n        CenterImage: undefined\n      });\n      if (this.src === this.fallbackSrc) return;\n    }\n    const imageSize = Math.min(this.w, this.h) - this.style.padding * 2;\n    this.patch({\n      CenterImage: {\n        format: this.format,\n        h: imageSize,\n        shader: {\n          radius:\n            'circle' === this.format\n              ? imageSize / 2\n              : this.style.centerImageRadius,\n          type: lng.shaders.RoundedRectangle\n        },\n        w: imageSize,\n        zIndex:\n          this.core.findZContext().zIndex + this.style.zIndexSet.centerImage,\n        Image: {\n          h: imageSize,\n          mount: 0.5,\n          rtt: true, // Required for shader to work\n          w: imageSize,\n          x: this.w / 2,\n          y: this.h / 2,\n          texture: {\n            src: this._Image.texture.src,\n            resizeMode: {\n              h: imageSize,\n              type: 'cover',\n              w: imageSize\n            },\n            type: CustomImageTexture\n          }\n        }\n      }\n    });\n  }\n\n  _updateGradient() {\n    if (!this.gradient) {\n      if (this._Gradient) {\n        // Cleanup previous gradient\n        if (this.shouldSmooth) {\n          this._Gradient._getTransition('alpha').once('finish', () => {\n            // Remove gradient if no longer required\n            const transition =\n              this._Gradient && this._Gradient._getTransition('alpha');\n            if (!this.gradient && transition && transition.p === 1)\n              this.patch({ Gradient: undefined });\n          });\n          this._Gradient.patch(this._gradientPatch); // Make sure any mode updates are patched ex.radius changes when focused/unfocused\n          this._Gradient.smooth = {\n            alpha: [0, this.style.animationGradientExit]\n          };\n        } else {\n          this.patch({ Gradient: undefined });\n        }\n      }\n      return;\n    }\n\n    this._createGradient();\n  }\n\n  _createGradient() {\n    this.patch({\n      Gradient: this._gradientPatch // Allows for an easier way to extend and replace the gradient\n    });\n    if (this.shouldSmooth) {\n      this.applySmooth(this._Gradient, {\n        alpha: [1, this.style.animationGradientEntrance]\n      });\n    }\n  }\n\n  async _updateImage() {\n    this._aspectRatioEqual = false; // Set this back to false since we will not know the aspect ratio until after the image has loaded\n\n    if (!this._processedImageSrc) {\n      if (this._Image) {\n        this._Image.texture = undefined;\n      }\n      return;\n    }\n\n    const src = await this._processedImageSrc;\n\n    this._Image.patch({\n      alpha:\n        this.src !== this.fallbackSrc && (this._blur || this._hasCenterImage)\n          ? 0.001\n          : 1, // Prevent image from flashing on first load if mode requires a center image or blur is true\n      h: this.h,\n      texture: {\n        type: CustomImageTexture,\n        src,\n        resizeMode: { type: 'cover', w: this.w, h: this.h }\n      },\n      w: this.w,\n      zIndex: this.core.findZContext().zIndex + this.style.zIndexSet.image\n    });\n  }\n\n  _updateFillColor() {\n    if (!this.fill) {\n      this.patch({\n        FillColor: undefined\n      });\n    } else {\n      this.patch({\n        FillColor: {\n          rect: true,\n          w: this.w,\n          h: this.h,\n          color: this.style.fillColor,\n          zIndex: 5\n        }\n      });\n    }\n  }\n\n  _updateRadius() {\n    // Add shader to all items in component if greater than 0, remove shader otherwise.\n    this.patch(\n      this.style.radius\n        ? {\n            shader: {\n              type: lng.shaders.RoundedRectangle,\n              radius: getMaxRoundRadius(this.style.radius, this.w, this.h)\n            }\n          }\n        : { shader: undefined }\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const tone = theme => ({\n  neutral: { color: theme.color.fillNeutral },\n  inverse: { color: theme.color.fillInverse },\n  brand: { color: theme.color.fillBrand }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Icon.styles';\nimport context from '../../globals/context/index';\nimport { getValidColor } from '../../utils';\nimport CustomImageTexture from '../../textures/CustomImageTexture';\n\n/**\n * Icon component that displays different types of icons, supporting SVGs and images.\n * @extends Base\n */\nexport default class Icon extends Base {\n  /**\n   * Returns the name of the component for theming support.\n   * @returns {string} The name of the component.\n   */\n  static get __componentName() {\n    return 'Icon';\n  }\n\n  /**\n   * Returns the theme styles for the Icon component.\n   * @returns {object} The theme styles object.\n   */\n  static get __themeStyle() {\n    return styles;\n  }\n\n  /**\n   * Returns the list of properties that can be set on the Icon component. Used by withUpdates\n   * @returns {Array} An array of property names.\n   */\n  static get properties() {\n    return ['icon', 'fixed', 'color'];\n  }\n\n  _init() {\n    /**\n     * Event listener for the 'txLoaded' event to handle icon texture loading.\n     *\n     * @listens 'txLoaded'\n     */\n    this.on('txLoaded', () => {\n      if (!this.fixed) {\n        this._notify.bind(this)(); // Notify parent component of the item change if not fixed.\n      }\n    });\n\n    /**\n     * Event listener for the 'txError' event to handle icon texture loading errors.\n     *\n     * @listens 'txError'\n     * @param {Error} error - The error object containing information about the loading error.\n     */\n    this.on('txError', this._handleTxtError.bind(this));\n  }\n\n  /**\n   * Returns the color to be used for the icon.\n   *\n   * @private\n   * @returns {string} The color value.\n   */\n  _getColor() {\n    return this._color || this.style.color;\n  }\n\n  /**\n   * Notifies the parent and ancestors of item changes in the Icon component.\n   *\n   * @private\n   */\n  _notify() {\n    this.w = this.finalW;\n    this.h = this.finalH;\n    this.signal('itemChanged', this); // Emit 'itemChanged' signal to notify parent.\n    this.fireAncestors('$itemChanged'); // Emit '$itemChanged' signal to notify ancestors.\n  }\n\n  /**\n   * Handles the error when loading the icon texture.\n   *\n   * @private\n   * @param {Error} error - The error object containing information about the loading error.\n   */\n  _handleTxtError() {\n    context.error(`Unable to load icon ${this._icon}`);\n    this._icon = null;\n    this.texture = null;\n  }\n\n  /**\n   * Updates the Icon component based on the provided icon.\n   *\n   * @private\n   */\n  _update() {\n    if (!this._icon) {\n      this.texture = null; // If there's no icon, clear the texture.\n      return;\n    }\n    this.patch(this._iconPatch); // Apply the icon patch.\n  }\n\n  /**\n   * Generates the patch based on the icon type (SVG, image, etc.) and other properties.\n   *\n   * @private\n   * @returns {object} The patch object to update the Icon component.\n   */\n  get _iconPatch() {\n    const [isSvgTag, isSvgURI] = [/^<svg.*<\\/svg>$/, /\\.svg$/].map(regex =>\n      RegExp.prototype.test.bind(regex)\n    );\n    let texture;\n    const svgTag = isSvgTag(this.icon);\n    const svgURI = isSvgURI(this.icon);\n\n    if (svgTag) {\n      texture = lng.Tools.getSvgTexture(\n        `data:image/svg+xml,${encodeURIComponent(this.icon)}`,\n        this.w,\n        this.h\n      );\n    } else if (svgURI) {\n      texture = lng.Tools.getSvgTexture(this.icon, this.w, this.h);\n    } else {\n      texture = {\n        type: CustomImageTexture,\n        w: this.w,\n        h: this.h,\n        src: this.icon\n      };\n    }\n\n    const color = getValidColor(this._color || this.style.color);\n    const shader =\n      this.radius || this.style.radius\n        ? {\n            radius: this.radius || this.style.radius,\n            type: lng.shaders.RoundedRectangle\n          }\n        : undefined;\n\n    return {\n      texture,\n      shader,\n      ...(color\n        ? { colorUl: color, colorUr: color, colorBl: color, colorBr: color }\n        : {})\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  return {\n    contentSpacing: theme.spacer.xs,\n    offsetY: 1,\n    paddingX: theme.spacer.md,\n    paddingY: theme.spacer.xs,\n    radius: theme.radius.sm,\n    strokeWidth: theme.stroke.sm,\n    textStyle: {\n      ...theme.typography.tag1,\n      textAlign: 'center'\n    }\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    backgroundColor: theme.color.fillInverseSecondary,\n    iconColor: theme.color.textNeutral,\n    textStyle: { textColor: theme.color.textNeutral },\n    strokeColor: theme.color.strokeNeutralSecondary\n  },\n  inverse: {\n    backgroundColor: theme.color.fillNeutralSecondary,\n    iconColor: theme.color.textInverse,\n    textStyle: { textColor: theme.color.textInverse },\n    strokeColor: theme.color.strokeInverseSecondary\n  },\n  brand: {\n    backgroundColor: theme.color.fillBrand,\n    iconColor: theme.color.textNeutral,\n    textStyle: { textColor: theme.color.textNeutral },\n    strokeColor: theme.color.strokeInverseSecondary\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport Icon from '../Icon';\nimport { getHexColor, getMaxRoundRadius } from '../../utils';\nimport * as styles from './Badge.styles';\nimport lng from '@lightningjs/core';\n\nexport default class Badge extends Base {\n  static _template() {\n    return {\n      Text: {\n        mountY: 0.5\n      },\n      Icon: {\n        type: Icon,\n        mountY: 0.5,\n        signals: {\n          itemChanged: '_updateLayout'\n        }\n      }\n    };\n  }\n\n  static get __componentName() {\n    return 'Badge';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return ['title', 'icon', 'iconAlign', 'iconWidth', 'iconHeight'];\n  }\n\n  static get tags() {\n    return ['Background', 'Text', 'Icon'];\n  }\n\n  _init() {\n    this._Text.on('txLoaded', this._updateLayout.bind(this));\n    super._init();\n  }\n\n  _update() {\n    this._updateText();\n    this._updateIcon();\n    this._updateLayout();\n    this._updateVisibility();\n  }\n\n  _updateVisibility() {\n    this.alpha = this.title || this.icon ? 1 : 0;\n  }\n\n  _updateLayout() {\n    this._updateWidth();\n    this._updateBackground();\n    this._updatePositions();\n    this.signal('loadedBadge', this);\n  }\n\n  _updateBackground() {\n    const height =\n      Math.max(this._Text.renderHeight, this._Icon.h) + this.style.paddingY * 2;\n\n    this.patch({\n      h: height,\n      texture: lng.Tools.getRoundRect(\n        this.w,\n        height,\n        getMaxRoundRadius(this.style.radius, this.w, height),\n        this.style.strokeWidth,\n        this.style.strokeColor,\n        true,\n        this.style.backgroundColor\n      )\n    });\n  }\n\n  _updateText() {\n    if (this._Text) {\n      this._Text.patch({\n        text: {\n          ...this.style.textStyle,\n          text: this.title || ''\n        }\n      });\n    }\n  }\n\n  _updateIcon() {\n    this._Icon.patch({\n      icon: this.icon,\n      w: this.iconWidth,\n      h: this.iconHeight,\n      style: {\n        color: getHexColor(this.style.iconColor)\n      }\n    });\n  }\n\n  _updateWidth() {\n    let width = 0;\n    if (this.title && this.icon) {\n      width =\n        this._Text.renderWidth +\n        this._Icon.finalW +\n        this.style.contentSpacing +\n        this.style.paddingX * 2;\n    } else if (this.title) {\n      width = this._Text.renderWidth + this.style.paddingX * 2;\n    } else if (this.icon) {\n      width = this._Icon.finalW + this.style.paddingX * 2;\n    }\n\n    this.w = width;\n  }\n\n  _updatePositions() {\n    this._Icon.y = this.h / 2;\n\n    if (this.iconAlign === 'left' && this.title && this.icon) {\n      this._Icon.x = this.style.paddingX;\n      this._Text.x =\n        this._Icon.x + this._Icon.finalW + this.style.contentSpacing;\n    } else if (this.iconAlign === 'right' && this.title && this.icon) {\n      this._Text.x = this.style.paddingX;\n      this._Icon.x =\n        this._Text.x + this._Text.renderWidth + this.style.contentSpacing;\n    } else {\n      this._Text.x = this.style.paddingX;\n      this._Icon.x = this.style.paddingX;\n    }\n\n    this._Text.y = this._h / 2 + this.style.offsetY;\n  }\n\n  _getIconHeight() {\n    if (this.icon) {\n      return !this._Icon.finalH && this._Text\n        ? this._Text.text.lineHeight\n        : this._Icon.finalH;\n    }\n    return 0;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || this.title;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByColumnSpan } from '../../utils';\n\nexport const base = theme => ({\n  width: 0,\n  justify: 'center',\n  minWidth: getWidthByColumnSpan(theme, 3),\n  paddingX: theme.spacer.xxxl,\n  paddingXNoTitle: theme.spacer.xl,\n  paddingY: theme.spacer.xl,\n  radius: theme.radius.sm,\n  contentSpacing: theme.spacer.md,\n  itemSpacing: theme.spacer.md,\n  textStyle: {\n    ...theme.typography.button1,\n    maxLines: 1,\n    textColor: theme.color.textNeutral\n  },\n  contentColor: theme.color.fillNeutral\n});\n\nexport const mode = theme => ({\n  focused: {\n    textStyle: { textColor: theme.color.textInverse },\n    contentColor: theme.color.fillInverse,\n    tone: {\n      inverse: {\n        textStyle: { textColor: theme.color.textNeutral },\n        contentColor: theme.color.fillNeutral\n      },\n      brand: {\n        contentColor: theme.color.fillNeutral\n      }\n    }\n  },\n  disabled: {\n    textStyle: { textColor: theme.color.textNeutralDisabled },\n    contentColor: theme.color.fillNeutralDisabled\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * FocusManager Component\n *\n * Container to set focus on elements with key[Up/Down] or key[Left/Right]\n */\nimport Base from '../Base';\nimport {\n  getX,\n  getY,\n  isComponentOnScreen,\n  getShortestDistance\n} from '../../utils';\n\nexport default class FocusManager extends Base {\n  static get __componentName() {\n    return 'FocusManager';\n  }\n\n  static get tags() {\n    return ['Items'];\n  }\n\n  static get properties() {\n    return ['direction', 'wrapSelected'];\n  }\n\n  _construct() {\n    super._construct();\n    this._selectedIndex = 0;\n    this._itemPosX = 0;\n    this._itemPosY = 0;\n    this.direction = this.direction || 'row';\n  }\n\n  _init() {\n    this._checkSkipFocus();\n  }\n\n  get Items() {\n    if (!this.tag('Items')) {\n      this.patch({ Items: {} });\n    }\n    return this._Items;\n  }\n\n  _setDirection(direction) {\n    const state = {\n      none: 'None',\n      column: 'Column',\n      row: 'Row'\n    }[direction];\n\n    if (state) {\n      this._setState(state);\n    }\n    return direction;\n  }\n\n  _getItems() {\n    return this._Items.children;\n  }\n\n  get items() {\n    return this.Items.children;\n  }\n\n  set items(items) {\n    this._resetItems();\n    this._selectedIndex = 0;\n    this.appendItems(items);\n    this._checkSkipFocus();\n  }\n\n  set itemPosX(x) {\n    this.Items.x = this._itemPosX = x;\n  }\n\n  get itemPosX() {\n    return this._itemPosX;\n  }\n\n  set itemPosY(y) {\n    this.Items.y = this._itemPosY = y;\n  }\n\n  get itemPosY() {\n    return this._itemPosY;\n  }\n\n  _resetItems() {\n    this.Items.childList.clear();\n    this.Items.patch({\n      w: 0,\n      h: 0,\n      x: this.itemPosX,\n      y: this.itemPosY\n    });\n\n    // This fixes an issue when trying to call set items if there are already items held in _lazyItems.\n    // Going to follow up on a review of this feature.\n    if (this._lazyItems) {\n      this._lazyItems = null;\n    }\n  }\n\n  _appendLazyItem(item) {\n    this.appendItems([item]);\n  }\n\n  appendItems(items = []) {\n    this.Items.childList.a(items);\n    this._refocus();\n  }\n\n  appendItemsAt(items = [], idx) {\n    const addIndex = Number.isInteger(idx) ? idx : this.Items.children.length;\n    this.shouldSmooth = false;\n    this._lastAppendedIdx = addIndex;\n\n    items.forEach((item, itemIdx) => {\n      this.Items.childList.addAt(\n        {\n          ...item,\n          parentFocus: this.hasFocus()\n        },\n        addIndex + itemIdx\n      );\n    });\n\n    if (this.selectedIndex >= this._lastAppendedIdx) {\n      this._selectedIndex += items.length;\n    }\n\n    this.requestUpdate();\n    this._refocus();\n  }\n\n  prependItems(items) {\n    this.appendItemsAt(items, 0);\n  }\n\n  removeItemAt(index) {\n    this.shouldSmooth = false;\n    this.Items.childList.removeAt(index);\n\n    if (\n      this.selectedIndex > index ||\n      this.selectedIndex === this.Items.children.length\n    ) {\n      this._selectedIndex--;\n    }\n\n    this.requestUpdate();\n    this._refocus();\n  }\n\n  _checkSkipFocus() {\n    // If the first item has skip focus when appended get the next focusable item\n    const initialSelection = this.Items.children[this.selectedIndex];\n    if (initialSelection && initialSelection.skipFocus) {\n      this.selectNext(false);\n    }\n  }\n\n  get selected() {\n    return this.Items.children[this.selectedIndex];\n  }\n\n  get selectedIndex() {\n    return this._selectedIndex;\n  }\n\n  set selectedIndex(index) {\n    this.prevSelected = this.selected;\n    if (\n      !this.Items.children.length ||\n      !this.Items.children[index] ||\n      !this.Items.children[index].skipFocus\n    ) {\n      if (index !== this._selectedIndex) {\n        this._selectedIndex = index;\n      }\n      if (this.selected) {\n        this._selectedChange(this.selected, this.prevSelected);\n      }\n      // Don't call refocus until after a new render in case of a situation like Plinko nav\n      // where we don't want to focus the previously selected item and need to get the new one first\n      this._refocus();\n    }\n  }\n\n  _selectedChange(selected, prevSelected) {\n    this._render(selected, prevSelected);\n    this.signal('selectedChange', selected, prevSelected);\n  }\n\n  // Override\n  _render() {}\n\n  _firstFocusableIndex() {\n    if (!this.items.length) return 0;\n    const firstItem = this.items\n      .reduce((acc, item, idx) => {\n        if (!item.skipFocus) {\n          acc.push({ ...item, originalIdx: idx });\n        }\n        return acc;\n      }, [])\n      .shift();\n\n    return firstItem.originalIdx;\n  }\n\n  _lastFocusableIndex() {\n    if (!this.items.length) return 0;\n    const lastItem = this.items\n      .reduce((acc, item, idx) => {\n        if (!item.skipFocus) {\n          acc.push({ ...item, originalIdx: idx });\n        }\n        return acc;\n      }, [])\n      .pop();\n\n    return lastItem.originalIdx;\n  }\n\n  selectPrevious() {\n    this.shouldSmooth = true;\n    const hasFocusable = !!(this.items || []).filter(i => !i.skipFocus).length;\n    if ((this.selectedIndex === 0 && !this.wrapSelected) || !hasFocusable) {\n      return false;\n    }\n\n    const previousItemIndex = this.items\n      .map(item => !!item.skipFocus)\n      .lastIndexOf(false, this._selectedIndex - 1);\n\n    if (previousItemIndex > -1) {\n      this.selectedIndex = previousItemIndex;\n      return true;\n    } else if (this.wrapSelected) {\n      this.selectedIndex = this._lastFocusableIndex();\n      return true;\n    }\n    return false;\n  }\n\n  selectNext(shouldSmoothOverride) {\n    if (this._lazyItems && this._lazyItems.length) {\n      this._appendLazyItem(this._lazyItems.splice(0, 1)[0]);\n    }\n    this.shouldSmooth = shouldSmoothOverride ?? true;\n\n    const hasFocusable = !!(this.items || []).filter(i => !i.skipFocus).length;\n    if (\n      (this.selectedIndex === this.Items.children.length - 1 &&\n        !this.wrapSelected) ||\n      !hasFocusable\n    ) {\n      return false;\n    }\n\n    const nextIndex = this.items.findIndex(\n      (item, idx) => !item.skipFocus && idx > this._selectedIndex\n    );\n\n    if (nextIndex > -1) {\n      this.selectedIndex = nextIndex;\n      return true;\n    } else if (this.wrapSelected) {\n      this.selectedIndex = this._firstFocusableIndex();\n      return true;\n    }\n    return false;\n  }\n\n  _getIndexOfItemNear(selected, prev) {\n    const prevItem = prev.selected;\n\n    if (!selected || !selected.items || !selected.items.length || !prevItem) {\n      return 0;\n    }\n\n    const [itemX, itemY] = prevItem.core.getAbsoluteCoords(0, 0);\n    const prevMiddle = [itemX + prevItem.w / 2, itemY + prevItem.h / 2];\n\n    // Get all item center points from selected\n    const selectedCoordArray = selected.items\n      .map((item, index) => {\n        return {\n          index,\n          distance: !item.skipFocus\n            ? getShortestDistance(prevMiddle, item)\n            : null\n        };\n      })\n      .filter(item => {\n        // Remove all indexes that don't have a distance (skipFocus)\n        return null !== item.distance;\n      })\n      .sort(function (a, b) {\n        return a.distance - b.distance;\n      });\n    return selectedCoordArray[0].index;\n  }\n\n  /**\n   * TODO: Update Base to remove the focus/unfocus calls and add a second \"BaseComponent\" that does have them\n   *\n   * Layout Components (Column, Row, BoardRows, etc.) would extend only Base,\n   *    need to confirm this applies to InlineContnet and ScrollWrapper??\n   * Element/Pattern Components (Tile, Badge, etc.) would extend \"BaseComponent\" that does have focus/unfocus overrides\n   */\n  _focus() {\n    super._focus();\n    this.items.forEach(item => (item.parentFocus = true));\n  }\n  _unfocus() {\n    super._unfocus();\n    this.items.forEach(item => (item.parentFocus = false));\n  }\n\n  _updateShouldSmooth() {}\n\n  _getFocused() {\n    const { selected } = this;\n    // Make sure we're focused on a component\n    if (selected) {\n      if (selected.focusRef) {\n        return selected.tag(selected.focusRef);\n      } else if (selected.cparent) {\n        return selected;\n      }\n    }\n    return this;\n  }\n\n  _updateTransitionTarget(element, property, newValue) {\n    if (\n      element &&\n      element.transition(property) &&\n      !element.transition(property).isRunning() &&\n      element.transition(property).targetValue !== newValue\n    ) {\n      element.transition(property).updateTargetValue(newValue);\n    }\n  }\n\n  /**\n   * Return list of items that are currently fully and partially on screen\n   * @returns {Array} Array of matching lng.Component objects or empty array\n   */\n  get onScreenItems() {\n    return this.Items.children.filter(child => this._isOnScreen(child));\n  }\n\n  _isOnScreenCompletely(child) {\n    // 'isFullyOnScreen' method has been added to the Base class.\n    // in case child does _not_ extend Base, 'isComponentOnScreen'\n    // from the 'util' module will be invoked. The same method is\n    // invoked by Base class\n    return child.isFullyOnScreen\n      ? child.isFullyOnScreen()\n      : isComponentOnScreen(child);\n  }\n\n  get fullyOnScreenItems() {\n    return this.Items.children.reduce((rv, item) => {\n      if (item instanceof FocusManager) {\n        return [\n          ...rv,\n          ...item.Items.children.filter(this._isOnScreenCompletely)\n        ];\n      } else if (this._isOnScreenCompletely(item)) {\n        return [...rv, item];\n      } else {\n        return rv;\n      }\n    }, []);\n  }\n\n  _isOnScreen() {\n    throw new Error(\"'_isOnScreen' must be implemented by 'row'/'column'\");\n  }\n\n  _isComponentHorizontallyVisible(child) {\n    // get child's destination X; If child is moving to a destination,\n    // get the value of where child will end up\n    const x = getX(child);\n    if (!Number.isFinite(x)) return false;\n\n    // to calculate the target absolute X position of the item, we need to use\n    // 1) the entire component's absolute position,\n    // 2) the target animation value of the items container, and\n    // 3) the target value of the item itself\n    const transitionX = this.getTransitionXTargetValue();\n    // get absolute position of FocusManager on screen\n    const px = this.core.renderContext.px;\n    const itemX = px + transitionX + x;\n\n    // _scissor consists of [ left position (x), top position (y), width, height ]\n    const [leftBounds = null, , clipWidth = null] = this.core._scissor || [];\n    const stageW = this.stage.w / this.stage.getRenderPrecision();\n    const { w } = child;\n\n    const withinLeftStageBounds = itemX >= 0;\n    const withinRightStageBounds = itemX + w <= stageW;\n    // short circuit\n    if (!withinLeftStageBounds || !withinRightStageBounds) return false;\n\n    let withinLeftClippingBounds = true;\n    let withinRightClippingBounds = true;\n    if (Number.isFinite(leftBounds)) {\n      withinLeftClippingBounds =\n        Math.round(itemX + w) >= Math.round(leftBounds);\n      withinRightClippingBounds =\n        Math.round(itemX) <= Math.round(leftBounds + clipWidth);\n    }\n\n    return withinLeftClippingBounds && withinRightClippingBounds;\n  }\n\n  _isComponentVerticallyVisible(child) {\n    // get child's destination Y; If child is moving to a destination,\n    // get the value of where child will end up\n    const y = getY(child);\n    if (!Number.isFinite(y)) return false;\n\n    // to calculate the target absolute Y position of the item, we need to use\n    // 1) the entire component's absolute position,\n    // 2) the target animation value of the items container, and\n    // 3) the target value of the item itself\n    const transitionY = this.getTransitionYTargetValue();\n\n    // get absolute position of FocusManager on screen\n    const py = this.core.renderContext.py;\n\n    // _scissor consists of [ left position (x), top position (y), width, height ]\n    const [, topBounds = null, , clipHeight = null] = this.core._scissor || [];\n    const { h } = child;\n\n    const itemY = py + transitionY + y;\n    const stageH = this.stage.h / this.stage.getRenderPrecision();\n    const withinTopStageBounds = itemY + h >= 0;\n    const withingBottomStageBounds = itemY <= stageH;\n\n    // short circuit\n    if (!withinTopStageBounds || !withingBottomStageBounds) return false;\n\n    let withinTopClippingBounds = true;\n    let withinBottomClippingBounds = true;\n    if (Number.isFinite(topBounds)) {\n      withinTopClippingBounds = Math.round(itemY + h) > Math.round(topBounds);\n      withinBottomClippingBounds =\n        Math.round(itemY) < Math.round(topBounds + clipHeight);\n    }\n\n    return withinTopClippingBounds && withinBottomClippingBounds;\n  }\n\n  getTransitionXTargetValue() {\n    return this.Items.transition('x').targetValue;\n  }\n\n  getTransitionYTargetValue() {\n    return this.Items.transition('y').targetValue;\n  }\n\n  static _states() {\n    return [\n      class None extends this {},\n      class Row extends this {\n        _handleLeft() {\n          return typeof this.onLeft === 'function'\n            ? this.onLeft(this)\n            : this.selectPrevious();\n        }\n\n        _handleRight() {\n          return typeof this.onRight === 'function'\n            ? this.onRight(this)\n            : this.selectNext();\n        }\n      },\n\n      class Column extends this {\n        _handleUp() {\n          return typeof this.onUp === 'function'\n            ? this.onUp(this)\n            : this.selectPrevious();\n        }\n\n        _handleDown() {\n          return typeof this.onDown === 'function'\n            ? this.onDown(this)\n            : this.selectNext();\n        }\n      }\n    ];\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  alwaysScroll: false,\n  itemSpacing: theme.layout.gutterX,\n  itemTransition: theme.animation.utility,\n  neverScroll: false,\n  scrollIndex: 0\n});\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport FocusManager from '../FocusManager';\nimport { getX, getY, getH, getW, max, watchForUpdates } from '../../utils';\nimport * as styles from './NavigationManager.styles';\n\nconst directionPropNames = {\n  row: {\n    axis: 'x',\n    crossAxis: 'y',\n    lengthDimension: 'w',\n    crossDimension: 'h',\n    innerLengthDimension: 'innerW',\n    innerCrossDimension: 'innerH'\n  },\n  column: {\n    axis: 'y',\n    crossAxis: 'x',\n    lengthDimension: 'h',\n    crossDimension: 'w',\n    innerLengthDimension: 'innerH',\n    innerCrossDimension: 'innerW'\n  }\n};\n\nexport default class NavigationManager extends FocusManager {\n  static get __componentName() {\n    return 'NavigationManager';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [\n      ...super.properties,\n      'alwaysScroll',\n      'neverScroll',\n      'scrollIndex',\n      'autoResizeWidth',\n      'autoResizeHeight',\n      'lazyUpCount',\n      'lazyUpCountBuffer',\n      'waitForDimensions'\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this.shouldSmooth = false;\n    this._lazyUpCountBuffer = 2;\n  }\n\n  _init() {\n    const { lengthDimension, axis } = this._directionPropNames;\n\n    if (!this[lengthDimension]) {\n      this._initComponentSize();\n    }\n\n    this.Items.transition(axis).on(\n      'finish',\n      this._transitionListener.bind(this)\n    );\n\n    super._init();\n  }\n\n  _initComponentSize() {\n    const { lengthDimension } = this._directionPropNames;\n    if (\n      this?.parent.parent instanceof NavigationManager &&\n      this?.parent.parent[lengthDimension]\n    ) {\n      // component is a child item in a NavigationManager (or subclass of NavigationManager)\n      this[lengthDimension] = this.parent.parent[lengthDimension];\n    } else {\n      // find closest parent in render tree with lengthDimension property set(w for Row, h for Column)\n      let parent = this.parent;\n      while (parent && !parent[lengthDimension]) {\n        parent = parent.parent;\n      }\n      this[lengthDimension] =\n        (parent && parent[lengthDimension]) ||\n        this.stage.h / this.stage.getRenderPrecision();\n    }\n  }\n\n  _update() {\n    this._updateLayout();\n  }\n\n  _updateLayout() {\n    const { lengthDimension, crossDimension, crossAxis, innerCrossDimension } =\n      this._directionPropNames;\n    let nextPosition = 0;\n    let maxCrossDimensionSize = 0;\n    let maxInnerCrossDimensionSize = 0;\n    const childrenToCenter = [];\n    const loadingChildren = [];\n\n    for (let i = 0; i < this.Items.children.length; i++) {\n      const child = this.Items.children[i];\n\n      if (child.requestEarlyUpdate) {\n        const updateDidRun = child.requestEarlyUpdate();\n        if (!updateDidRun && (child.w === 0 || child.h === 0)) {\n          child._updateLayout && child._updateLayout();\n        }\n      }\n      const childCrossDimensionSize = this._calcCrossDimensionSize(child);\n\n      if (\n        this.waitForDimensions &&\n        (!childCrossDimensionSize || !child[lengthDimension])\n      ) {\n        loadingChildren.push(child);\n      }\n\n      maxCrossDimensionSize = max(\n        maxCrossDimensionSize,\n        childCrossDimensionSize\n      );\n      maxInnerCrossDimensionSize = max(\n        maxInnerCrossDimensionSize,\n        child[innerCrossDimension] || 0\n      );\n\n      this.updatePositionOnAxis(child, nextPosition);\n\n      nextPosition += child[lengthDimension];\n\n      if (i < this.Items.children.length - 1) {\n        const extraItemSpacing = child.extraItemSpacing || 0;\n        nextPosition += this.style.itemSpacing + extraItemSpacing;\n      }\n\n      if (child.centerInParent) {\n        // if the child is another NavigationManager, check the cross dimension size of the item container\n        const childCrossDimensionSize =\n          (child.Items && child.Items[crossDimension]) || child[crossDimension];\n        // only center the child if it is within the bounds of this NavigationManager\n        // center based off innerCrossDimension in cases where elements with\n        // innerCrossDimension exist in Items (ex. Tile with metadata)\n        if (\n          childCrossDimensionSize < this[crossDimension] ||\n          !this.Items[innerCrossDimension]\n        ) {\n          childrenToCenter.push({ childIdx: i, childCrossDimensionSize });\n        }\n      } else {\n        child[crossAxis] = 0;\n      }\n    }\n\n    const itemChanged =\n      this.Items[crossDimension] !== maxCrossDimensionSize ||\n      this.Items[lengthDimension] !== nextPosition;\n\n    if (this.waitForDimensions) {\n      this.Items.alpha = loadingChildren.length ? 0.001 : 1;\n    }\n\n    this.Items.patch({\n      [crossDimension]: maxCrossDimensionSize,\n      [innerCrossDimension]:\n        maxInnerCrossDimensionSize || maxCrossDimensionSize,\n      [lengthDimension]: nextPosition + (this._totalAddedWidth || 0)\n    });\n\n    this._autoResize();\n    this._centerItemsInParent(childrenToCenter);\n    this._updateLastScrollIndex();\n\n    if (itemChanged) {\n      this._performRender();\n      this.fireAncestors('$itemChanged');\n    }\n  }\n\n  _centerItemsInParent(items) {\n    const { crossDimension, crossAxis, innerCrossDimension } =\n      this._directionPropNames;\n    if (items.length) {\n      const sizes = [\n        this.Items[crossDimension],\n        this.Items[innerCrossDimension]\n      ];\n      // If a subclass of NavigationManager only contains a row or column of items:\n      // then also consider the h or w of that component when centering items .\n      // Subclasses that add other components outside of the Items array (ex. TitleRow)\n      // likely increase the h or w of the component and centering should be with respect to only the Items element.\n      if (this.children.length === 1) {\n        sizes.push(this[crossDimension]);\n      }\n\n      const crossDimensionSize = Math.max(...sizes);\n      items.forEach(({ childIdx, childCrossDimensionSize }) => {\n        this.Items.children[childIdx][crossAxis] =\n          (crossDimensionSize - childCrossDimensionSize) / 2;\n      });\n    }\n  }\n\n  _autoResize() {\n    if (this.autoResizeWidth) {\n      this.w = this.Items.w;\n    }\n    if (this.autoResizeHeight) {\n      this.h = this.Items.h;\n    }\n  }\n\n  _updateLastScrollIndex() {\n    const { axis, lengthDimension } = this._directionPropNames;\n    if (this.alwaysScroll) {\n      this._lastScrollIndex = this.Items.children.length - 1;\n      return;\n    }\n\n    const itemPos = this._isRow ? this.itemPosX : this.itemPosY;\n    const scrollOffset =\n      (this.Items.children[this.scrollIndex] || {\n        [axis]: 0\n      })[axis] + itemPos;\n    const lastChild = this.Items.childList.last;\n    const endOfLastChild = lastChild\n      ? this._calcAxisPosition(lastChild) + lastChild[lengthDimension]\n      : 0;\n    if (endOfLastChild > this[lengthDimension]) {\n      let lastScrollIndex;\n      for (let i = this.Items.children.length - 1; i >= 0; i--) {\n        const childPosition = this._calcAxisPosition(this.Items.children[i]);\n        const canScrollToChild =\n          childPosition + this[lengthDimension] - scrollOffset > endOfLastChild;\n        if (canScrollToChild) {\n          lastScrollIndex = i;\n        } else {\n          break;\n        }\n      }\n      this._lastScrollIndex = lastScrollIndex;\n      return;\n    }\n\n    // TODO: This conditional originated in Column (prior to NavigationManager refactor).\n    //  What scenario would this ever be true?\n    //  Add a comment to describe it when that is identified.\n    if (this._lastScrollIndex > this.items.length) {\n      this._lastScrollIndex = this.items.length - 1;\n    }\n  }\n\n  _calcCrossDimensionSize(comp) {\n    if (this._isRow) {\n      return getH(comp);\n    }\n\n    if (this._isColumn) {\n      return getW(comp);\n    }\n  }\n\n  _calcAxisPosition(comp) {\n    if (this._isRow) {\n      return getX(comp);\n    }\n\n    if (this._isColumn) {\n      return getY(comp);\n    }\n  }\n\n  _transitionListener() {\n    this.shouldSmooth = false;\n    this.transitionDone();\n  }\n\n  _withAfterUpdate(element) {\n    return watchForUpdates({\n      element,\n      watchProps: [\n        this._directionPropNames.crossAxis,\n        'w',\n        'h',\n        'innerW',\n        'innerH'\n      ],\n      sideEffect: this.queueRequestUpdate.bind(this)\n    });\n  }\n\n  // can be overwritten\n  _performRender() {}\n\n  _appendItem(item, shouldSmoothOverride) {\n    this.shouldSmooth = shouldSmoothOverride ?? false;\n    item.parentFocus = this.hasFocus();\n    item = this.Items.childList.a(item);\n\n    const { crossDimension } = this._directionPropNames;\n    // do not set a h/w if the item already has one defined\n    // as this will trigger withThemeStyles's dimension \"setByUser\" flag\n    if (!item[crossDimension]) {\n      const itemCrossSize = this._isRow ? this.renderHeight : this.renderWidth;\n      item[crossDimension] = item[crossDimension] || itemCrossSize;\n    }\n\n    item = this._withAfterUpdate(item);\n    return item;\n  }\n\n  _appendLazyItem(item) {\n    const { lengthDimension, axis } = this._directionPropNames;\n    const lastChild = this._Items.children[this.items.length - 1];\n    const nextPosition =\n      lastChild[lengthDimension] +\n      lastChild[axis] +\n      (lastChild.extraItemSpacing || 0) +\n      this.style.itemSpacing;\n\n    const appended = this._appendItem(item, true);\n\n    // Update w/o recalculating  whole layout\n    appended[axis] = nextPosition;\n    this._Items[lengthDimension] += nextPosition + item[lengthDimension];\n  }\n\n  $itemChanged() {\n    this.queueRequestUpdate();\n  }\n\n  appendItems(items = []) {\n    this.shouldSmooth = false;\n\n    if (this._lazyItems) {\n      this._lazyItems.push(...items);\n      return;\n    }\n\n    if (items.length > this.lazyUpCount + this.lazyUpCountBuffer) {\n      this._lazyItems = items.splice(this.lazyUpCount + this.lazyUpCountBuffer);\n    }\n    items.forEach(item => this._appendItem(item));\n\n    this.requestUpdate();\n    this._refocus();\n  }\n\n  appendItemsAt(items = [], idx) {\n    if (this._lazyItems && idx > this.items.length - 1) {\n      const addAtIdx = idx - this.items.length;\n      this._lazyItems.splice(addAtIdx, 0, ...items);\n      return;\n    }\n\n    const { crossDimension, lengthDimension, innerLengthDimension } =\n      this._directionPropNames;\n    const addIndex = Number.isInteger(idx) ? idx : this.Items.children.length;\n    this.shouldSmooth = false;\n    this._lastAppendedIdx = addIndex;\n    this._totalAddedLength = 0;\n\n    items.forEach((item, itemIdx) => {\n      const newItem = {\n        ...this._withAfterUpdate(item),\n        parentFocus: this.hasFocus()\n      };\n      // do not set a h/w if the item already has one defined\n      // as this will trigger withThemeStyles's dimension \"setByUser\" flag\n      if (!item[crossDimension]) {\n        newItem[crossDimension] =\n          item[crossDimension] || this.Items[crossDimension];\n      }\n      this.Items.childList.addAt(newItem, addIndex + itemIdx);\n      const itemLength =\n        item[lengthDimension] || item[innerLengthDimension] || 0;\n      const extraItemSpacing = item.extraItemSpacing || 0;\n      this._totalAddedLength +=\n        itemLength + this.style.itemSpacing + extraItemSpacing;\n    });\n\n    if (this.selectedIndex >= this._lastAppendedIdx) {\n      this._selectedPastAdded = true;\n      this._selectedIndex += items.length;\n    }\n\n    this.requestUpdate();\n    this._refocus();\n  }\n\n  updatePositionOnAxis(item, position) {\n    const { axis } = this._directionPropNames;\n    this.applySmooth(\n      item,\n      { [axis]: position },\n      { [axis]: [position, this.style.itemTransition] }\n    );\n\n    if (!this.shouldSmooth) {\n      this._updateTransitionTarget(item, axis, position);\n    }\n  }\n\n  scrollTo(index, duration = this.style.itemTransition.duration * 100) {\n    if (index == undefined) {\n      return;\n    }\n\n    if (duration === 0) {\n      this.selectedIndex = index;\n      return;\n    }\n\n    for (let i = 0; i !== Math.abs(this.selectedIndex - index); i++) {\n      setTimeout(() => {\n        this.selectedIndex > index ? this.selectPrevious() : this.selectNext();\n      }, duration * i);\n    }\n  }\n\n  // can be overridden\n  transitionDone() {}\n\n  shouldScrollLeft() {\n    return this._isRow && this._canScrollBack;\n  }\n\n  shouldScrollRight() {\n    return this._isRow && this._canScrollNext;\n  }\n\n  shouldScrollUp() {\n    return this._isColumn && this._canScrollBack;\n  }\n\n  shouldScrollDown() {\n    return this._isColumn && this._canScrollNext;\n  }\n\n  get _directionPropNames() {\n    return directionPropNames[this.direction];\n  }\n\n  get _canScrollBack() {\n    let shouldScroll = false;\n\n    if (this._lastScrollIndex) {\n      shouldScroll = this.selectedIndex < this._lastScrollIndex;\n      if (\n        this._prevLastScrollIndex !== undefined &&\n        this._prevLastScrollIndex !== this._lastScrollIndex\n      ) {\n        shouldScroll = true;\n      }\n    } else {\n      shouldScroll = this.selectedIndex >= this.scrollIndex;\n    }\n\n    const itemsStartCoord = this._isRow ? this._itemsX : this._itemsY;\n    return (\n      itemsStartCoord < (this._isRow ? this.itemPosX : this.itemPosY) &&\n      shouldScroll\n    );\n  }\n\n  get _canScrollNext() {\n    const { axis, lengthDimension } = this._directionPropNames;\n    const lastChild = this.Items.childList.last;\n    let endOfItemsPosition;\n\n    if (this._isRow) {\n      endOfItemsPosition = Math.abs(this._itemsX - this.w);\n    }\n    if (this._isColumn) {\n      endOfItemsPosition = Math.abs(this._itemsY - this.h);\n    }\n\n    return (\n      this.selectedIndex > this.scrollIndex &&\n      // end of Items container < end of last item\n      endOfItemsPosition < lastChild[axis] + lastChild[lengthDimension]\n    );\n  }\n\n  get _isColumn() {\n    return this.direction === 'column';\n  }\n\n  get _isRow() {\n    return this.direction === 'row';\n  }\n\n  get _itemsX() {\n    return getX(this.Items);\n  }\n\n  get _itemsY() {\n    return getY(this.Items);\n  }\n\n  _getAlwaysScroll() {\n    return this._alwaysScroll !== undefined\n      ? this._alwaysScroll\n      : this.style.alwaysScroll;\n  }\n\n  _getNeverScroll() {\n    if (this.alwaysScroll) {\n      return false;\n    }\n    return this._neverScroll !== undefined\n      ? this._neverScroll\n      : this.style.neverScroll;\n  }\n\n  _setScrollIndex(index) {\n    return index >= 0 ? index : 0;\n  }\n\n  _getScrollIndex() {\n    return this._scrollIndex !== undefined\n      ? this._scrollIndex\n      : this.style.scrollIndex;\n  }\n\n  _setLazyUpCountBuffer(buffer) {\n    if (buffer < 0) {\n      console.warn(\n        'lazyUpCountBuffer must be greater than or equal to 0. Setting to 0.'\n      );\n      buffer = 0;\n    }\n    return buffer;\n  }\n\n  isFullyOnScreen({ offsetX = 0, offsetY = 0 } = {}) {\n    // if the NavigationManager is nested in another Focus Manager\n    // (like a Row inside of a Column),\n    // the `isComponentOnScreen` method needs to account for\n    // how much the Items container is moving as it scrolls\n    const focusmanager = this.parent?.parent;\n    if (focusmanager instanceof FocusManager) {\n      offsetX += focusmanager.Items.transition('x').targetValue || 0;\n      offsetY += focusmanager.Items.transition('y').targetValue || 0;\n    }\n    return super.isFullyOnScreen({ offsetX, offsetY });\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  itemSpacing: theme.layout.gutterX,\n  scrollIndex: 0,\n  alwaysScroll: false,\n  neverScroll: false,\n  itemTransition: {\n    ...theme.animation.standardEntrance,\n    duration: theme.animation.duration.fast\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport NavigationManager from '../NavigationManager';\nimport * as styles from './Row.styles';\nimport { getX } from '../../utils';\n\nexport default class Row extends NavigationManager {\n  static get __componentName() {\n    return 'Row';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      direction: 'row'\n    };\n  }\n\n  static get properties() {\n    return [\n      ...super.properties,\n      'lazyScroll',\n      'startLazyScrollIndex',\n      'stopLazyScrollIndex'\n    ];\n  }\n\n  // Since this is a Row, scrolling should be done only when focused item (this.selected) is fully visible horizontally\n  // as scrolling is happening along X axis. So, if we have a row that has height greater than screen's height, it still\n  // can scroll. Method below the '_isComponentHorizontallyVisible' does not take \"full\" visibility into an account.\n  // At the same time, 'isFullyOnScreen' method on the Base class or utils method checks that element is fully visible\n  // both vertically and horizontally.\n  // At a later time, we should investigate this further.\n  _isOnScreenForScrolling(child) {\n    if (!child) return false;\n\n    const x = getX(child);\n    if (!Number.isFinite(x)) return false;\n    const itemsTransitionX = this.getTransitionXTargetValue();\n    const rowX = this.core.renderContext.px;\n    let itemX = rowX + itemsTransitionX + x;\n    let xModifier;\n\n    // This section here takes the difference between a possible target value\n    // and subtracts it from the current child x. That value then is subtracted from the initial\n    // itemX value calculated on the core renderContext px value to more accurately\n    // calculate the item's location on screen when it's own x value will be updating.\n    if (child.transition('x')) {\n      xModifier = child.x - child.transition('x').targetValue;\n      itemX = itemX - xModifier;\n    }\n    return itemX >= rowX && itemX + child.w <= rowX + this.w;\n  }\n\n  _shouldScroll() {\n    const prevIndex = this.Items.childList.getIndex(this.prevSelected);\n    if (\n      this.alwaysScroll ||\n      (this.lazyScroll &&\n        (this.selectedIndex < this.startLazyScrollIndex ||\n          this.selectedIndex > this.stopLazyScrollIndex ||\n          (prevIndex < this.startLazyScrollIndex &&\n            this.selectedIndex === this.startLazyScrollIndex) ||\n          (prevIndex > this.stopLazyScrollIndex &&\n            this.selectedIndex === this.stopLazyScrollIndex)))\n    ) {\n      return true;\n    }\n\n    let shouldScroll = this._selectedPastAdded;\n    if (!shouldScroll && !this.neverScroll) {\n      const isCompletelyOnScreen = this._isOnScreenForScrolling(this.selected);\n\n      if (this.lazyScroll) {\n        shouldScroll = !isCompletelyOnScreen;\n      } else {\n        const lastChild = this.Items.childList.last;\n        shouldScroll =\n          lastChild &&\n          (this.shouldScrollLeft() ||\n            this.shouldScrollRight() ||\n            !isCompletelyOnScreen);\n      }\n    }\n    return shouldScroll;\n  }\n\n  _getPrependedOffset() {\n    this._selectedPastAdded = false;\n    return this.Items.x - this._totalAddedWidth;\n  }\n\n  _getLazyScrollX(prev) {\n    const prevIndex = this.Items.childList.getIndex(this.prevSelected);\n    if (this._selectedPastAdded) {\n      return this._getPrependedOffset();\n    }\n\n    if (this.selectedIndex <= this.startLazyScrollIndex) {\n      // if navigating on items before start lazy scroll index, use normal scroll logic\n      return this._getScrollX();\n    } else if (\n      this.selectedIndex >= this.stopLazyScrollIndex &&\n      this.selectedIndex < prevIndex\n    ) {\n      // if navigating left on items after stop lazy scroll index\n      const currItemsX = this.Items.x;\n\n      return (\n        currItemsX +\n        (this.prevSelected.w +\n          this.style.itemSpacing +\n          (this.selected.extraItemSpacing || 0))\n      );\n    } else if (prev && this.selectedIndex > this.stopLazyScrollIndex) {\n      // if navigating right on items after stop lazy scroll index\n      const prevX = prev.x;\n\n      return (\n        -prevX +\n        this.prevSelected.w +\n        this.style.itemSpacing +\n        (this.selected.extraItemSpacing || 0) +\n        this.itemPosX\n      );\n    } else if (prev) {\n      // otherwise, no start/stop indexes, perform normal lazy scroll\n      let itemsContainerX;\n      const prevIndex = this.Items.childList.getIndex(prev);\n\n      const selectedX = this.selected.x;\n\n      if (prevIndex === -1) {\n        // No matches found in childList, start set x to 0\n        return;\n      }\n      if (prevIndex > this.selectedIndex) {\n        itemsContainerX = -selectedX + this.itemPosX;\n      } else if (prevIndex < this.selectedIndex) {\n        itemsContainerX = this.w - selectedX - this.selected.w;\n      }\n\n      return itemsContainerX;\n    }\n    // if no prev item or start/stop index, default to normal scroll logic\n    return this._getScrollX();\n  }\n\n  _getScrollX() {\n    if (this._selectedPastAdded) {\n      return this._getPrependedOffset();\n    }\n    let itemsContainerX;\n    let itemIndex = this.selectedIndex - this.scrollIndex;\n    itemIndex = itemIndex < 0 ? 0 : itemIndex;\n    if (itemIndex === this._firstFocusableIndex()) {\n      itemIndex = 0;\n    }\n\n    if (this.Items.children[itemIndex]) {\n      itemsContainerX = this.Items.children[itemIndex].transition('x')\n        ? -this.Items.children[itemIndex].transition('x').targetValue +\n          this.itemPosX\n        : -this.Items.children[itemIndex].x + this.itemPosX;\n    }\n\n    return itemsContainerX;\n  }\n\n  _render(next, prev) {\n    if (this.plinko && prev && prev.selected) {\n      next.selectedIndex = this._getIndexOfItemNear(next, prev);\n    }\n\n    this._prevLastScrollIndex = this._lastScrollIndex;\n\n    let itemsContainerX;\n    if (!this.Items.children.length) {\n      itemsContainerX = this.itemPosX;\n    } else if (this._shouldScroll()) {\n      itemsContainerX =\n        this.lazyScroll && prev\n          ? this._getLazyScrollX(prev)\n          : this._getScrollX();\n    }\n\n    if (itemsContainerX !== undefined) {\n      this.updatePositionOnAxis(this.Items, itemsContainerX);\n    }\n\n    this.onScreenEffect(this.onScreenItems);\n  }\n\n  _performRender() {\n    this._render(this.selected, this.prevSelected);\n  }\n\n  _isOnScreen(child) {\n    if (!child) return false;\n\n    return this._isComponentHorizontallyVisible(child);\n  }\n\n  // can be overridden\n  onScreenEffect() {}\n\n  get _totalAddedWidth() {\n    return this._totalAddedLength;\n  }\n\n  _getLazyScroll() {\n    if (this.alwaysScroll) {\n      return false;\n    }\n    return this._lazyScroll !== undefined\n      ? this._lazyScroll\n      : this.style.lazyScroll;\n  }\n\n  _getNeverScroll() {\n    if (this.alwaysScroll || this.lazyScroll) {\n      return false;\n    }\n    return this._neverScroll !== undefined\n      ? this._neverScroll\n      : this.style.neverScroll;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  backgroundColor: theme.color.interactiveNeutral,\n  radius: theme.radius.md,\n  animation: {}\n});\n\nexport const tone = theme => ({\n  inverse: {\n    backgroundColor: theme.color.interactiveInverse\n  }\n});\n\nexport const mode = theme => ({\n  focused: {\n    backgroundColor: theme.color.interactiveNeutralFocus,\n    tone: {\n      inverse: {\n        backgroundColor: theme.color.interactiveInverseFocus\n      }\n    }\n  },\n  disabled: {\n    backgroundColor: theme.color.fillNeutralDisabled\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getMaxRoundRadius } from '../../utils';\nimport Base from '../Base';\nimport * as styles from './Surface.styles';\nimport lng from '@lightningjs/core';\n\nexport default class Surface extends Base {\n  static _template() {\n    return {\n      Background: {}\n    };\n  }\n\n  static get __componentName() {\n    return 'Surface';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [];\n  }\n\n  static get tags() {\n    return ['Background'];\n  }\n\n  get innerH() {\n    return this.h;\n  }\n\n  get innerW() {\n    return this.w;\n  }\n\n  get _radius() {\n    return getMaxRoundRadius(this.style.radius, this.w, this.h);\n  }\n\n  _update() {\n    this._updateLayout();\n    this._updateScale();\n  }\n\n  _updateLayout() {\n    this._Background.patch({\n      texture: lng.Tools.getRoundRect(\n        this.innerW - 2, // Reference the underscored values here in cause the h or w getters need to be overwritten for alignment - see Tile\n        this.innerH - 2,\n        this._radius,\n        0,\n        null,\n        true,\n        this.style.backgroundColor\n      )\n    });\n  }\n\n  _updateScale() {\n    const scale = this._isFocusedMode\n      ? this.getFocusScale(this.w, this.h)\n      : this.getUnfocusScale(this.w, this.h);\n\n    this.applySmooth(this, { scale }, { scale: [scale, this.style.animation] });\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  offsetY: theme.spacer.xxs,\n  offsetX: 0,\n  textStyle: theme.typography.body1\n});\n\nexport const tone = theme => ({\n  neutral: {\n    textStyle: { textColor: theme.color.fillNeutral }\n  },\n  inverse: {\n    textStyle: { textColor: theme.color.fillInverse }\n  },\n  brand: {\n    textStyle: { textColor: theme.color.fillBrand }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  textY: 0,\n  iconWidth: theme.spacer.xxl + theme.spacer.xs,\n  iconHeight: theme.spacer.xxl + theme.spacer.xs,\n  contentSpacing: theme.spacer.md,\n  marginBottom: 0,\n  strikethroughRatio: 0.08,\n  strikethroughColor: theme.color.textNeutral,\n  textStyle: {\n    ...theme.typography.body1\n  },\n  maxLines: 1,\n  justify: 'flex-start'\n});\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport lng from '@lightningjs/core';\nimport Icon from '../Icon';\nimport Badge from '../Badge';\nimport { parseInlineContent, flatten, measureTextWidth } from '../../utils';\nimport Base from '../Base';\nimport * as styles from './InlineContent.styles';\n\nconst isText = item => typeof item === 'string' || !!item.text;\nconst isIcon = item => !!item.icon;\nconst isBadge = item => !!item.badge;\n\nexport default class InlineContent extends Base {\n  static get properties() {\n    return [\n      'content',\n      'contentProperties',\n      'badgeY',\n      'badgeProperties',\n      'justify',\n      'contentWrap',\n      'customStyleMappings',\n      'maxLines',\n      'maxLinesSuffix'\n    ];\n  }\n\n  static get __componentName() {\n    return 'InlineContent';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'iconH', curr: 'iconHeight' },\n      { prev: 'iconW', curr: 'iconWidth' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    // use the same default value as Lightning's Text Texture default\n    this._maxLinesSuffix = '..';\n  }\n\n  _update() {\n    this._updateContent();\n    this._waitForComponentLoad();\n  }\n\n  _updateContent() {\n    this.childList.clear();\n\n    // if wrapping with max lines, hide content until it has rerendered with maxLines and truncation calculated\n    if (this._shouldTruncate) {\n      this.alpha = 0.001;\n    }\n    if (this._parsedContent && this._parsedContent.length) {\n      this.patch({\n        flex: {\n          direction: 'row',\n          wrap: !!this.contentWrap,\n          justifyContent:\n            this.justify != undefined ? this.justify : this.style.justify\n        }\n      });\n\n      this._parsedContent.forEach((item, index) => {\n        const isLast = index === this._parsedContent.length - 1;\n        const base = {\n          flexItem: {\n            ...this.contentProperties,\n            marginBottom: isLast ? 0 : this._marginBottom,\n            marginRight: isLast\n              ? 0\n              : this.contentProperties.marginRight || this.style.contentSpacing\n          }\n        };\n\n        // text not separated by icons/badges are grouped together\n        if (isText(item)) {\n          const nextItem = this._parsedContent[index + 1];\n          if (\n            (nextItem && isText(nextItem)) ||\n            (this.contentWrap &&\n              nextItem &&\n              nextItem.newline &&\n              this._parsedContent[index + 2] &&\n              isText(this._parsedContent[index + 2]))\n          ) {\n            base.flexItem.marginRight = 0;\n          }\n          this.childList.a(this._createText(base, item));\n        } else if (isIcon(item)) {\n          this.childList.a(this._createIcon(base, item));\n        } else if (isBadge(item)) {\n          this.childList.a(this._createBadge(base, item.badge));\n        } else if (item.newline && this.contentWrap) {\n          this.childList.a({ h: 0, w: this.w });\n        }\n      });\n    }\n  }\n\n  _waitForComponentLoad() {\n    if (this.children.length) {\n      Promise.all(\n        this.children.map(\n          child =>\n            new Promise(resolve => {\n              // resolve immediately for new line elements since they do not render a texture\n              if (child.h === 0 && child.w === this.w) {\n                resolve();\n              } else {\n                child.on('txLoaded', resolve);\n              }\n            })\n        )\n      ).finally(() => this._contentLoaded());\n    } else {\n      this.h = 0;\n      this._contentLoaded();\n    }\n  }\n\n  _notifyAncestors() {\n    this.fireAncestors('$loadedInlineContent', this);\n    this.signal('loadedInlineContent', this.finalW, this.multiLineHeight);\n  }\n\n  _contentLoaded() {\n    // TODO: FIX --figure out an alternative to using setTimeout\n    // perhaps have to wait until Lightning Flexboxes can emit a signal (like textures) when they've finished loading\n    if (this.children.length) {\n      setTimeout(() => {\n        this.multiLineHeight = this.finalH;\n        if (\n          this.flex &&\n          this.flex._layout &&\n          this.flex._layout._lineLayouter &&\n          this.flex._layout._lineLayouter._lines\n        ) {\n          let totalHeight = 0;\n          this.flex._layout._lineLayouter._lines.forEach(line => {\n            totalHeight += Object.entries(line.items)\n              .slice(line.startIndex, line.endIndex + 1)\n              .sort((a, b) => {\n                return b[1].h - a[1].h;\n              })[0][1].h;\n          });\n          this.multiLineHeight = totalHeight;\n\n          if (this._shouldTruncate) {\n            this._renderMaxLines();\n          }\n\n          this._notifyAncestors();\n        } else {\n          this._contentLoaded();\n        }\n      }, 10);\n    } else {\n      this._notifyAncestors();\n    }\n  }\n\n  _renderMaxLines() {\n    const childrenDimensions = this._calcChildrenDimensions();\n\n    this.childList.clear();\n    let renderedLastElement = false;\n    childrenDimensions.forEach((child, index) => {\n      if (renderedLastElement) {\n        return;\n      }\n\n      const nextChild = childrenDimensions[index + 1];\n\n      if (!nextChild) {\n        this.childList.add(child.component);\n        return;\n      }\n\n      const isOnLastLine = child.line === this.maxLines;\n\n      const isLastBeforeMaxLines =\n        isOnLastLine && nextChild.line > this.maxLines;\n\n      const canRenderLastWithSuffix =\n        isLastBeforeMaxLines && child.hasSpaceForSuffix;\n\n      const isLastWithSpaceForSuffix =\n        isOnLastLine && child.hasSpaceForSuffix && !nextChild.hasSpaceForSuffix;\n\n      /**\n       * This is the last element to render, with a suffix, if the element is:\n       * - the last element to render (and has not reached the maxLines yet)\n       * - the last element that fits within maxLines, including with the width of the maxLinesSuffix appended to it\n       */\n      const isLast =\n        !nextChild || canRenderLastWithSuffix || isLastWithSpaceForSuffix;\n\n      if (child.line <= this.maxLines) {\n        if (isLast && index !== childrenDimensions.length - 1) {\n          this.childList.add(this._addSuffix(child));\n          renderedLastElement = true;\n        } else {\n          this.childList.add(child.component);\n        }\n      }\n    });\n    this.alpha = 1;\n  }\n\n  _calcChildrenDimensions() {\n    const suffixW = measureTextWidth({\n      ...this.style.textStyle,\n      text: this.maxLinesSuffix\n    });\n    let contentEndX = 0;\n    let line = 1;\n\n    return this.children.reduce((acc, child) => {\n      const component = child;\n      let type, content, w;\n      const isNewLineElement = child.w == this.w && child.h === 0;\n\n      if (isNewLineElement) {\n        line++;\n        contentEndX = 0;\n        const data = {\n          type: 'linebreak',\n          component,\n          content,\n          line,\n          hasSpaceForSuffix: true\n        };\n\n        acc.push(data);\n        return acc;\n      }\n\n      if (isText(child)) {\n        type = 'text';\n        content = child.text.text;\n        w = child.texture.getRenderWidth();\n      } else if (isIcon(child)) {\n        type = 'icon';\n        w = child.w;\n      } else if (child.constructor.__componentName === 'Badge') {\n        type = 'badge';\n        w = child.w;\n      }\n\n      contentEndX += w;\n      contentEndX += child.flexItem.marginRight;\n\n      if (Math.ceil(contentEndX) >= this.w) {\n        line++;\n        contentEndX = w;\n      }\n\n      const hasSpaceForSuffix = Math.ceil(contentEndX) + suffixW <= this.w;\n\n      const data = {\n        type,\n        component,\n        content,\n        line,\n        hasSpaceForSuffix\n      };\n\n      acc.push(data);\n      return acc;\n    }, []);\n  }\n\n  _addSuffix({ type, component, content }) {\n    const negatedRightMargin = component.flexItem.marginRight * -1;\n    let suffix;\n    if (type === 'text') {\n      // We need to grab the current styling of the text to ensure that any\n      // custom styling is applied to the suffix\n      const { fontFace, fontSize, fontStyle, lineHeight, verticalAlign } =\n        component.text;\n      suffix = this._createText(\n        { flexItem: this.contentProperties },\n        {\n          text: `${content.trim()}${this.maxLinesSuffix}`,\n          style: {\n            fontFace,\n            fontSize,\n            fontStyle,\n            lineHeight,\n            verticalAlign\n          }\n        }\n      );\n    } else {\n      this.childList.add(component);\n      suffix = this._createText(\n        {\n          flexItem: {\n            ...this.contentProperties,\n            marginLeft: negatedRightMargin\n          }\n        },\n        this.maxLinesSuffix\n      );\n    }\n    return suffix;\n  }\n\n  _createIcon(base, iconProps) {\n    const y =\n      (this.textHeight > this.style.textStyle.lineHeight\n        ? this.textHeight\n        : this.style.textStyle.lineHeight) - this.style.iconHeight;\n    return {\n      ...base,\n      type: Icon,\n      y: y,\n      w: this.style.iconWidth,\n      h: this.style.iconHeight,\n      signals: {\n        itemChanged: '_updateIconPosition'\n      },\n      ...iconProps\n    };\n  }\n\n  _createText(base, text) {\n    const textOverrideStyles =\n      typeof text.style === 'string'\n        ? this.customStyleMappings[text.style]\n        : text.style;\n    const textComponent = {\n      ...base,\n      y: this.textY !== undefined ? this.textY : this.style.textY,\n      h:\n        textOverrideStyles?.lineHeight ||\n        textOverrideStyles?.fontSize ||\n        this.textHeight,\n      text: {\n        ...this.style.textStyle,\n        ...textOverrideStyles,\n        text: text.text || text\n      }\n    };\n    if (textOverrideStyles?.textDecoration === 'line-through') {\n      const textWidth = measureTextWidth({\n        ...this.style.textStyle,\n        ...textOverrideStyles,\n        text: text.text || text\n      });\n      const strikethroughLine = {\n        rect: true,\n        w: textWidth,\n        color:\n          this.style.strikethroughColor ||\n          textOverrideStyles?.textColor ||\n          this.style.textStyle.textColor,\n        h: textComponent.h * this.style.strikethroughRatio,\n        y: textComponent.h / 2,\n        mountY: 1\n      };\n      return {\n        type: lng.Component,\n        w: textWidth + textComponent.flexItem.marginRight,\n        h: textComponent.h,\n        children: [{ ...textComponent }, { ...strikethroughLine }]\n      };\n    }\n    return textComponent;\n  }\n\n  _createBadge(base, badge) {\n    return {\n      ...base,\n      y: this.badgeY || 0,\n      ...this.badgeProperties,\n      type: Badge,\n      title: badge,\n      signals: {\n        loadedBadge: '_loadedBadge'\n      }\n    };\n  }\n\n  _updateIconPosition(icon) {\n    icon.y = this.style.textStyle.lineHeight - icon.h;\n  }\n\n  _loadedBadge(badge) {\n    if (this.badgeY === undefined) {\n      badge.y = this.style.textStyle.lineHeight - badge.h;\n    }\n  }\n\n  /**\n   * RegEx Lookbehinds do not work in WPE Browser, but we want the space\n   * at the end of the previous string to prevent weird wrapping,\n   * so we need to separate on spaces, then re-attach to the previous string\n   *\n   * @param { array } parsedContent\n   *\n   * @return { array }\n   */\n  _formatSpaces(parsedContent) {\n    // retain the white space next to the appropriate word, then filter by the empty string,\n    // otherwise all whitespace is stripped and the flexItem's marginRight adds its own space\n    // which can be a different space size than the text would apply between words\n    const whitespace = /(.+?\\s+)/;\n    return flatten(\n      (parsedContent || []).reduce((acc, item) => {\n        let parsed = item;\n        if (isText(item)) {\n          if (typeof item === 'object') {\n            const formattedWords = item.text\n              .split(whitespace) // split after whitespace character (which adds empty strings)\n              .map(word => word && { ...item, text: word }); // check for empty string before adding\n            acc.push(...formattedWords);\n            return acc;\n          }\n          parsed = item.split(whitespace);\n        }\n        acc.push(parsed);\n        return acc;\n      }, [])\n    )\n      .map((item, index, arr) => {\n        if (item === ' ') return false;\n        if (arr[index + 1] === ' ') return item + ' ';\n        return item;\n      })\n      .filter(Boolean);\n  }\n\n  _setContent(content) {\n    if (content !== this._content) {\n      this._content = content;\n      let parsedContent = this._content;\n      if (content && !Array.isArray(content)) {\n        parsedContent = parseInlineContent(content);\n      }\n\n      this._parsedContent = this._formatSpaces(parsedContent);\n    }\n    return content;\n  }\n\n  _setBadgeProperties(badgeProperties) {\n    if (typeof badgeProperties === 'object') {\n      return badgeProperties;\n    }\n  }\n\n  _getBadgeProperties() {\n    return this._badgeProperties || {};\n  }\n\n  _setContentProperties(contentProperties) {\n    if (typeof contentProperties === 'object') {\n      return contentProperties;\n    }\n  }\n\n  _getContentProperties() {\n    return this._contentProperties || {};\n  }\n\n  _setCustomStyleMappings(customStyleMappings) {\n    if (typeof customStyleMappings === 'object') {\n      return customStyleMappings;\n    }\n  }\n\n  _getCustomStyleMappings() {\n    return this._customStyleMappings || {};\n  }\n\n  _setMaxLines(maxLines) {\n    // only accept positive numbers\n    // round down any decimals to whole numbers\n    return maxLines >= 1 ? Math.floor(maxLines) : 0;\n  }\n\n  get textHeight() {\n    return this.style.textStyle.lineHeight || this.style.textStyle.fontSize;\n  }\n\n  get _marginBottom() {\n    if (this.contentProperties.marginBottom !== undefined) {\n      return this.contentProperties.marginBottom;\n    }\n    if (this.style.marginBottom) {\n      return this.style.marginBottom;\n    }\n    return 0;\n  }\n\n  get _shouldTruncate() {\n    return this.contentWrap && this.maxLines;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n    const announce =\n      this._parsedContent &&\n      this._parsedContent.reduce((announce, item) => {\n        if (typeof item === 'string') {\n          announce += item;\n        } else if (item.announce) {\n          announce += item.announce;\n        } else if (item.text) {\n          announce += item.text;\n          if (item.style?.textDecoration === 'line-through') {\n            announce += 'strikethrough';\n          }\n        } else if (item.title) {\n          announce += item.title;\n        } else if (item.badge) {\n          announce += item.badge;\n        }\n        return announce + ' ';\n      }, '');\n    return announce ? announce.replace(/\\s+(?=\\s)|\\s$/g, '') : '';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  fadeWidth: 100,\n  offset: theme.spacer.xxl,\n  shouldSmooth: false,\n  textStyle: theme.typography.body1\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class FadeShader extends lng.shaders.WebGLDefaultShader {\n  constructor(context) {\n    super(context);\n    this._margin = { left: 0, right: 0 };\n  }\n\n  set positionLeft(v) {\n    this._positionLeft = v;\n  }\n\n  set positionRight(v) {\n    this._positionRight = v;\n  }\n\n  setupUniforms(operation) {\n    super.setupUniforms(operation);\n    const owner = operation.shaderOwner;\n\n    if (this._positionLeft === 0) {\n      this._positionLeft = 0.001;\n    }\n    if (this._positionRight === 0) {\n      this._positionRight = 0.001;\n    }\n\n    const renderPrecision = this.ctx.stage.getRenderPrecision();\n    this._setUniform(\n      'margin',\n      [\n        this._positionLeft * renderPrecision,\n        this._positionRight * renderPrecision\n      ],\n      this.gl.uniform1fv\n    );\n    this._setUniform(\n      'resolution',\n      new Float32Array([\n        owner._w * renderPrecision,\n        owner._h * renderPrecision\n      ]),\n      this.gl.uniform2fv\n    );\n  }\n}\n\nFadeShader.fragmentShaderSource = `\n  #ifdef GL_ES\n  # ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  # else\n  precision lowp float;\n  # endif\n  #endif\n\n  #define PI 3.14159265359\n\n  varying vec2 vTextureCoord;\n  varying vec4 vColor;\n\n  uniform sampler2D uSampler;\n  uniform vec2 resolution;\n  uniform float margin[2];\n\n  void main() {\n      vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n      vec2 halfRes = 0.5 * resolution.xy;\n      vec2 point = vTextureCoord.xy * resolution;\n\n\n      vec2 pos1 = vec2(point.x, point.y);\n      vec2 pos2 = pos1;\n      pos2.x += margin[0];\n\n      vec2 d = pos2 - pos1;\n      float t = dot(pos1, d) / dot(d, d);\n      t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));\n\n      vec2 pos3 = vec2(vTextureCoord.x * resolution.x, vTextureCoord.y);\n      pos3.x -= resolution.x - margin[1];\n      vec2 pos4 = vec2(vTextureCoord.x + margin[1], vTextureCoord.y);\n\n      vec2 d2 = pos4 - pos3;\n      float t2 = dot(pos3, d2) / dot(d2, d2);\n      t2 = smoothstep(0.0, 1.0, clamp(t2, 0.0, 1.0));\n\n      color = mix(vec4(0.0), color, t);\n      color = mix(color, vec4(0.0), t2);\n\n      gl_FragColor = color;\n  }\n`;\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './Marquee.styles';\nimport FadeShader from '../../shaders/FadeShader';\nimport utils from '../../utils';\nimport Base from '../Base';\n\nexport default class Marquee extends Base {\n  static _template() {\n    return {\n      ContentClipper: {\n        boundsMargin: [], // overwrite boundsMargin so text won't de-render if moved offscreen\n        ContentBox: {\n          Content: {},\n          ContentLoopTexture: {}\n        }\n      }\n    };\n  }\n\n  static get __componentName() {\n    return 'Marquee';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get tags() {\n    return [\n      'ContentClipper',\n      {\n        name: 'ContentBox',\n        path: 'ContentClipper.ContentBox'\n      },\n      {\n        name: 'Content',\n        path: 'ContentClipper.ContentBox.Content'\n      },\n      {\n        name: 'ContentLoopTexture',\n        path: 'ContentClipper.ContentBox.ContentLoopTexture'\n      }\n    ];\n  }\n\n  static get properties() {\n    return [\n      'autoStart',\n      'title',\n      'contentTexture',\n      'color',\n      'centerAlign',\n      'delay',\n      'repeat',\n      'overrideLoopX'\n    ];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'fadeW', curr: 'fadeWidth' }];\n  }\n\n  _construct() {\n    super._construct();\n    this._scrolling = false;\n    this._autoStart = false;\n    this._centerAlign = false;\n  }\n\n  _init() {\n    this._Content.on('txLoaded', this._updateContentTexture.bind(this));\n    super._init();\n  }\n\n  _updateContentTexture() {\n    const restartScrolling = this._restartScrolling;\n    this.stopScrolling();\n\n    if (!this._currentTexture.h) {\n      this._ContentClipper.h =\n        this._currentTexture.text && this._currentTexture.text.lineHeight\n          ? this._currentTexture.text.lineHeight\n          : this._Content.finalH;\n    }\n    // in case the metadata width gets larger on focus and the text goes from being clipped to not\n    if (this._shouldClip) {\n      this._updateShader();\n    } else {\n      this._ContentClipper.shader = null;\n      this._positionTexture();\n    }\n\n    restartScrolling && this.startScrolling();\n    this.signal('marqueeContentLoaded');\n  }\n\n  _update() {\n    this._updateColor();\n    this._updateTexture();\n    this._updateShader();\n    this._restartScrolling && this.startScrolling();\n  }\n\n  get _restartScrolling() {\n    return this.autoStart || this._scrolling || this._shouldTryScrolling;\n  }\n\n  _updateColor() {\n    if (this.color) {\n      this._Content.smooth = { color: utils.getValidColor(this.color) };\n    }\n  }\n\n  get _currentTexture() {\n    return this._Content.text || this._Content.texture || {};\n  }\n\n  _updateTexture() {\n    const content = { rtt: true };\n    if (this.contentTexture) {\n      content.texture = this.contentTexture;\n    } else if (this.title) {\n      content.text = {\n        ...this.style.textStyle,\n        ...this.title,\n        text: this.textContent\n      };\n    }\n\n    this.patch({\n      ContentClipper: {\n        w: this.w + 14,\n        ContentBox: {\n          Content: content,\n          ContentLoopTexture: {}\n        }\n      }\n    });\n    this.signal('marqueeContentLoaded'); // TODO: Check if this extra signal is needed since the txLoaded event should emit it already?\n  }\n\n  _updateShader() {\n    this._ContentClipper.patch({\n      w: this.w > 0 ? this.w + this.style.fadeWidth / 2 : 0,\n      shader: {\n        type: FadeShader,\n        positionLeft: 0,\n        positionRight: this.style.fadeWidth\n      },\n      rtt: true\n    });\n  }\n\n  _updateAnimation() {\n    this._scrollAnimation && this._scrollAnimation.stopNow();\n    this._scrollAnimation = this.animation({\n      duration: this._loopWidth / 50,\n      delay: isNaN(this.delay) ? 1.5 : this.delay,\n      repeat: isNaN(this.repeat) ? -1 : this.repeat,\n      actions: [\n        {\n          t: 'ContentBox',\n          p: 'x',\n          v: {\n            sm: 0,\n            0: { v: 0 },\n            0.5: { v: -(this._loopWidth + this.style.offset) }\n          }\n        },\n        {\n          t: 'ContentClipper',\n          p: 'shader.positionLeft',\n          v: {\n            sm: 0,\n            0: { v: 0 },\n            0.1: { v: this.style.fadeWidth },\n            0.4: { v: this.style.fadeWidth },\n            0.5: { v: 0 }\n          }\n        }\n      ]\n    });\n  }\n\n  _positionTexture() {\n    const x = this._shouldCenter() ? (this.w - this._textRenderedW) / 2 : 0;\n    if (this.style.shouldSmooth) {\n      this._ContentBox.smooth = { x };\n    } else {\n      this._ContentBox.x = x;\n    }\n  }\n\n  startScrolling() {\n    this._Content.off('txLoaded', this.startScrolling.bind(this));\n\n    this._shouldTryScrolling = true;\n    if (this._textRenderedW === 0) {\n      // can switch to .once in LUI5.0 requiring higher Lightning Core version\n      this._Content.on('txLoaded', this.startScrolling.bind(this));\n    }\n    if (this._shouldClip) {\n      this._scrolling = true;\n      this._ContentLoopTexture.x = this._loopWidth + this.style.offset;\n      this._ContentLoopTexture.texture = this._Content.getTexture();\n      this._updateAnimation();\n      this._scrollAnimation.start();\n    } else {\n      this._scrolling = false;\n    }\n  }\n\n  stopScrolling() {\n    this._shouldTryScrolling = false;\n    this._scrolling = false;\n    if (this._scrollAnimation) {\n      this._scrollAnimation.stopNow();\n      this._ContentLoopTexture.texture = null;\n    }\n  }\n\n  get _shouldClip() {\n    // using fadeWidth / 4 so that if something like the last character is slightly\n    // faded out but still visible, we don't unnecessarily scroll\n    return this._textRenderedW > this.w - this.style.fadeWidth / 4;\n  }\n\n  _shouldCenter() {\n    return (\n      this._centerAlign ||\n      (this._Content.text && this._Content.text.textAlign === 'center')\n    );\n  }\n\n  _setAutoStart(autoStart) {\n    // if the component is changed from  autoStarting to not,\n    // cancel the current scrolling behavior,\n    // otherwise the component can continue to scroll from its previous state\n    if (this.autoStart && !autoStart) {\n      // Calling this ensures that the animation is stopped, and the texture\n      // is properly positioned if it needs to be centered. Otherwise, if it\n      // is un-clipped text, it is positioned at 0.\n      this._updateContentTexture();\n    }\n    return autoStart;\n  }\n\n  _setCenterAlign(center) {\n    // The Content texture needs to be updated if centerAlign\n    // is changed, but we need the new value first.\n    this._centerAlign = center;\n    this._updateContentTexture();\n    return center;\n  }\n\n  get textContent() {\n    return this.title?.text ?? this.title ?? '';\n  }\n\n  get _loopWidth() {\n    return this.overrideLoopX || this._textRenderedW;\n  }\n\n  get _textRenderedW() {\n    return this._Content.renderWidth;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this.title && this.title.text);\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport * as styles from './TextBox.styles';\nimport Base from '../Base';\nimport InlineContent from '../InlineContent';\nimport Marquee from '../Marquee';\nimport context from '../../globals/context/index';\nimport utils from '../../utils';\n\n/**\n *\n * Get defaults directly from @lightningjs/core to ensure correct fallback values\n *\n */\nconst lightningTextDefaults = Object.entries(\n  Object.getOwnPropertyDescriptors(lng.textures.TextTexture.prototype)\n).reduce((acc, [prop]) => {\n  const value = lng.textures.TextTexture.prototype[prop];\n  if (prop.startsWith('_') || ['undefined', 'function'].includes(typeof value))\n    return acc;\n  return {\n    [prop]: value,\n    ...acc\n  };\n}, {});\n\nexport default class TextBox extends Base {\n  static _template() {\n    return {\n      alpha: 0.001\n    };\n  }\n\n  static get __componentName() {\n    return 'TextBox';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get tags() {\n    return ['InlineContent', 'Marquee', 'Text'];\n  }\n\n  static get properties() {\n    return [\n      ...InlineContent.properties,\n      'content',\n      'fixed',\n      'marquee',\n      'marqueeProps',\n      'hideOnLoad'\n    ];\n  }\n\n  _setDimensions(w, h) {\n    let width = w;\n    let height = h;\n    if (!this._isInlineContent) {\n      width = this._Text.texture.getRenderWidth();\n      height = this._Text.texture.getRenderHeight();\n    }\n\n    const sizeChanged = this.w !== width || this.h !== height;\n\n    if (width && height && sizeChanged) {\n      this.h = height;\n      if (!this.fixed) {\n        this.w = width;\n      }\n\n      // Position updates can produce flash of poorly positioned content, hide the element until measurements are made.\n      if (!this.hideOnLoad && this.alpha < 1) {\n        this.alpha = 1;\n      }\n\n      this._notifyAncestors();\n    }\n  }\n\n  _setContent(content) {\n    this._isInlineContent = false;\n    if (Array.isArray(content) || utils.isMarkupString(content)) {\n      this._isInlineContent = true;\n    }\n    if ('string' !== typeof content && !this._isInlineContent) {\n      return '';\n    }\n    return content;\n  }\n\n  get title() {\n    return this._content;\n  }\n\n  _notifyAncestors(w = this.w, h = this.h) {\n    this.fireAncestors('$itemChanged');\n    this.signal('textBoxChanged', { w, h });\n  }\n\n  _construct() {\n    super._construct();\n    this._marqueeContentListenerAttached = false;\n    this._marqueeOverrideLoopX = undefined;\n    this._resetMarqueePromise();\n  }\n\n  _update() {\n    if (!this.content) {\n      // If content is not defined hide the component, but do NOT set visibility\n      // as a parent component may need to control that (i.e. Control Button)\n\n      // guard to make sure _notifyAncestors is not called numerous times for components like Input\n      if (this._Text || this._InlineContent) {\n        this.w = this.h = 0;\n        this._notifyAncestors(); // need to alert parents that the width and height are now 0\n        // makes sure that elements are removed\n        this._updateMarquee();\n        this.patch({ Text: undefined, InlineContent: undefined });\n      }\n\n      return;\n    }\n    this._isInlineContent ? this._updateInlineContent() : this._updateText();\n    this._updateMarquee();\n  }\n\n  _updateInlineContent() {\n    this.patch({ Text: undefined });\n\n    const inlineContentPatch = InlineContent.properties.reduce(\n      (acc, prop) => {\n        if (this[prop] != undefined) {\n          acc[prop] = this[prop];\n        }\n        return acc;\n      },\n      // ensure all styles are passed down as well\n      {\n        style: {\n          ...this.style,\n          textStyle: this._textStyleSet\n        }\n      }\n    );\n\n    if (this._textStyleSet.wordWrapWidth) {\n      inlineContentPatch.w = this._textStyleSet.wordWrapWidth;\n      inlineContentPatch.rtt = true;\n    }\n    if (this._textStyleSet.maxLines) {\n      inlineContentPatch.maxLines = this._textStyleSet.maxLines;\n    }\n    if (this._textStyleSet.maxLinesSuffix) {\n      inlineContentPatch.maxLinesSuffix = this._textStyleSet.maxLinesSuffix;\n    }\n\n    this.patch({\n      alpha: 1,\n      InlineContent: {\n        type: InlineContent,\n        w: this.w,\n        ...inlineContentPatch,\n        signals: {\n          loadedInlineContent: '_setDimensions'\n        }\n      }\n    });\n  }\n\n  _updateText() {\n    this.patch({ InlineContent: undefined });\n\n    if (!this._Text) {\n      this.patch({ Text: {} });\n      this._Text.on('txLoaded', this._setDimensions.bind(this));\n    }\n\n    const fontStyle = this._textStyleSet;\n\n    if (this._Text) {\n      this._Text.patch({\n        y: this.style.offsetY,\n        x: this.style.offsetX,\n        text: {\n          ...lightningTextDefaults, // order matters this should always be first\n          ...fontStyle\n        }\n      });\n    }\n  }\n\n  // keep this out of the update lifecycle\n  set marqueeOverrideLoopX(v) {\n    this._marqueeOverrideLoopX = v;\n    if (this._Marquee) this._Marquee.overrideLoopX = this._marqueeOverrideLoopX;\n    this._resolveAwaitMarqueeOverrideX();\n  }\n\n  get marqueeOverrideLoopX() {\n    return this._marqueeOverrideLoopX;\n  }\n\n  _resetMarqueePromise() {\n    this._awaitMarqueeOverrideX = new Promise((resolve, reject) => {\n      this._resolveAwaitMarqueeOverrideX = resolve;\n      this._rejectAwaitMarqueeOverrideX = reject;\n    });\n  }\n\n  _loadedMarqueeContent() {\n    this.signal('willMarquee', this._Marquee);\n  }\n\n  _updateMarquee() {\n    if (this._Marquee && !this.marquee) {\n      this._toggleMarquee(this._contentTag);\n    }\n\n    if (this.marquee) {\n      this._resetMarqueePromise();\n      const marqueePatch = {\n        ...this.marqueeProps,\n        w: this._textStyleSet.wordWrapWidth || this.w,\n        h: this.h,\n        y: this.style.offsetY,\n        x: this.style.offsetX,\n        signals: {\n          marqueeContentLoaded: '_loadedMarqueeContent'\n        }\n      };\n\n      if (!this._Marquee) {\n        marqueePatch.type = Marquee;\n      }\n\n      if (this._isInlineContent) {\n        this._InlineContent.w = 0; // ensure we're copying the full, unwrapped inlineContent\n        marqueePatch.title = undefined;\n        marqueePatch.contentTexture = this._contentTag.getTexture();\n        marqueePatch.w = this._textStyleSet.wordWrapWidth || this.w;\n      } else {\n        marqueePatch.contentTexture = undefined;\n        marqueePatch.title = {\n          text: this._contentTag.text.text,\n          ...this._textStyleSet,\n          wordWrapWidth: 0, // ensures that the text will marquee and not wrap\n          maxLines: 1\n        };\n      }\n\n      this.patch({\n        Marquee: marqueePatch\n      });\n      if (!this._marqueeContentListenerAttached) {\n        this._marqueeContentListenerAttached = true;\n      }\n      if ('undefined' !== typeof this._marqueeOverrideLoopX) {\n        this._awaitMarqueeOverrideX.then(() => {\n          this._toggleMarquee(this._contentTag);\n        });\n      } else {\n        this._toggleMarquee(this._contentTag);\n      }\n    }\n  }\n\n  _getMarqueeProps() {\n    return this._marqueeProps ?? {};\n  }\n\n  get _textStyleSet() {\n    const fontStyle = {\n      ...this.theme.typography.body1,\n      ...(null !== this.style.textStyle &&\n      'object' === typeof this.style.textStyle &&\n      Object.keys(this.style.textStyle)\n        ? this.style.textStyle\n        : this.theme.typography[this.style.textStyle])\n    };\n\n    this.constructor.properties.forEach(prop => {\n      if ('fontStyle' !== prop && 'undefined' !== typeof this[`_${prop}`]) {\n        const key = 'content' === prop ? 'text' : prop;\n        fontStyle[key] = this[`_${prop}`];\n      }\n    });\n\n    if (\n      this.w &&\n      !this._isInlineContent &&\n      !this.style.textStyle.wordWrapWidth &&\n      this.fixed\n    ) {\n      fontStyle.wordWrapWidth = this.w;\n    }\n\n    return fontStyle;\n  }\n\n  get _contentTag() {\n    return this._isInlineContent ? this._InlineContent : this._Text;\n  }\n\n  _toggleMarquee(contentTag) {\n    // do not just return if there is no contentTag, we may still need to alpha the Marquee\n    if (this.marquee) {\n      if (contentTag) {\n        contentTag.alpha = 0.001;\n      }\n      if (this._Marquee) {\n        this._Marquee.alpha = 1;\n        this._Marquee.startScrolling();\n      }\n    } else {\n      if (contentTag) {\n        contentTag.alpha = 1;\n      }\n      if (this._Marquee) {\n        this._Marquee.alpha = 0.001;\n        this._Marquee.stopScrolling();\n      }\n    }\n  }\n\n  toggleMarquee() {\n    this._toggleMarquee(this._contentTag);\n  }\n\n  get announce() {\n    return (\n      this._announce ||\n      (this._isInlineContent && this._InlineContent\n        ? this._InlineContent.announce\n        : this.content)\n    );\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  set smooth(v) {\n    context.warn(\n      'warning: value smoothing is known to cause bugs with the TextBox - patch updated values instead.'\n    );\n    super.smooth = v;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './Button.styles';\nimport Row from '../Row';\nimport Surface from '../Surface';\nimport TextBox from '../TextBox'; // There seams to be some issue with the circular dependency here\n\n/**\n * Button Component\n *\n * Generic Button Component that handles setting text icon and checkbox\n */\nexport default class Button extends Surface {\n  static get __componentName() {\n    return 'Button';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return ['fixed', 'justify', 'prefix', 'suffix', 'title'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'Content',\n      { name: 'TextWrapper', path: 'Content.TextWrapper' },\n      { name: 'Title', path: 'Content.TextWrapper.Title' },\n      { name: 'Prefix', path: 'Content.Prefix' },\n      { name: 'Suffix', path: 'Content.Suffix' }\n    ];\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Content: {\n        mount: 0.5,\n        x: w => w / 2,\n        y: h => h / 2,\n        zIndex: 2 // ensure content (title) is rendered above Surface Background\n      }\n    };\n  }\n\n  _update() {\n    this._updatePrefix();\n    this._updateTitle();\n    this._updateSuffix();\n    this._updateAllPositioning();\n    this._updateTruncation();\n  }\n\n  _updateAllPositioning() {\n    this._updatePositions();\n    this._updateContentDimensions();\n    this._updateSurfaceDimensions();\n    this._updateContentPosition();\n    // delaying the super._update call so we update the surface sizing after the button has finished updating\n    super._update();\n  }\n\n  $itemChanged() {\n    this._updateAllPositioning();\n    this._updateTruncation();\n  }\n\n  _onTitleTextBoxChanged() {\n    this._updateAllPositioning();\n  }\n\n  _updatePositions() {\n    if (this._hasPrefix && this._Prefix !== undefined) {\n      this._Prefix.x = this._prefixX;\n    }\n    if (this._hasTitle) {\n      this._TextWrapper.x = this._titleX;\n    }\n    if (this._hasSuffix && this._Suffix !== undefined) {\n      this._Suffix.x = this._suffixX;\n    }\n  }\n\n  _updatePrefix() {\n    const prefixString = JSON.stringify(this.prefix);\n    if (this.prefix) {\n      let prefixPatch = {\n        style: {\n          itemSpacing: this.style.itemSpacing\n        }\n      };\n      if (!this._Prefix) {\n        prefixPatch = {\n          ...this._rowProps,\n          ...prefixPatch\n        };\n      }\n      this._Content.patch({ Prefix: prefixPatch });\n      this._updatePrefixSuffixStyles('prefix');\n    } else {\n      this._Content.patch({ Prefix: undefined });\n    }\n    this._prevPrefix = prefixString;\n  }\n\n  _updatePrefixSuffixStyles(type = 'prefix') {\n    /**\n     * Repatching all items re-renders all the components in the Prefix/Suffix Rows.\n     * This can cause items to shift while their layout in the Row is re-calculated if\n     * any of the items do not have width or height on their initial render (ex. an Icon\n     * does not have width and height until after its texture loads).\n     * If the contents of the Prefix/Suffix are the same components and this update was triggered\n     * from something else (ex. a change in mode), only update the styles applied to the\n     * items in the Prefix (ex. updating the color to the value appropriate to the new mode).\n     */\n    const map = {\n      prefix: {\n        tag: this._Prefix,\n        prop: this.prefix,\n        prevProp: this._prevPrefix\n      },\n      suffix: {\n        tag: this._Suffix,\n        prop: this.suffix,\n        prevProp: this._prevSuffix\n      }\n    };\n    const { tag, prop } = map[type];\n    let { prevProp } = map[type];\n    const propString = JSON.stringify(prop);\n\n    if (propString !== prevProp) {\n      prevProp = propString;\n      tag.items = this._addButtonProps(prop);\n    } else {\n      tag.Items.children.forEach((item, idx) => {\n        item.color = Array.isArray(prop) ? prop[idx].color : prop.color;\n        item.style = {\n          ...item.style,\n          color: this.style.contentColor\n        };\n      });\n    }\n  }\n\n  _updateTitle() {\n    if (this._hasTitle) {\n      let titlePatch = {\n        content: this.title,\n        style: { textStyle: this.style.textStyle }\n      };\n      if (!this._Title) {\n        titlePatch = {\n          type: TextBox,\n          mountY: 0.5,\n          y: h => h / 2,\n          signals: {\n            textBoxChanged: '_onTitleTextBoxChanged'\n          },\n          ...titlePatch\n        };\n      }\n      this._Content.patch({\n        TextWrapper: {\n          mountY: 0.5,\n          Title: titlePatch\n        }\n      });\n    } else {\n      this._Content.patch({ TextWrapper: { Title: undefined } });\n    }\n  }\n\n  _updateSuffix() {\n    if (this.suffix) {\n      let suffixPatch = {\n        style: {\n          itemSpacing: this.style.itemSpacing\n        }\n      };\n      if (!this._Suffix) {\n        suffixPatch = {\n          ...this._rowProps,\n          ...suffixPatch\n        };\n      }\n      this._Content.patch({ Suffix: suffixPatch });\n      this._updatePrefixSuffixStyles('suffix');\n    } else {\n      this._Content.patch({ Suffix: undefined });\n    }\n  }\n\n  _updateTruncation() {\n    /**\n     * needs to run before rest of content updates to prevent a bug causing text\n     * to sometimes truncate and then un-truncate(with no width change) when\n     * toggling fixed after toggling focus\n     */\n    if (this._Title) {\n      this._Title.patch({\n        style: {\n          textStyle: {\n            ...this.style.textStyle,\n            wordWrap: this.fixed,\n            wordWrapWidth: this.fixed ? this._fixedWordWrapWidth : 0\n          }\n        }\n      });\n    }\n  }\n\n  _updateContentDimensions() {\n    const contentDimensionsPatch = {};\n    const y = this.h / 2;\n\n    // reference transition targets to ensure we aren't checking against intermittent values\n    if (this._Content.transition('w').targetValue !== this._contentW) {\n      this._Content.w = this._contentW;\n    }\n\n    if (this._Content.y !== y) {\n      contentDimensionsPatch.y = y;\n    }\n\n    if (Object.keys(contentDimensionsPatch).length > 0) {\n      this._Content.patch(contentDimensionsPatch);\n    }\n  }\n\n  _updateContentPosition() {\n    this._Content.patch(this._contentProps);\n  }\n\n  _updateSurfaceDimensions() {\n    let newWidth = this.w;\n    if (this.fixed) {\n      newWidth = this._w;\n    } else {\n      newWidth = this._calcDynamicWidth();\n    }\n\n    if (newWidth !== this.w) {\n      this.w = newWidth;\n    }\n\n    // In order to ensure the \"hSetByUser\" flag is not set to true,\n    // skip over \"set h\" by directly updating \"_h\"\n    // Using the \"get h\" return statement does not force an update to the inspector,\n    // whereas this will ensure the \"height\" attribute is updated\n    if (!this._hSetByUser && !this.style.h) {\n      this._h = this.style.textStyle.lineHeight + this.style.paddingY * 2;\n    }\n\n    // TODO breaks row resizing if this is wrapped in the width conditional above\n    this.fireAncestors('$itemChanged');\n  }\n\n  _calcDynamicWidth() {\n    // if no title, ignore minWidth and use prefix/suffix width\n    // when the title is collapsed, width should be the same as if there is no title\n    return (!this._hasTitle && (this._hasPrefix || this._hasSuffix)) ||\n      (this._Title &&\n        !this._Title.visible &&\n        (this._hasPrefix || this._hasSuffix))\n      ? this._contentW + this._paddingX\n      : Math.max(this._contentW + this._paddingX, this.style.minWidth);\n  }\n\n  _addButtonProps(arr) {\n    const items = Array.isArray(arr) ? arr : [arr];\n    return items.map(item => ({\n      ...this._buttonProps,\n      ...item,\n      style: {\n        color: this.style.contentColor,\n        ...item.style\n      }\n    }));\n  }\n\n  _getJustify() {\n    return !!this._justify ? this._justify : this.style.justify;\n  }\n\n  get _contentProps() {\n    let mountX;\n    let x;\n\n    switch (this.justify) {\n      case 'left':\n        mountX = 0;\n        x = this._paddingLeft;\n        break;\n      case 'right':\n        mountX = 1;\n        x = this.w - this._paddingRight;\n        break;\n      case 'center':\n      default:\n        mountX = 0.5;\n        x = this.w / 2;\n        break;\n    }\n    return { mountX, x };\n  }\n\n  get _buttonProps() {\n    return {\n      centerInParent: true,\n      mode: this.mode\n    };\n  }\n\n  get _hasPrefix() {\n    return !!(this.prefix && Object.keys(this.prefix).length);\n  }\n\n  get _prefixW() {\n    return this._hasPrefix && this._Prefix !== undefined ? this._Prefix.w : 0;\n  }\n\n  get _prefixX() {\n    return 0;\n  }\n\n  get _hasTitle() {\n    return !!this.title;\n  }\n\n  get _titleW() {\n    // get the pre-calculated text width of the title to solve some race condition bugs\n    if (\n      this._hasTitle &&\n      this._Title &&\n      this._Title._Text &&\n      this._Title.visible\n    ) {\n      return this._Title.w;\n    }\n    return 0;\n  }\n\n  get _titleX() {\n    return this._hasPrefix ? this._prefixW + this.style.contentSpacing : 0;\n  }\n\n  get _hasSuffix() {\n    return !!(this.suffix && Object.keys(this.suffix).length);\n  }\n\n  get _suffixW() {\n    return this._hasSuffix && this._Suffix !== undefined ? this._Suffix.w : 0;\n  }\n\n  get _suffixX() {\n    if (this._hasTitle) {\n      return this._titleW + this._TextWrapper.x + this.style.contentSpacing;\n    } else if (this._hasPrefix) {\n      return this._prefixW + this.style.itemSpacing;\n    }\n    return 0;\n  }\n\n  get _contentW() {\n    if (this._hasSuffix) {\n      return this._suffixX + this._suffixW;\n    } else if (this._hasTitle && this._Title && this._Title.visible) {\n      return this._titleX + this._titleW;\n    } else if (this._hasPrefix) {\n      return this._prefixX + this._prefixW;\n    }\n    return 0;\n  }\n\n  get _rowProps() {\n    return {\n      type: Row,\n      mountY: 0.5,\n      autoResizeHeight: true,\n      autoResizeWidth: true\n    };\n  }\n\n  get _totalTitlePaddingX() {\n    let totalTitlePadding = 0;\n    if (this._hasPrefix) {\n      totalTitlePadding += this.style.contentSpacing;\n    }\n    if (this._hasSuffix) {\n      totalTitlePadding += this.style.contentSpacing;\n    }\n    return totalTitlePadding;\n  }\n\n  /**\n   * Button w must be >= nonTextSpace + smallest possible width of truncated\n   * text(width of the first set of characters before a space + width of TextBox.maxLinesSuffix).\n   * Disregarding this results in the contents of the button being a greater width than the\n   * fixed w of the Button(w/o decreasing _paddingX or _totalTitlePadding).\n   */\n  get _fixedWordWrapWidth() {\n    const { w, _paddingX, _prefixW, _suffixW, _totalTitlePaddingX } = this;\n    const nonTextSpace = _paddingX + _prefixW + _suffixW + _totalTitlePaddingX;\n    return Math.max(1, w - nonTextSpace);\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    // TODO - Localization?\n    // Do we need a locale file with\n    // component translations?\n    const announce = [];\n    if (this.title) {\n      announce.push(this.title);\n    }\n    announce.push(this._announceComponentName);\n    if (this._hasPrefix && this._Prefix.items.length) {\n      announce.push(...this._Prefix.items.map(item => item.announce));\n    }\n    if (this._hasSuffix && this._Suffix.items.length) {\n      announce.push(...this._Suffix.items.map(item => item.announce));\n    }\n\n    return announce;\n  }\n\n  get _announceComponentName() {\n    return Button.__componentName;\n  }\n\n  get _paddingX() {\n    return this._paddingLeft + this._paddingRight;\n  }\n\n  get _paddingLeft() {\n    return this._hasTitle ? this.style.paddingX : this.style.paddingXNoTitle;\n  }\n\n  get _paddingRight() {\n    return this._hasTitle ? this.style.paddingX : this.style.paddingXNoTitle;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByColumnSpan } from '../../utils';\n\nexport const base = theme => ({\n  minWidth: getWidthByColumnSpan(theme, 1),\n  paddingX: theme.spacer.xxl,\n  paddingXNoTitle: theme.spacer.lg,\n  paddingY: theme.spacer.lg,\n  textStyle: theme.typography.button2\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Button from './Button';\nimport * as styles from './ButtonSmall.styles';\n\nexport default class ButtonSmall extends Button {\n  static get __componentName() {\n    return 'ButtonSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  height: theme.spacer.xxl * 12,\n  paddingHorizontal: theme.spacer.xl,\n  paddingVertical: theme.spacer.xl,\n  radius: theme.radius.md,\n  titleTextStyle: {\n    ...theme.typography.headline1,\n    wordWrap: true,\n    maxLines: 2,\n    textColor: theme.color.textNeutral\n  },\n  width: utils.getWidthByUpCount(theme, 6)\n});\n\nexport const mode = theme => ({\n  focused: {\n    tone: {\n      neutral: {\n        backgroundColor: theme.color.interactiveNeutralFocusSoft\n      },\n      inverse: {\n        backgroundColor: theme.color.interactiveInverseFocusSoft\n      },\n      brand: {\n        backgroundColor: theme.color.interactiveBrandFocusSoft\n      }\n    }\n  },\n  disabled: {\n    titleTextStyle: { textColor: theme.color.textNeutralDisabled }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './Card.styles';\nimport TextBox from '../TextBox';\nimport Surface from '../Surface';\n\nexport default class Card extends Surface {\n  static get __componentName() {\n    return 'Card';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'title'];\n  }\n\n  static get tags() {\n    return [...super.tags, 'Title'];\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Title: {\n        type: TextBox,\n        signals: {\n          textBoxChanged: '_updatePositions'\n        }\n      }\n    };\n  }\n\n  _update() {\n    super._update();\n    this._updateTitle();\n    this._updatePositions();\n  }\n\n  _updatePositions() {\n    this._updateTitlePosition();\n  }\n\n  _updateTitle() {\n    this._Title.patch({\n      content: this.title,\n      style: {\n        textStyle: {\n          ...this.style.titleTextStyle,\n          wordWrapWidth: this._calculateTextWidth()\n        }\n      }\n    });\n  }\n\n  _calculateTextWidth() {\n    return this.w - this.style.paddingHorizontal * 2;\n  }\n\n  _updateTitlePosition() {\n    this._Title.x = this.style.paddingHorizontal;\n    this._Title.y = this.style.paddingVertical;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Title && this._Title.announce);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  // TODO radius from design or token change\n  titleTextStyle: {\n    ...theme.typography.headline3,\n    wordWrap: true,\n    maxLines: 2,\n    textColor: theme.color.textNeutral\n  },\n  descriptionTextStyle: {\n    ...theme.typography.body2,\n    textColor: theme.color.textNeutral,\n    wordWrap: true,\n    maxLines: 3\n  },\n  detailsTextStyle: {\n    ...theme.typography.body3,\n    textColor: theme.color.textNeutral,\n    wordWrap: true,\n    maxLines: 1\n  }\n});\n\nexport const mode = theme => ({\n  disabled: {\n    descriptionTextStyle: { textColor: theme.color.textNeutralDisabled },\n    detailsTextStyle: { textColor: theme.color.textNeutralDisabled }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Card from './Card';\nimport TextBox from '../TextBox';\nimport * as styles from './CardTitle.styles';\n\nexport default class CardTitle extends Card {\n  static get __componentName() {\n    return 'CardTitle';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get tags() {\n    return [...super.tags, 'Description', 'Details'];\n  }\n\n  static get properties() {\n    return [...super.properties, 'description', 'details'];\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Description: {\n        type: TextBox,\n        signals: {\n          textBoxChanged: '_updatePositions'\n        }\n      },\n      Details: {\n        type: TextBox,\n        mountY: 1\n      }\n    };\n  }\n\n  _update() {\n    super._update();\n    this._updateDescription();\n    this._updateDetails();\n    this._updatePositions();\n  }\n\n  _updatePositions() {\n    super._updatePositions();\n    this._updateDescriptionPosition();\n    this._updateDetailsPosition();\n  }\n\n  _updateDescription() {\n    this._Description.patch({\n      content: this.description,\n      style: {\n        textStyle: {\n          ...this.style.descriptionTextStyle,\n          wordWrapWidth: this._calculateTextWidth()\n        }\n      }\n    });\n  }\n\n  _updateDescriptionPosition() {\n    this._Description.x = this.style.paddingHorizontal;\n    this._Description.y = this.style.paddingVertical + this._Title.h;\n  }\n\n  _updateDetails() {\n    this._Details.patch({\n      content: this.details,\n      style: {\n        textStyle: {\n          ...this.style.detailsTextStyle,\n          wordWrapWidth: this._calculateTextWidth()\n        }\n      }\n    });\n  }\n\n  _updateDetailsPosition() {\n    this._Details.x = this.style.paddingHorizontal;\n    this._Details.y = this.h - this.style.paddingVertical;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        this._Description && this._Description.announce,\n        this._Details && this._Details.announce\n      ]\n    );\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  descriptionTextStyle: {\n    ...theme.typography.body2,\n    textColor: theme.color.textNeutralSecondary,\n    wordWrap: true,\n    maxLines: 8\n  },\n  height: theme.spacer.xxxl * 15,\n  subtitleTextStyle: {\n    ...theme.typography.body3,\n    maxLines: 2,\n    textColor: theme.color.textNeutral,\n    wordWrap: true\n  },\n  width: utils.getWidthByColumnSpan(theme, 4)\n});\n\nexport const mode = theme => ({\n  disabled: {\n    descriptionTextStyle: { textColor: theme.color.textNeutralDisabled },\n    subtitleTextStyle: { textColor: theme.color.textNeutralDisabled }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const size = theme.spacer.xxl;\n  return {\n    alpha: theme.alpha.primary,\n    width: size,\n    height: size,\n    knobHeight: size / 2,\n    knobWidth: size / 2,\n    radius: size / 2,\n    strokeWidth: theme.stroke.sm\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    backgroundColor: theme.color.fillInverseSecondary,\n    backgroundColorChecked: theme.color.fillNeutral,\n    knobColor: theme.color.fillInverse,\n    strokeColor: theme.color.strokeNeutralSecondary\n  },\n  inverse: {\n    backgroundColor: theme.color.fillNeutralSecondary,\n    backgroundColorChecked: theme.color.fillInverse,\n    knobColor: theme.color.fillNeutral,\n    strokeColor: theme.color.strokeInverseSecondary\n  },\n  brand: {\n    backgroundColor: theme.color.fillNeutralSecondary,\n    backgroundColorChecked: theme.color.fillBrand,\n    knobColor: theme.color.fillInverse,\n    strokeColor: theme.color.strokeNeutralSecondary\n  }\n});\n\nexport const mode = theme => ({\n  disabled: { alpha: theme.alpha.inactive }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport lng from '@lightningjs/core';\nimport * as styles from './Radio.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Radio extends Base {\n  static get __componentName() {\n    return 'Radio';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    const center = { mount: 0.5, x: w => w / 2, y: h => h / 2 };\n    return {\n      Body: {\n        rtt: true, // ensures the background color doesn't bleed into the knob when disabled\n        ...center,\n        Knob: {\n          ...center,\n          alpha: 0\n        }\n      },\n      Stroke: center\n    };\n  }\n\n  static get tags() {\n    return ['Knob', 'Body', 'Stroke'];\n  }\n  static get properties() {\n    return ['checked'];\n  }\n\n  _update() {\n    this._updateBody();\n    this._updateStroke();\n    this._updateKnob();\n    if (this._checkedChanged) {\n      this.fireAncestors('$announce', this.announce);\n      this._checkedChanged = false;\n    }\n    this._updateOpacity();\n  }\n\n  _updateBody() {\n    const bodyColor = this.checked\n      ? this.style.backgroundColorChecked\n      : this.style.backgroundColor;\n\n    const width = this.w - this.style.strokeWidth * 2 - 2;\n    const height = this.h - this.style.strokeWidth * 2 - 2;\n\n    this._Body.patch({\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        width,\n        height,\n        getMaxRoundRadius(\n          this.style.radius,\n          width,\n          height,\n          this.style.strokeWidth * 2 - 2\n        ),\n        null,\n        null,\n        true,\n        bodyColor\n      )\n    });\n  }\n\n  _updateStroke() {\n    this._Stroke.patch({\n      // Compensating for the extra 2 pixels getRoundRect adds\n      texture: lng.Tools.getRoundRect(\n        this.w - 2,\n        this.h - 2,\n        getMaxRoundRadius(this.style.radius, this.w, this.h),\n        this.style.strokeWidth,\n        this.style.strokeColor,\n        false\n      )\n    });\n  }\n\n  _updateKnob() {\n    this._Knob.patch({\n      texture: lng.Tools.getRoundRect(\n        this.style.knobWidth,\n        this.style.knobHeight,\n        this.style.knobWidth / 2,\n        null,\n        null,\n        true,\n        this.style.knobColor\n      )\n    });\n\n    this.applySmooth(this._Knob, {\n      alpha: this.checked ? 1 : 0\n    });\n  }\n\n  _updateOpacity() {\n    this.applySmooth(this, { alpha: this.style.alpha });\n  }\n\n  _setChecked(checked) {\n    this._checkedChanged = checked !== this._checked;\n    return checked;\n  }\n\n  toggle() {\n    if (!this._isDisabledMode) {\n      this.checked = !this.checked;\n    }\n    return this;\n  }\n\n  _handleEnter() {\n    if (typeof this.onEnter === 'function') {\n      return this.onEnter(this);\n    } else {\n      this.toggle();\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this.checked ? 'Checked' : 'Unchecked');\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const size = theme.spacer.xl;\n  return {\n    width: size,\n    height: size,\n    knobHeight: size / 2,\n    knobWidth: size / 2,\n    radius: size / 2\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Radio from './Radio';\nimport * as styles from './RadioSmall.styles';\n\nexport default class RadioSmall extends Radio {\n  static get __componentName() {\n    return 'RadioSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport CardTitle from './CardTitle';\nimport TextBox from '../TextBox';\nimport * as styles from './CardRadio.styles';\nimport Radio from '../Radio';\n\nexport default class CardRadio extends CardTitle {\n  static get __componentName() {\n    return 'CardRadio';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'radio', 'subtitle'];\n  }\n\n  static get tags() {\n    return [...super.tags, 'Radio', 'Subtitle'];\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Subtitle: {\n        type: TextBox,\n        signals: {\n          textBoxChanged: '_updatePositions'\n        }\n      }\n    };\n  }\n\n  _update() {\n    super._update();\n    this._updateRadio();\n    this._updateSubtitle();\n    this._updatePositions();\n  }\n\n  _updatePositions() {\n    super._updatePositions();\n    this._updateSubtitlePosition();\n  }\n\n  _updateSubtitle() {\n    this._Subtitle.patch({\n      content: this.subtitle,\n      style: {\n        textStyle: {\n          ...this.style.subtitleTextStyle,\n          wordWrapWidth: this._calculateTextWidth()\n        }\n      }\n    });\n  }\n\n  _updateRadio() {\n    const radioPatch = {\n      ...this.radio,\n      mode: this.mode,\n      mountX: 1,\n      x: this.w - this.style.paddingHorizontal,\n      y: this.style.paddingVertical\n    };\n\n    if (!this._Radio) {\n      radioPatch.type = Radio;\n    }\n    this.patch({ Radio: radioPatch });\n  }\n\n  _updateSubtitlePosition() {\n    this._Subtitle.x = this.style.paddingHorizontal;\n    this._Subtitle.y = this.style.paddingVertical + this._Title.h;\n  }\n\n  _updateDescriptionPosition() {\n    this._Description.x = this.style.paddingHorizontal;\n    this._Description.y =\n      this.style.paddingVertical * 2 + this._Title.h + this._Subtitle.h;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        this._Subtitle && this._Subtitle.announce,\n        this._Description && this._Description.announce,\n        this._Details && this._Details.announce\n      ]\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  height: theme.spacer.xxl * 5,\n  iconWidth: theme.spacer.xxl,\n  iconHeight: theme.spacer.xxl,\n  width: utils.getWidthByColumnSpan(theme, 3)\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Card from './Card';\nimport Icon from '../Icon';\nimport * as styles from './CardSection.styles';\n\nexport default class CardSection extends Card {\n  static get __componentName() {\n    return 'CardSection';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get tags() {\n    return [...super.tags, 'Icon'];\n  }\n\n  static get properties() {\n    return [...super.properties, 'iconWidth', 'iconHeight', 'iconSrc'];\n  }\n\n  _update() {\n    super._update();\n    this._updateIcon();\n  }\n\n  _updateIcon() {\n    const { iconWidth, iconHeight } = this.style;\n    const iconObject = {\n      w: iconWidth,\n      h: iconHeight,\n      icon: this.iconSrc,\n      x: this.w - iconWidth - this.style.paddingHorizontal,\n      y:\n        (this._Title.style.textStyle.lineHeight - iconHeight) / 2 +\n        this.style.paddingVertical\n    };\n    if (!this._Icon) {\n      iconObject.type = Icon;\n    }\n    this.patch({ Icon: iconObject });\n  }\n\n  _calculateTextWidth() {\n    const textWidth = this.w - this.style.paddingHorizontal * 2;\n    return this.iconSrc ? textWidth - this.iconWidth : textWidth;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const strokeWidth = theme.stroke.sm;\n  const size = theme.spacer.xxl;\n  return {\n    alpha: theme.alpha.primary,\n    width: size,\n    height: size,\n    iconWidth: theme.spacer.lg,\n    iconHeight: theme.spacer.lg,\n    icon: theme.asset.check,\n    radius: theme.radius.xs,\n    strokeWidth\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    strokeColor: theme.color.strokeNeutralSecondary,\n    checkColor: theme.color.fillInverse,\n    backgroundColor: theme.color.fillInverseSecondary,\n    backgroundColorChecked: theme.color.fillNeutral\n  },\n  inverse: {\n    strokeColor: theme.color.strokeInverseSecondary,\n    checkColor: theme.color.fillNeutral,\n    backgroundColor: theme.color.fillNeutralSecondary,\n    backgroundColorChecked: theme.color.fillInverse\n  },\n  brand: {\n    strokeColor: theme.color.strokeNeutralSecondary,\n    checkColor: theme.color.fillInverse,\n    backgroundColor: theme.color.fillNeutralSecondary,\n    backgroundColorChecked: theme.color.fillBrand\n  }\n});\n\nexport const mode = theme => ({\n  disabled: { alpha: theme.alpha.inactive }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Icon from '../Icon';\nimport Base from '../Base';\nimport * as styles from './Checkbox.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Checkbox extends Base {\n  static get __componentName() {\n    return 'Checkbox';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    const center = { mount: 0.5, x: w => w / 2, y: h => h / 2 };\n    return {\n      Body: {\n        rtt: true, // ensures the background color doesn't bleed into the checkbox icon when disabled\n        ...center,\n        Check: {\n          type: Icon,\n          ...center,\n          alpha: 0\n        }\n      },\n      Stroke: center\n    };\n  }\n\n  static get tags() {\n    return ['Check', 'Body', 'Stroke'];\n  }\n\n  static get properties() {\n    return ['checked'];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'checkSrc', curr: 'icon' },\n      { prev: 'checkH', curr: 'iconHeight' },\n      { prev: 'checkW', curr: 'iconWidth' },\n      { prev: 'checkHeight', curr: 'iconHeight' },\n      { prev: 'checkWidth', curr: 'iconWidth' }\n    ];\n  }\n\n  _update() {\n    this._updateBody();\n    this._updateStroke();\n    this._updateCheck();\n    if (this._checkedChanged) {\n      this.fireAncestors('$announce', this.announce);\n      this._checkedChanged = false;\n    }\n    this._updateOpacity();\n  }\n\n  _updateCheck() {\n    this._Check.patch({\n      w: this.style.iconWidth,\n      h: this.style.iconHeight,\n      icon: this.style.icon,\n      style: { color: this.style.checkColor }\n    });\n\n    const alphaPatch = {\n      alpha: this.checked ? 1 : 0\n    };\n\n    this.applySmooth(this._Check, alphaPatch);\n  }\n\n  _updateBody() {\n    const bodyColor = this.checked\n      ? this.style.backgroundColorChecked\n      : this.style.backgroundColor;\n\n    const width = this.w - this.style.strokeWidth * 2 - 2;\n    const height = this.h - this.style.strokeWidth * 2 - 2;\n\n    this._Body.patch({\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        width,\n        height,\n        getMaxRoundRadius(\n          this.style.radius,\n          width,\n          height,\n          this.style.strokeWidth * 2 - 2\n        ),\n        0,\n        null,\n        true,\n        bodyColor\n      )\n    });\n  }\n\n  _updateStroke() {\n    this._Stroke.patch({\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        this.w - 2,\n        this.h - 2,\n        getMaxRoundRadius(this.style.radius, this.w - 2, this.h - 2),\n        this.style.strokeWidth,\n        this.style.strokeColor,\n        false\n      )\n    });\n  }\n\n  _updateOpacity() {\n    this.applySmooth(this, { alpha: this.style.alpha });\n  }\n\n  _setChecked(checked) {\n    this._checkedChanged = checked !== this._checked;\n    return checked;\n  }\n\n  toggle() {\n    if (!this._isDisabledMode) {\n      this.checked = !this.checked;\n    }\n    return this;\n  }\n\n  _handleEnter() {\n    if (typeof this.onEnter === 'function') {\n      return this.onEnter(this);\n    } else {\n      this.toggle();\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this.checked ? 'Checked' : 'Unchecked');\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  radius: [\n    theme.radius.md,\n    theme.radius.md,\n    theme.radius.md,\n    theme.radius.none\n  ],\n  paddingX: theme.spacer.lg,\n  paddingY: theme.spacer.md,\n  offsetY: theme.spacer.xxs,\n  textStyle: theme.typography.caption1\n});\n\nexport const tone = theme => ({\n  neutral: {\n    textStyle: { textColor: theme.color.textInverse },\n    backgroundColor: theme.color.fillNeutral\n  },\n  inverse: {\n    textStyle: { textColor: theme.color.textNeutral },\n    backgroundColor: theme.color.fillInverse\n  },\n  brand: {\n    textStyle: { textColor: theme.color.textNeutral },\n    backgroundColor: theme.color.fillBrand\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Label.styles';\n\nexport default class Label extends Base {\n  static _template() {\n    return {\n      Background: {},\n      Text: {\n        mountY: 0.5,\n        mountX: 0.5,\n        text: {}\n      }\n    };\n  }\n\n  static get __componentName() {\n    return 'Label';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return ['title'];\n  }\n\n  static get tags() {\n    return ['Background', 'Text'];\n  }\n\n  _init() {\n    this._Text.on('txLoaded', this._updateBackground.bind(this));\n    super._init();\n  }\n\n  _update() {\n    this._updateBackground();\n    this._updateText();\n  }\n\n  _updateText() {\n    if (this._Text) {\n      this._Text.patch({\n        text: {\n          ...this.style.textStyle,\n          text: this.title\n        }\n      });\n    }\n  }\n\n  _updateBackground() {\n    this._Text.x = this.w / 2;\n    this._Text.y = this.h / 2 + this.style.offsetY;\n\n    this.h = !this.title\n      ? 0\n      : this._Text.renderHeight + 2 * this.style.paddingY;\n    this.w = !this.title ? 0 : this._Text.renderWidth + 2 * this.style.paddingX;\n\n    this._Background.patch({\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra two pixels getRoundRect adds.\n        this.w - 2,\n        this.h - 2,\n        this.style.radius,\n        0,\n        null,\n        true,\n        this.style.backgroundColor\n      )\n    });\n    this.signal('loadedLabel', this);\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Text && this._Text.text.text);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport logger from '../../globals/context/logger';\n/**\n * apply to a component to synchronize the marquee scroll\n * timing of child TextBox components. Target class must\n * have a `get syncArray` property, which contains an\n * array of the tags of all TextBoxes to be synchronized.\n *\n * @param {*} Base class to be extended\n * @returns class with marquee sync functionality\n */\nexport default function withMarqueeSync(Base) {\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _init() {\n      // use _init instead of _construct to ensure elements exist before running setup\n      super._init();\n      if (this._shouldSync) {\n        this._updateSignals();\n      }\n    }\n\n    _update() {\n      super._update();\n      if (this._shouldSync) {\n        this._updateSignals();\n      } else {\n        this._cleanupSyncValues();\n      }\n    }\n\n    _cleanupSyncValues() {\n      this.syncArray.map(component => {\n        component.marqueeOverrideLoopX = undefined;\n        component.signals &&\n          component.signals.willMarquee &&\n          delete component.signals.willMarquee;\n      });\n    }\n\n    _updateSignals() {\n      if (this.syncArray) {\n        this.syncArray.map(component => {\n          // preserve signals set in Base class\n          component.signals = {\n            ...component.signals,\n            willMarquee: '_willMarquee'\n          };\n        });\n      }\n    }\n\n    _willMarquee(compRef) {\n      if (this._shouldSync) {\n        this._longestMarqueeWidth = Math.max(\n          compRef._textRenderedW || 0,\n          this._longestMarqueeWidth || 0\n        );\n        this.syncArray.map(component => {\n          component.marqueeOverrideLoopX = this._longestMarqueeWidth;\n        });\n      }\n    }\n\n    get _shouldSync() {\n      if (this.style.marqueeSync === false) {\n        // only fail this case if explicitly false\n        return false;\n      }\n      if (!this.syncArray) {\n        logger.warn(\n          'warning: components using MarqueeSync must have a syncArray getter defined.'\n        );\n        return false;\n      } else if (!Array.isArray(this.syncArray)) {\n        logger.warn('warning: syncArray must be typeof array.');\n        return false;\n      } else if (this.syncArray.length < 2) {\n        logger.warn(\n          'warning: syncArray must contain at least two component references.'\n        );\n        return false;\n      } else {\n        return true;\n      }\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  descriptionTextStyle: { ...theme.typography.body2, maxLines: 1 },\n  fadeWidth: 100,\n  logoWidth: theme.typography.body3.lineHeight,\n  logoHeight: theme.typography.body3.lineHeight,\n  logoPadding: theme.spacer.lg,\n  detailsTextStyle: theme.typography.body3,\n  subtitleTextStyle: theme.typography.body3,\n  titleTextStyle: { ...theme.typography.headline1, maxLines: 1 },\n  marqueeSync: true,\n  alpha: theme.alpha.primary\n});\n\nexport const mode = theme => ({\n  disabled: {\n    detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n    alpha: theme.alpha.inactive\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    titleTextStyle: { textColor: theme.color.textNeutral },\n    subtitleTextStyle: { textColor: theme.color.textNeutralSecondary },\n    detailsTextStyle: { textColor: theme.color.textNeutral },\n    descriptionTextStyle: { textColor: theme.color.textNeutralSecondary },\n    mode: {\n      disabled: {\n        titleTextStyle: { textColor: theme.color.textNeutralDisabled },\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  },\n  inverse: {\n    titleTextStyle: { textColor: theme.color.textInverse },\n    subtitleTextStyle: { textColor: theme.color.textInverseSecondary },\n    detailsTextStyle: { textColor: theme.color.textInverse },\n    descriptionTextStyle: { textColor: theme.color.textInverseSecondary },\n    mode: {\n      disabled: {\n        titleTextStyle: { textColor: theme.color.textNeutralDisabled },\n        subtitleTextStyle: { textColor: theme.color.textNeutralDisabled },\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  },\n  brand: {\n    titleTextStyle: { textColor: theme.color.textNeutral },\n    subtitleTextStyle: { textColor: theme.color.textNeutralSecondary },\n    detailsTextStyle: { textColor: theme.color.textNeutral },\n    descriptionTextStyle: { textColor: theme.color.textNeutralSecondary },\n    mode: {\n      disabled: {\n        titleTextStyle: { textColor: theme.color.textNeutralDisabled },\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport Icon from '../Icon';\nimport TextBox from '../TextBox';\nimport FadeShader from '../../shaders/FadeShader';\nimport withMarqueeSync from '../../mixins/withMarqueeSync';\nimport * as styles from './MetadataBase.styles';\n\nclass MetadataBase extends Base {\n  static get __componentName() {\n    return 'MetadataBase';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    // Comments indicate where child components are inserted\n    return {\n      Text: {\n        flex: { direction: 'column', justifyContent: 'flex-start' },\n        // Title: {},\n        // Subtitle: {},\n        DetailsWrapper: {\n          // Details: {}\n        }\n        // Description: {}\n      }\n      // Logo: {\n      //   flexItem: false,\n      //   type: Icon\n      // }\n    };\n  }\n\n  static get properties() {\n    return [\n      'description',\n      'logo',\n      'logoHeight',\n      'logoPosition',\n      'logoTitle',\n      'logoWidth',\n      'details',\n      'subtitle',\n      'title',\n      'marquee'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'Text',\n      {\n        name: 'Title',\n        path: 'Text.Title'\n      },\n      {\n        name: 'Subtitle',\n        path: 'Text.Subtitle'\n      },\n      {\n        name: 'DetailsWrapper',\n        path: 'Text.DetailsWrapper'\n      },\n      {\n        name: 'Details',\n        path: 'Text.DetailsWrapper.Details'\n      },\n      {\n        name: 'Description',\n        path: 'Text.Description'\n      },\n      'Logo'\n    ];\n  }\n\n  _titleLoaded() {\n    this._updateLayout();\n  }\n\n  _subtitleLoaded() {\n    this._updateLayout();\n  }\n\n  _detailsLoaded({ w, h }) {\n    this._updateDetailsLayout({ w, h });\n    this._updateLayout();\n  }\n\n  _descriptionLoaded() {\n    this._updateLayout();\n  }\n\n  _updateDetailsLayout({ w, h }) {\n    if (!this.details && !this._Details) {\n      return;\n    }\n\n    if (this._DetailsWrapper) {\n      this._DetailsWrapper.alpha = this.style.alpha;\n      this._DetailsWrapper.w = w;\n      this._DetailsWrapper.h = h;\n    }\n  }\n\n  _update() {\n    this._updateLines();\n    this._updateLayout();\n  }\n\n  _updateLines() {\n    this._Text.w = this._textW();\n    this._updateTitle();\n    this._updateSubtitle();\n    this._updateDetails();\n    this._updateDescription();\n  }\n\n  _updateLayout() {\n    this._Text.h = this._textH();\n    this._updateMetadataHeight();\n    this._updatePositions();\n    this._updateLogo();\n  }\n\n  _updatePositions() {\n    this._Text.x =\n      this.logo && this.logoPosition === 'left'\n        ? this.logoWidth + this.style.logoPadding\n        : 0;\n    this._Text.y = (this.h - this._Text.h) / 2;\n  }\n\n  _updateMetadataHeight() {\n    const newH = Math.max(this.logoHeight, this._Text.h);\n    if (this.h !== newH) {\n      this.h = newH;\n      this.signal('updateComponentDimensions');\n    }\n  }\n\n  _updateTitle() {\n    if (!this.title && !this._Title) {\n      return;\n    }\n\n    if (!this._Title) {\n      this._Text.childList.addAt(\n        {\n          ref: 'Title',\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_titleLoaded'\n          }\n        },\n        0\n      );\n    }\n    this._Title.patch({\n      content: this.title,\n      marquee: this.marquee,\n      style: {\n        textStyle: {\n          ...this.style.titleTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  _updateSubtitle() {\n    if (!this.subtitle && !this._Subtitle) {\n      return;\n    }\n\n    if (!this._Subtitle) {\n      this._Text.childList.addAt(\n        {\n          ref: 'Subtitle',\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_subtitleLoaded'\n          }\n        },\n        1\n      );\n    }\n\n    this._Subtitle.patch({\n      content: this.subtitle,\n      marquee: this.marquee,\n      style: {\n        textStyle: {\n          ...this.style.subtitleTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  resetMarquee() {\n    if (this.marquee) {\n      if (this.title) {\n        if (!this._Title) {\n          this._updateTitle();\n        }\n        this._Title.toggleMarquee();\n      }\n      if (this.description) {\n        if (!this._Description) {\n          this._updateDescription();\n        }\n        this._Description.toggleMarquee();\n      }\n    }\n  }\n\n  _updateDetails() {\n    if (!this.details && !this._Details) {\n      return;\n    }\n\n    if (!this._Details) {\n      this._DetailsWrapper.patch({\n        Details: {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_detailsLoaded'\n          }\n        }\n      });\n    }\n\n    this._Details.patch({\n      content: this.details,\n      style: { textStyle: this.style.detailsTextStyle }\n    });\n\n    if (this._Details.finalW > this._textW()) {\n      this._Details.patch({\n        w: this._textW() + this.style.fadeWidth / 2,\n        shader: {\n          type: FadeShader,\n          positionLeft: 0,\n          positionRight: this.style.fadeWidth\n        },\n        rtt: true\n      });\n    } else {\n      this._DetailsWrapper.shader = undefined;\n    }\n    this._DetailsWrapper.visible = this.details ? true : false;\n    this._DetailsWrapper.alpha = this.style.alpha;\n  }\n\n  _updateDescription() {\n    if (!this.description && !this._Description) {\n      return;\n    }\n\n    if (!this._Description) {\n      this._Text.childList.add({\n        ref: 'Description',\n        type: TextBox,\n        signals: {\n          textBoxChanged: '_descriptionLoaded'\n        }\n      });\n    }\n\n    this._Description.patch({\n      content: this.description,\n      marquee: this.marquee,\n      style: {\n        textStyle: {\n          ...this.style.descriptionTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  _updateLogo() {\n    if (!this.logo && !this._Logo) {\n      return;\n    }\n\n    if (!this._Logo) {\n      this.patch({\n        Logo: {\n          flexItem: false,\n          type: Icon\n        }\n      });\n    }\n\n    this.logoPosition = this.logoPosition || 'right';\n    const subtitleH =\n      (this.subtitle && this._Subtitle && this._Subtitle.h) || 0;\n    this._Logo.patch({\n      w: this.logoWidth,\n      h: this.logoHeight,\n      icon: this.logo,\n      alpha: this.style.alpha\n    });\n\n    this._Logo.x = this.logoPosition === 'left' ? 0 : this.w - this._Logo.w;\n    this._Logo.y = (this.h - this.logoHeight + subtitleH) / 2;\n  }\n\n  _textW() {\n    return this.w - (this.logo ? this.logoWidth + this.style.logoPadding : 0);\n  }\n\n  _textH() {\n    const titleH = (this.title && this._Title && this._Title.h) || 0;\n    const subtitleH =\n      (this.subtitle && this._Subtitle && this._Subtitle.h) || 0;\n    const detailsH =\n      (this.details && this._DetailsWrapper && this._DetailsWrapper.h) || 0;\n    const descriptionH =\n      (this.description && this._Description && this._Description.h) || 0;\n    return titleH + subtitleH + detailsH + descriptionH;\n  }\n\n  _getLogoWidth() {\n    return this._logoWidth !== undefined\n      ? this._logoWidth\n      : this.style.logoWidth;\n  }\n\n  _setLogoWidth(w) {\n    return w !== undefined ? w : this.logoWidth;\n  }\n\n  _getLogoHeight() {\n    return this._logoHeight !== undefined\n      ? this._logoHeight\n      : this.style.logoHeight;\n  }\n\n  _setLogoHeight(h) {\n    return h !== undefined ? h : this.logoHeight;\n  }\n\n  get syncArray() {\n    return [\n      ...(this._Title ? [this._Title] : []),\n      ...(this._Subtitle ? [this._Subtitle] : []),\n      ...(this._Description ? [this._Description] : []),\n      ...(this._Details ? [this._Details] : [])\n    ];\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        this._Subtitle && this._Subtitle.announce,\n        this._Details && this._Details.announce,\n        this._Description && this._Description.announce,\n        this.logoTitle\n      ]\n    );\n  }\n}\n\nexport default withMarqueeSync(MetadataBase);\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  titleTextStyle: theme.typography.headline3,\n  descriptionTextStyle: theme.typography.body3\n});\n\nexport const tone = theme => ({\n  neutral: {\n    detailsTextStyle: { textColor: theme.color.textNeutralSecondary },\n    descriptionTextStyle: { textColor: theme.color.textNeutral },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  },\n  inverse: {\n    detailsTextStyle: { textColor: theme.color.textInverseSecondary },\n    descriptionTextStyle: { textColor: theme.color.textInverse },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  },\n  brand: {\n    detailsTextStyle: { textColor: theme.color.textNeutralSecondary },\n    descriptionTextStyle: { textColor: theme.color.textNeutral },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled },\n        descriptionTextStyle: {\n          textColor: theme.color.textNeutralDisabled\n        }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport MetadataBase from '../MetadataBase';\nimport * as styles from './MetadataTile.styles';\n\nexport default class MetadataTile extends MetadataBase {\n  static get __componentName() {\n    return 'MetadataTile';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _updateDetails() {\n    if (!this.details && !this._Details) {\n      return;\n    }\n    if (this.description && this._Details) {\n      this._Details.patch({ content: '' });\n      this._Details.alpha = 0;\n      this._Details.visible = false;\n    } else {\n      super._updateDetails();\n    }\n  }\n\n  _updateDetailsLayout({ h }) {\n    if (!this.details && !this._Details) {\n      return;\n    }\n    if (this._Details && !this.description) {\n      this._DetailsWrapper.h = h;\n      this._DetailsWrapper.alpha = this.style.alpha;\n    } else {\n      this._DetailsWrapper.h = 0;\n    }\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        (this._Details && this._Details.announce) ||\n          (this._Description && this._Description.announce),\n        this.logoTitle\n      ]\n    );\n  }\n\n  _textH() {\n    const titleH = (this.title && this._Title && this._Title.h) || 0;\n    const detailsH =\n      (this.details &&\n        this._Details &&\n        this._Details.visible &&\n        this._DetailsWrapper.h) ||\n      0;\n    const descriptionH =\n      (this.description && this._Description && this._Description.h) || 0;\n    return titleH + detailsH + descriptionH;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  height: theme.spacer.md,\n  animation: theme.animation.utility,\n  radius: theme.radius.xs\n});\n\nexport const tone = theme => ({\n  neutral: {\n    barColor: theme.color.fillNeutralTertiary,\n    progressColor: theme.color.fillNeutral\n  },\n  inverse: {\n    barColor: theme.color.fillInverseTertiary,\n    progressColor: theme.color.fillInverse\n  },\n  brand: {\n    barColor: theme.color.fillNeutralTertiary,\n    progressColor: theme.color.fillBrand\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './ProgressBar.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class ProgressBar extends Base {\n  static _template() {\n    return {\n      Bar: { zIndex: 1 },\n      Progress: { alpha: 0, zIndex: 2 }\n    };\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get __componentName() {\n    return 'ProgressBar';\n  }\n\n  static get properties() {\n    return ['progress'];\n  }\n\n  static get tags() {\n    return ['Bar', 'Progress'];\n  }\n\n  _construct() {\n    super._construct && super._construct();\n    this._progress = 0;\n  }\n\n  _update() {\n    this._updateTextures();\n    this._updateProgress();\n    if (this._progressChanged) {\n      this.fireAncestors('$announce', this.announce);\n      this._progressChanged = false;\n    }\n  }\n\n  _updateTextures() {\n    const w = this._getProgressWidth();\n\n    const radius = getMaxRoundRadius(this.style.radius, this.w - 2, this.h);\n\n    this._Bar.texture = lng.Tools.getRoundRect(\n      // getRoundRect adds 2 to the width\n      this.w - 2,\n      this.h,\n      radius,\n      0,\n      0,\n      true,\n      this.style.barColor\n    );\n\n    this._Progress.texture = lng.Tools.getRoundRect(\n      w + 1,\n      this.h,\n      radius,\n      0,\n      0,\n      true,\n      this.style.progressColor\n    );\n  }\n\n  _updateProgress() {\n    const w = this._getProgressWidth();\n\n    this._Progress.smooth = {\n      w: [w, this.style.animation],\n      alpha: Number(w > 0)\n    };\n  }\n\n  _setProgress(progress) {\n    this._progressChanged = progress !== this._progress;\n    return progress;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce !== undefined && this._announce !== null) {\n      return this._announce;\n    }\n\n    let progress = this.progress;\n    if (progress > 1) {\n      progress = 1;\n    } else if (progress < 0) {\n      progress = 0;\n    }\n    return `${Math.round(progress * 100)}%`;\n  }\n\n  _getProgressWidth() {\n    const p = this.w * this._progress;\n    const w = p <= 0 ? 0 : Math.min(p, this.w);\n    return w;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  animationEntrance: theme.animation.standardEntrance,\n  animationExit: theme.animation.standardExit,\n  logoWidth: theme.spacer.lg * 5,\n  logoHeight: theme.spacer.xxl + theme.spacer.md,\n  metadataLocation: 'standard',\n  paddingX: theme.spacer.xl,\n  paddingY: theme.spacer.lg,\n  paddingYProgress: theme.spacer.xl,\n  paddingYBetweenContent: theme.spacer.md,\n  radius: theme.radius.md,\n  alpha: theme.alpha.primary\n});\n\nexport const tone = theme => ({\n  neutral: {\n    mode: {\n      focused: {\n        backgroundColor: theme.color.interactiveNeutralFocusSoft\n      }\n    }\n  },\n  inverse: {\n    mode: {\n      focused: {\n        backgroundColor: theme.color.interactiveInverseFocusSoft\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        backgroundColor: theme.color.interactiveBrandFocusSoft\n      }\n    }\n  }\n});\n\nexport const mode = theme => ({\n  disabled: {\n    alpha: theme.alpha.inactive\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Artwork from '../Artwork';\nimport Badge from '../Badge';\nimport Checkbox from '../Checkbox';\nimport Label from '../Label';\nimport MetadataTile from '../MetadataTile';\nimport ProgressBar from '../ProgressBar';\nimport * as styles from './Tile.styles';\nimport Surface from '../Surface';\nimport Icon from '../Icon';\n\nexport default class Tile extends Surface {\n  static get __componentName() {\n    return 'Tile';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(), // Make sure surface elements are patched\n      Tile: {\n        Artwork: {\n          type: Artwork,\n          signals: {\n            imageLoaded: '_imageLoaded'\n          },\n          mount: 0.5\n        },\n        Content: {\n          mount: 0.5\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return [\n      'artwork',\n      'badge',\n      'checkbox',\n      'circle',\n      'label',\n      'logo',\n      'metadata',\n      'metadataLocation',\n      'persistentMetadata',\n      'progressBar',\n      'src'\n    ];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'iconHeight', curr: 'logoHeight' },\n      { prev: 'iconWidth', curr: 'logoWidth' }\n    ];\n  }\n\n  static get aliasProperties() {\n    return [{ prev: 'iconSrc', curr: 'logo' }];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'Artwork',\n      'Content',\n      'Tile',\n      { name: 'Badge', path: 'Content.Badge' },\n      { name: 'Checkbox', path: 'Content.Checkbox' },\n      { name: 'Logo', path: 'Content.Logo' },\n      { name: 'Metadata', path: 'Content.Metadata' },\n      { name: 'ProgressBar', path: 'Content.ProgressBar' },\n      { name: 'Label', path: 'Content.Label' }\n    ];\n  }\n\n  /**\n   * When metadata is displayed below the Tile we need a way to tell the containing columns that it exists\n   * in order for it to layout properly. This approach will not however show up in the DOM inspector\n   */\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Metadata && this._Metadata.announce,\n        this._Badge && this._Badge.announce,\n        this._Label && this._Label.announce,\n        this._ProgressBar && this._ProgressBar.announce\n      ]\n    );\n  }\n\n  _update() {\n    super._update();\n    this._updateTileColor();\n    this._updateContent();\n    this._updateArtwork();\n    this._updateBadge();\n    this._updateLabel();\n    this._updateCheckbox();\n    this._updateProgressBar();\n    this._updateMetadata();\n    this._updateLogo();\n  }\n\n  /* ------------------------------ Tile ------------------------------ */\n\n  _getRenderHeight() {\n    // if there is Metadata below the Tile, override _getRenderHeight\n    // in order to return the fully calculated height,\n    // not the height stored in \"_h\" for just the tile image\n    return !this._isInsetMetadata\n      ? this._h + (this._Metadata?.h + this.style.paddingY || 0)\n      : super._getRenderHeight();\n  }\n\n  get innerH() {\n    return this._h; // Ensure that surface respects the correct height when metadata is displayed below\n  }\n\n  get _shouldShowGradient() {\n    return Boolean(\n      ((this._isInsetMetadata &&\n        this._hasMetadata &&\n        this._shouldShowMetadata) ||\n        this.progressBar?.progress > 0 ||\n        this._shouldShowLogo) &&\n        !this._isCircleLayout\n    );\n  }\n\n  get _isCircleLayout() {\n    return Boolean(this._itemLayout && this._itemLayout.circle);\n  }\n\n  get _foregroundDefaultWidth() {\n    return parseFloat(this._w / this._h).toFixed(2) ===\n      parseFloat(16 / 9).toFixed(2)\n      ? this.innerW * 0.5\n      : this.innerW * 0.75;\n  }\n\n  _updateTileColor() {\n    this._Tile.alpha = this.style.alpha;\n  }\n\n  _updateContent() {\n    const itemContainerPatch = {\n      h: this._h,\n      w: this._w,\n      x: this._w / 2,\n      y: this._h / 2\n    };\n\n    // Make sure container animates with same values as badge, label, and metadata\n    this.applySmooth(\n      this._Content,\n      itemContainerPatch,\n      Object.keys(itemContainerPatch).reduce((acc, prop) => {\n        acc[prop] = [\n          itemContainerPatch[prop],\n          this._isFocusedMode\n            ? this.style.animationEntrance\n            : this.style.animationExit\n        ];\n        return acc;\n      }, {})\n    );\n  }\n\n  /* ------------------------------ Logo ------------------------------ */\n\n  _updateLogo() {\n    if (!this.logo) {\n      this.patch({ Logo: undefined });\n      return;\n    }\n    const logoObject = {\n      w: this.style.logoWidth,\n      h: this.style.logoHeight,\n      icon: this.logo,\n      alpha: this._shouldShowLogo ? this.style.alpha : 0.001,\n      x: this.style.paddingX,\n      y: this._calculateLogoYPosition()\n    };\n    if (!this._Logo) {\n      this.patch({\n        Logo: {\n          type: Icon,\n          mountY: 1,\n          ...logoObject\n        }\n      });\n    } else {\n      this.applySmooth(this._Logo, logoObject);\n    }\n  }\n\n  _calculateLogoYPosition() {\n    if (this._isInsetMetadata && this._Metadata) {\n      return this._metadataY - this._Metadata.h;\n    }\n    return this._progressBarY\n      ? this._progressBarY - this.style.paddingYBetweenContent\n      : this._h - this.style.paddingY;\n  }\n\n  get _shouldShowLogo() {\n    return this.logo && (this.persistentMetadata || this._isFocusedMode);\n  }\n\n  /* ------------------------------ Artwork ------------------------------ */\n\n  _updateArtwork() {\n    // ensure a nested artwork src takes precedence over the class's src setter,\n    // but that if src is undefined in both the setter and artwork object,\n    // we don't incorrectly pass \"src: undefined\" to the Artwork component)\n    this._Artwork.patch({\n      mode: this.mode,\n      h: this._h,\n      w: this._w,\n      x: this._w / 2,\n      y: this._h / 2,\n      src: this.src,\n      ...(this.artwork || {}),\n      style: {\n        radius: this.style?.radius,\n        ...this.artwork?.style\n      },\n      gradient: this._shouldShowGradient,\n      shouldScale: this._isFocusedMode\n    });\n  }\n\n  _getSrc() {\n    return (this.artwork && this.artwork.src) || this._src;\n  }\n\n  _imageLoaded() {\n    this._Background.alpha = 0; // Since the image is loaded the surface does not need to be shown\n  }\n\n  /* ------------------------------ Badge ------------------------------ */\n\n  _updateBadge() {\n    // Remove Badge if no longer required\n    if (!this.badge?.title || this._isCircleLayout) {\n      if (this._Badge) {\n        this._Content.patch({\n          Badge: undefined\n        });\n      }\n      return;\n    }\n\n    const badgePatch = {\n      ...this.badge,\n      mode: this.mode,\n      x: this.style.paddingX,\n      y: this.style.paddingY,\n      alpha: this._shouldShowBadgeLabel ? 1 : 0.001\n    };\n\n    if (!this._Badge) {\n      this._Content.patch({\n        Badge: {\n          type: Badge,\n          ...badgePatch,\n          signals: {\n            loadedBadge: '_updateBadge'\n          }\n        }\n      });\n      return;\n    } else {\n      this._Badge.patch(badgePatch);\n    }\n    this.applySmooth(this._Badge, badgePatch, {\n      ...badgePatch,\n      ...this._badgeLabelTransitions // Badge and Label should animate in with the same values\n    });\n  }\n\n  /* ------------------------------ Label  ------------------------------ */\n\n  _updateLabel() {\n    if (!this.label?.title || this._isCircleLayout) {\n      if (this._Label) {\n        this._Content.patch({\n          Label: undefined\n        });\n      }\n      return;\n    }\n    const labelPatch = {\n      ...this.label,\n      mode: this.mode,\n      x: this._w - this.style.paddingX,\n      y: this.style.paddingY,\n      alpha: this._shouldShowBadgeLabel ? 1 : 0.001\n    };\n\n    if (!this._Label) {\n      this._Content.patch({\n        Label: {\n          type: Label,\n          mountX: 1,\n          ...labelPatch,\n          signals: {\n            loadedLabel: '_updateLabel'\n          }\n        }\n      });\n      return;\n    } else {\n      this._Label.patch(labelPatch);\n    }\n\n    this.applySmooth(this._Label, labelPatch, {\n      ...labelPatch,\n      x: [\n        labelPatch.x,\n        this._shouldShowBadgeLabel\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ],\n      ...this._badgeLabelTransitions\n    });\n  }\n\n  /* ------------------------------ Badge & Label ------------------------------ */\n\n  // Badge and Label should animate in with the same values\n  get _shouldShowBadgeLabel() {\n    return (\n      this.persistentMetadata || (this._isFocusedMode && !this._isCircleLayout)\n    );\n  }\n\n  get _badgeLabelTransitions() {\n    return {\n      y: [\n        this._shouldShowBadgeLabel ? this.style.paddingY : 0,\n        this._shouldShowBadgeLabel\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ],\n      alpha: [\n        this._shouldShowBadgeLabel ? 1 : 0.001,\n        this._shouldShowBadgeLabel\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ]\n    };\n  }\n\n  /* ------------------------------ Checkbox ------------------------------ */\n\n  _updateCheckbox() {\n    // Remove Checkbox if no longer required\n    if (\n      !(typeof this.checkbox?.checked === 'boolean' && this.checkbox.checked) ||\n      this._isCircleLayout\n    ) {\n      if (this._Checkbox) {\n        this._Content.patch({\n          Checkbox: undefined\n        });\n      }\n      return;\n    }\n\n    const checkboxPatch = {\n      ...this.checkbox,\n      mode: this.mode,\n      x: this._w - this.style.paddingX,\n      y: this._h - this.style.paddingY\n    };\n\n    if (!this._Checkbox) {\n      this._Content.patch({\n        Checkbox: {\n          ...checkboxPatch,\n          type: Checkbox,\n          mount: 1\n        }\n      });\n      return;\n    }\n\n    this.applySmooth(this._Checkbox, checkboxPatch);\n  }\n  /* ------------------------------ Progress Bar ------------------------------ */\n\n  get _progressBarY() {\n    // this accessor gets used to determine where to position the metadata, so\n    // if there is a ProgressBar that is not being alpha-ed out\n    // (because of the progress being set to 0),\n    // use the y position of the ProgressBar\n    // if the ProgressBar is currently animating into place, use the future value\n    // otherwise, return 0\n    return (\n      (this._ProgressBar &&\n      this._ProgressBar._getTransition('alpha')._targetValue !== 0\n        ? this._ProgressBar._getTransition('y')._targetValue ||\n          this._ProgressBar.y\n        : 0) || 0\n    );\n  }\n\n  _updateProgressBar() {\n    // Remove ProgressBar if no longer required\n    if (\n      !(\n        typeof this.progressBar?.progress === 'number' &&\n        this.progressBar.progress\n      ) ||\n      this._isCircleLayout\n    ) {\n      if (this._ProgressBar) {\n        if (this.shouldSmooth) {\n          this._ProgressBar._getTransition('alpha').once('finish', () => {\n            this._removeProgressBar();\n          });\n          this._ProgressBar.smooth = { alpha: 0 };\n        } else {\n          this._removeProgressBar();\n        }\n      }\n      return;\n    }\n\n    if (this.progressBar.progress > 0) {\n      const progressPatch = {\n        ...this.progressBar,\n        mode: this.mode,\n        w: this._w - this.style.paddingX * 2,\n        x: this._w / 2,\n        y: this._h - this.style.paddingYProgress\n      };\n\n      if (!this._ProgressBar) {\n        this._Content.patch({\n          ProgressBar: {\n            ...progressPatch,\n            type: ProgressBar,\n            mountX: 0.5,\n            mountY: 1,\n            alpha: this._hasMetadata && this.shouldSmooth ? 0.001 : 1\n          }\n        });\n\n        if (this.shouldSmooth) {\n          this._ProgressBar.smooth = {\n            alpha: [\n              1,\n              { delay: this.style.animationEntrance.duration } // Wait for metadata to animate in\n            ]\n          };\n        }\n        return;\n      }\n\n      // TODO: See if we need to add animation to every property individually or can set parent\n      this.applySmooth(\n        this._ProgressBar,\n        progressPatch,\n        Object.keys(progressPatch).reduce((acc, prop) => {\n          acc[prop] = [\n            progressPatch[prop],\n            this._isFocusedMode\n              ? this.style.animationEntrance\n              : this.style.animationExit\n          ];\n          return acc;\n        }, {})\n      );\n    }\n  }\n  _removeProgressBar() {\n    this._Content.patch({ ProgressBar: undefined });\n    this._updateMetadata();\n  }\n\n  /* ------------------------------ Metadata  ------------------------------ */\n\n  // all the logic on whether the metaData should show\n  get _shouldShowMetadata() {\n    return (\n      this._hasMetadata &&\n      ((this.persistentMetadata && !this._isInsetMetadata) ||\n        (this._isFocusedMode && !this._isInsetMetadata) ||\n        ((this.persistentMetadata || this._isFocusedMode) &&\n          this._isInsetMetadata &&\n          !this._isCircleLayout))\n    );\n  }\n\n  get _isInsetMetadata() {\n    return this.metadataLocation === 'inset';\n  }\n\n  get _metadataTransitions() {\n    return {\n      y: [\n        this._metadataY,\n        this._shouldShowMetadata\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ],\n      alpha: [\n        this._metadataAlpha,\n        this._shouldShowMetadata\n          ? this.style.animationEntrance\n          : this.style.animationExit\n      ]\n    };\n  }\n\n  get _hasMetadata() {\n    return MetadataTile.properties.some(\n      prop => this.metadata && this.metadata[prop]\n    );\n  }\n\n  get _metadataY() {\n    if (this._shouldShowMetadata) {\n      if (this._isInsetMetadata) {\n        return this._progressBarY\n          ? this._progressBarY - this.style.paddingYBetweenContent\n          : this._h - this.style.paddingY;\n      }\n    }\n    return this._h + this.style.paddingY;\n  }\n\n  get _metadataAlpha() {\n    return this._shouldShowMetadata ? 1 : 0.001;\n  }\n\n  get _metadataPatch() {\n    return {\n      alpha: this._metadataAlpha,\n      w: this._w - this.style.paddingX * 2,\n      x: this._w / 2,\n      y: this._metadataY\n    };\n  }\n\n  get _nonSmoothingMetadataPatch() {\n    return {\n      mode: this.mode,\n      mountX: 0.5,\n      mountY: this._isInsetMetadata ? 1 : 0,\n      marquee: this._isFocusedMode,\n      ...(this.metadata || {})\n    };\n  }\n\n  _getMetadataLocation() {\n    return this._metadataLocation ?? this.style.metadataLocation;\n  }\n\n  _updateMetadata() {\n    if (!this._hasMetadata) {\n      this._Content.patch({ Metadata: undefined });\n      return;\n    }\n\n    if (!this._Metadata && this._hasMetadata) {\n      // Patch in Metadata for the first time\n      this._Content.patch({\n        Metadata: {\n          type: MetadataTile,\n          signals: {\n            updateComponentDimensions: '_metadataLoaded'\n          },\n          ...this._nonSmoothingMetadataPatch,\n          ...this._metadataPatch\n        }\n      });\n\n      return;\n    }\n    this._Metadata.patch(this._nonSmoothingMetadataPatch);\n    this._animateMetadata();\n  }\n\n  _animateMetadata() {\n    if (!this._Metadata) {\n      return;\n    }\n\n    this.applySmooth(\n      this._Metadata,\n      this._metadataPatch,\n      this._metadataTransitions\n    );\n\n    if (!this._isFocusedMode) {\n      this._resetMarqueeAnimation();\n    }\n  }\n\n  _metadataLoaded() {\n    this._animateMetadata();\n    this._updateLogo();\n\n    // if the metadata height has changed, the height of the entire Tile has changed\n    // and the inspector must be updated via _getRenderHeight()\n    this._updateDimensions();\n\n    // Send event to columns/rows that the height has been updated since metadata will be displayed below the Tile\n    if (!this._isInsetMetadata) {\n      this.fireAncestors('$itemChanged');\n    }\n  }\n\n  /* ------------------------------ Marquee  ------------------------------ */\n\n  _resetMarqueeAnimation() {\n    const alphaTransition = this._Metadata._getTransition('alpha');\n    if (alphaTransition) {\n      alphaTransition.on('finish', () => {\n        if (this._Metadata) {\n          this._Metadata.resetMarquee();\n        }\n      });\n    } else {\n      this._Metadata.resetMarquee();\n    }\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport function base(theme) {\n  return {\n    alpha: theme.alpha.primary,\n    counterTextStyle: theme.typography.headline3,\n    itemSize: theme.layout.gutterX * 2,\n    itemSpacing: theme.spacer.md,\n    radius: theme.radius.sm\n  };\n}\n\nexport const mode = theme => ({\n  disabled: {\n    alpha: theme.alpha.inactive\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    counterBackgroundColor: theme.color.fillInverseSecondary\n  },\n  inverse: {\n    counterBackgroundColor: theme.color.fillNeutralSecondary\n  },\n  brand: {\n    counterBackgroundColor: theme.color.fillInverseSecondary\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport Row from '../Row';\nimport Icon from '../Icon';\nimport TextBox from '../TextBox';\nimport * as styles from './Provider.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Provider extends Base {\n  static get __componentName() {\n    return 'Provider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Row: {\n        type: Row,\n        autoResizeWidth: true\n      }\n    };\n  }\n\n  static get properties() {\n    return ['disableRadius', 'counterText', 'providers', 'visibleCount'];\n  }\n\n  static get tags() {\n    return ['Row'];\n  }\n\n  get providersHidden() {\n    return this.providers.length - this._visibleCount;\n  }\n\n  _construct() {\n    this._providers = [];\n    super._construct();\n  }\n\n  _update() {\n    this._updateProviders();\n    this._updateCounter();\n  }\n\n  _updateProviders() {\n    const providerList = [];\n    this.providers.slice(0, this.visibleCount).forEach(provider => {\n      // Create a starting point for each provider icon.\n\n      let patch = {\n        centerInParent: true,\n        radius: this.disableRadius\n          ? 0\n          : getMaxRoundRadius(\n              this.style.radius,\n              this.style.itemSize,\n              this.style.itemSize\n            ),\n        alpha: this.style.alpha,\n        style: provider.style || {}\n      };\n\n      if (\n        // If the provider is a pre-configured Icon, allow it to override the default behavior.\n        provider.type === Icon &&\n        provider.icon &&\n        provider.w &&\n        provider.h\n      ) {\n        // Maintain the ratio of the source icon while enforcing the height specified in the styles.\n        const ratio = provider.w / provider.h;\n        patch = {\n          type: Icon,\n          icon: provider.icon,\n          ...provider,\n          w: this.style.itemSize * ratio,\n          h: this.style.itemSize,\n          ...patch\n        };\n      } else {\n        // If the provider is just a string, create the rest of the Icon.\n        patch = {\n          type: Icon,\n          w: this.style.itemSize,\n          h: this.style.itemSize,\n          ...patch\n        };\n        if (typeof provider === 'object') {\n          patch = { ...patch, ...provider };\n        } else {\n          patch.icon = provider;\n        }\n      }\n      providerList.push(patch);\n    });\n    this._Row.patch({\n      style: {\n        itemSpacing: this.style.itemSpacing\n      },\n      items: providerList,\n      h: this.style.itemSize\n    });\n  }\n\n  _updateCounter() {\n    if (this.providers.length > this.visibleCount) {\n      const remaining = this.providersHidden;\n      const counter = {\n        announce: `+${remaining}`,\n        alpha: this.style.alpha,\n        w: this.style.itemSize,\n        h: this.style.itemSize,\n        centerInParent: true,\n        Background: {\n          w: this.style.itemSize,\n          h: this.style.itemSize,\n          texture: lng.Tools.getRoundRect(\n            this.style.itemSize,\n            this.style.itemSize,\n            getMaxRoundRadius(\n              this.style.radius,\n              this.style.itemSize,\n              this.style.itemSize\n            ),\n            0,\n            null,\n            true,\n            this.style.counterBackgroundColor\n          )\n        },\n        Text: {\n          type: TextBox,\n          mountX: 0.5,\n          mountY: 0.5,\n          x: this.style.itemSize / 2,\n          y: this.style.itemSize / 2,\n          content: this.counterText || `+${remaining}`,\n          style: { textStyle: this.style.counterTextStyle }\n        }\n      };\n      this._Row.appendItems([counter]);\n    }\n  }\n\n  $itemChanged() {\n    this.signal('providerChanged');\n  }\n\n  _getVisibleCount() {\n    const min = 1;\n    const max = this.providers.length;\n    const visibleCount = Math.min(Math.max(min, this._visibleCount), max);\n    if (this._visibleCount < min) {\n      console.warn(\n        `Warning: The specified visible count (${this._visibleCount}) is less than the minimum value (${min}). Setting it to ${min}.`\n      );\n    }\n    if (this._visibleCount > max) {\n      console.warn(\n        `Warning: The specified visible count (${this._visibleCount}) is greater than the maximum value (${max}). Setting it to ${max}.`\n      );\n    }\n    return visibleCount;\n  }\n\n  get w() {\n    return this._Row.w;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce ||\n      (this._Row.items &&\n        this._Row.items.length &&\n        this._Row.items.map(item => item.announce))\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  detailsTextStyle: theme.typography.body3,\n  descriptionTextStyle: { maxLines: 3 },\n  descriptionDetailsStyle: { paddingY: 5 },\n  fadeWidth: theme.spacer.md * theme.spacer.md,\n  provider: {\n    itemSize: theme.spacer.xxxl + theme.spacer.md\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    detailsTextStyle: { textColor: theme.color.textNeutral },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled }\n      }\n    }\n  },\n  inverse: {\n    detailsTextStyle: { textColor: theme.color.textInverse },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled }\n      }\n    }\n  },\n  brand: {\n    detailsTextStyle: { textColor: theme.color.textNeutral },\n    mode: {\n      disabled: {\n        detailsTextStyle: { textColor: theme.color.textNeutralDisabled }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport MetadataBase from '../MetadataBase';\nimport TextBox from '../TextBox';\nimport Provider from '../Provider';\nimport FadeShader from '../../shaders/FadeShader';\nimport * as styles from './MetadataCardContent.styles';\n\nexport default class MetadataCardContent extends MetadataBase {\n  static get __componentName() {\n    return 'MetadataCardContent';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Text: {\n        flex: { direction: 'column', justifyContent: 'flex-start' },\n        Title: {\n          type: TextBox\n        },\n        Subtitle: {\n          type: TextBox\n        },\n        Description: {\n          type: TextBox\n        },\n        DescriptionDetails: {\n          type: TextBox\n        }\n      },\n      DetailsWrapper: {\n        DetailsFader: {\n          Details: {\n            mountY: 0.5,\n            type: TextBox,\n            signals: {\n              textBoxChanged: '_resolveDetails'\n            }\n          }\n        },\n        Provider: {\n          mount: 1,\n          type: Provider,\n          signals: {\n            providerChanged: '_resolveProvider'\n          }\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return [\n      'description',\n      'descriptionDetails',\n      'details',\n      'provider',\n      'subtitle',\n      'title'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'Text',\n      {\n        name: 'Title',\n        path: 'Text.Title'\n      },\n      {\n        name: 'Subtitle',\n        path: 'Text.Subtitle'\n      },\n      {\n        name: 'Description',\n        path: 'Text.Description'\n      },\n      {\n        name: 'DescriptionDetails',\n        path: 'Text.DescriptionDetails'\n      },\n      'DetailsWrapper',\n      {\n        name: 'DetailsFader',\n        path: 'DetailsWrapper.DetailsFader'\n      },\n      {\n        name: 'Details',\n        path: 'DetailsWrapper.DetailsFader.Details'\n      },\n      {\n        name: 'Provider',\n        path: 'DetailsWrapper.Provider'\n      }\n    ];\n  }\n\n  _setDetails(details) {\n    if (details) {\n      this._detailsPromise = new Promise(resolve => {\n        this._detailsPromiseResolver = resolve;\n      });\n    } else {\n      this._detailsPromise = undefined;\n    }\n    return details;\n  }\n\n  _setProvider(provider) {\n    if (provider) {\n      this._providerPromise = new Promise(resolve => {\n        this._providerPromiseResolver = resolve;\n      });\n    } else {\n      this._providerPromise = undefined;\n    }\n    return provider;\n  }\n\n  async _update() {\n    this._updateLines();\n    this._updateProvider();\n    await Promise.all(\n      [this._detailsPromise, this._providerPromise].filter(Boolean)\n    );\n    this._updatePositions();\n  }\n\n  _updateLines() {\n    this._Text.w = this.w;\n    this._updateTitle();\n    this._updateSubtitle();\n    this._updateDescription();\n    this._updateDescriptionDetails();\n    this._updateDetails();\n  }\n\n  _updateSubtitle() {\n    if (!this.subtitle && !this._Subtitle) {\n      return;\n    }\n\n    if (!this._Subtitle) {\n      this._Text.childList.addAt({\n        ref: 'Subtitle',\n        type: TextBox\n      });\n    }\n\n    this._Subtitle.patch({\n      content: this.subtitle,\n      style: {\n        textStyle: {\n          ...this.style.subtitleTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  _updateDescription() {\n    this._Description.patch({\n      content: this.description,\n      style: {\n        textStyle: {\n          ...this.style.descriptionTextStyle,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      }\n    });\n  }\n\n  _updateDescriptionDetails() {\n    this._DescriptionDetails.patch({\n      content: this.descriptionDetails,\n      style: {\n        textStyle: {\n          ...this.style.descriptionDetailsTextStyle,\n          maxLines: 1,\n          wordWrap: true,\n          wordWrapWidth: this._Text.w\n        }\n      },\n      y: this.style.descriptionDetailsStyle.paddingY\n    });\n  }\n\n  _updateDetails() {\n    const maxWidth = this._detailsMaxW;\n    this._Details.patch({\n      content: this.details,\n      style: {\n        textStyle: {\n          ...this.style.detailsTextStyle,\n          wordWrap: true,\n          maxLines: 1, // sets default for details\n          wordWrapWidth: maxWidth + this.style.fadeWidth / 2\n        }\n      }\n    });\n    if (this._Details.finalW > maxWidth) {\n      this._DetailsFader.patch({\n        w: maxWidth + this.style.fadeWidth / 2,\n        shader: {\n          type: FadeShader,\n          positionLeft: 0,\n          positionRight: this.style.fadeWidth\n        }\n      });\n    } else {\n      this._DetailsFader.shader = undefined;\n    }\n  }\n\n  _resolveDetails() {\n    this._detailsPromiseResolver && this._detailsPromiseResolver();\n    this._updatePositions();\n  }\n\n  _updateProvider() {\n    if (this.provider) {\n      this._Provider.patch({\n        mode: this.mode,\n        ...this.provider,\n        style: this.style.provider\n      });\n    }\n  }\n\n  _resolveProvider() {\n    this._providerPromiseResolver && this._providerPromiseResolver();\n    this._updatePositions();\n    this._updateDetails();\n  }\n\n  _updatePositions() {\n    this._Text.h = this._textH;\n    this._Text.w = this._textW;\n\n    this._DetailsWrapper.w = this._textW;\n    this._DetailsWrapper.h = Math.max(this._providerH, this._Details.h);\n    this._DetailsWrapper.y = this.h - this._DetailsWrapper.h;\n\n    this._Details.y = this._DetailsWrapper.h / 2;\n\n    this._Provider.x = this._DetailsWrapper.w - this._providerW;\n    this._Provider.y = this._DetailsWrapper.h - this._providerH;\n  }\n\n  get _textW() {\n    return this.w;\n  }\n\n  get _textH() {\n    return this.h - this._providerH;\n  }\n\n  get _providerW() {\n    return this._Provider.w;\n  }\n\n  get _providerH() {\n    return this._Provider._Row._Items.h;\n  }\n\n  get _detailsMaxW() {\n    return this.w - this._providerW - this.style.fadeWidth / 2;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Title && this._Title.announce,\n        this._Subtitle && this._Subtitle.announce,\n        this._Description && this._Description.announce,\n        this._DescriptionDetails && this._DescriptionDetails.announce,\n        this._Details && this._Details.announce,\n        this._Provider && this._Provider.announce\n      ]\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  expandedWidth: utils.getWidthByUpCount(theme, 2),\n  expandedHeight: utils.getDimensions(theme, {\n    ratioX: 16,\n    ratioY: 9,\n    upCount: 4\n  }).h,\n  imageSize: {\n    width: utils.getDimensions(theme, { ratioX: 16, ratioY: 9, upCount: 4 }).w,\n    height: utils.getDimensions(theme, { ratioX: 16, ratioY: 9, upCount: 4 }).h\n  },\n  metadata: { descriptionTextStyle: { maxLines: 2 } },\n  paddingVertical: theme.spacer.md * 1.5\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Card from '../Card';\nimport utils from '../../utils';\nimport Tile from '../Tile';\nimport MetadataCardContent from '../MetadataCardContent';\nimport * as styles from './CardContent.styles';\n\nexport default class CardContent extends Card {\n  static get __componentName() {\n    return 'CardContent';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      Tile: { type: Tile }\n    };\n  }\n\n  static get properties() {\n    return [\n      ...super.properties,\n      'tile',\n      'metadata',\n      'orientation',\n      'collapseToMetadata',\n      'shouldCollapse',\n      'src'\n    ];\n  }\n\n  static get tags() {\n    return [...super.tags, 'Metadata', 'Tile'];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'expandedW', curr: 'expandedWidth' },\n      { prev: 'expandedH', curr: 'expandedHeight' }\n    ];\n  }\n\n  _update() {\n    this._updateSize();\n    this._updateTile();\n    this._updateMetadata();\n    super._update();\n  }\n\n  _updateTitle() {}\n\n  _updateTitlePosition() {}\n\n  _updateTile() {\n    let w = this.style.imageSize.w;\n    let h = this.style.expandedHeight;\n    const radius =\n      Array.isArray(this.style.radius) && this.style.radius.length === 4\n        ? this.style.radius\n        : Array(4).fill(this.style.radius);\n\n    let tileRadius = radius;\n\n    if (!this._collapse) {\n      tileRadius =\n        this._orientation === 'horizontal'\n          ? [radius[0], 0, 0, radius[3]]\n          : [radius[0], radius[1], 0, 0];\n    }\n\n    if (this._orientation !== 'horizontal') {\n      w = this.style.expandedWidth;\n      h = this.style.imageSize.h;\n    }\n\n    // ensure a nested tile artwork src takes precedence over the class's src setter,\n    // but that if src is undefined in both the setter and tile artwork object,\n    // we don't incorrectly pass \"src: undefined\" to the Tile component (and in turn, Artwork)\n    let tile = this.tile;\n    if (this.src) {\n      tile = utils.clone({ src: this.src }, this.tile);\n    }\n\n    this._Tile.patch({\n      w,\n      h,\n      ...tile,\n      style: {\n        ...(tile?.style || {}),\n        radius: tileRadius\n      },\n      persistentMetadata: true,\n      alpha: this._shouldShowTile ? 1 : 0\n    });\n  }\n\n  _updateMetadata() {\n    const metadataPatch = {\n      ...this.metadata,\n      ...this._metadataPosition,\n      ...this._metadataDimensions,\n      mode: this.mode,\n      alpha: this._shouldShowMetadata ? 1 : 0,\n      style: this.style.metadata\n    };\n\n    if (this.style.marqueeOnFocus) {\n      metadataPatch.marquee = this._isFocusedMode;\n    }\n\n    if (!this._Metadata) {\n      metadataPatch.type = MetadataCardContent;\n    }\n\n    this.patch({ Metadata: metadataPatch });\n  }\n\n  _updateSize() {\n    let w = this.style.expandedWidth;\n    let h = this.style.expandedHeight;\n    if (this._collapse) {\n      if (this._orientation === 'horizontal') {\n        w = this._collapseW;\n      } else {\n        h = this._collapseH;\n      }\n    }\n    this.w = w;\n    this.h = h;\n  }\n\n  _getSrc() {\n    return (\n      (this.tile &&\n        ((this.tile.artwork && this.tile.artwork.src) || this.tile.src)) ||\n      this._src\n    );\n  }\n\n  get _metadataDimensions() {\n    const paddingHorizontal = this.style.paddingHorizontal * 2;\n    const paddingVertical = this.style.paddingVertical * 2;\n\n    let w =\n      this.style.expandedWidth - this.style.imageSize.w - paddingHorizontal;\n    let h = this.style.expandedHeight - paddingVertical;\n\n    if (this.orientation !== 'horizontal') {\n      w = this.style.expandedWidth - paddingHorizontal;\n      h = this.style.expandedHeight - this.style.imageSize.h - paddingVertical;\n    }\n    return { w, h };\n  }\n\n  get _metadataPosition() {\n    const paddingHorizontal = this.style.paddingHorizontal;\n    const paddingVertical = this.style.paddingVertical;\n\n    let x = paddingHorizontal + (this._collapse ? 0 : this.style.imageSize.w);\n    let y = paddingVertical;\n\n    if (this.orientation !== 'horizontal') {\n      x = paddingHorizontal;\n      y = paddingVertical + (this._collapse ? 0 : this.style.imageSize.h);\n    }\n\n    return { x, y };\n  }\n\n  get _shouldShowMetadata() {\n    return !this._collapse || this.collapseToMetadata;\n  }\n\n  get _shouldShowTile() {\n    return !this._collapse || (this._collapse && !this.collapseToMetadata);\n  }\n\n  get _collapse() {\n    return this.shouldCollapse && !this._isFocusedMode;\n  }\n\n  get _collapseW() {\n    return this.collapseToMetadata\n      ? this.style.expandedWidth - this.style.imageSize.w\n      : this.style.imageSize.w;\n  }\n\n  get _collapseH() {\n    return this.collapseToMetadata\n      ? this.style.expandedHeight - this.style.imageSize.h\n      : this.style.imageSize.h;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return (\n      this._announce || [\n        this._Metadata && this._Metadata.announce,\n        this._Tile && this._Tile.announce\n      ]\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './CardContent.styles';\nimport CardContent from './CardContent';\n\nexport default class CardContentHorizontal extends CardContent {\n  static get __componentName() {\n    return 'CardContentHorizontal';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _init() {\n    this._orientation = 'horizontal';\n    super._init();\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => {\n  const { w, h } = utils.getDimensions(theme, {\n    ratioX: 16,\n    ratioY: 9,\n    upCount: 3\n  });\n  return {\n    expandedWidth: utils.getWidthByColumnSpan(theme, 8),\n    expandedHeight: h,\n    imageSize: { width: w, height: h },\n    metadata: { descriptionTextStyle: { maxLines: 3 } }\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './CardContentHorizontalLarge.styles';\nimport CardContentHorizontal from './CardContentHorizontal';\n\nexport default class CardContentHorizontalLarge extends CardContentHorizontal {\n  static get __componentName() {\n    return 'CardContentHorizontalLarge';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  expandedWidth: utils.getWidthByUpCount(theme, 4),\n  expandedHeight:\n    utils.getDimensions(theme, { ratioX: 16, ratioY: 9, upCount: 4 }).h +\n    theme.spacer.xxxl * 7 +\n    theme.spacer.lg +\n    theme.spacer.xxs,\n  metadata: { descriptionTextStyle: { maxLines: 3 } },\n  marqueeOnFocus: true\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './CardContentVertical.styles';\nimport CardContent from './CardContent';\n\nexport default class CardContentVertical extends CardContent {\n  static get __componentName() {\n    return 'CardContentVertical';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _init() {\n    this._orientation = 'vertical';\n    super._init();\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  expandedHeight:\n    utils.getDimensions(theme, { ratioX: 16, ratioY: 9, upCount: 4 }).h +\n    theme.spacer.md * 14,\n  metadata: { descriptionTextStyle: { maxLines: 1 } }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './CardContentVerticalSmall.styles';\nimport CardContentVertical from './CardContentVertical';\n\nexport default class CardContentVerticalSmall extends CardContentVertical {\n  static get __componentName() {\n    return 'CardContentVerticalSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _setMetadata(metadata) {\n    return {\n      ...metadata,\n      details: undefined,\n      provider: undefined\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const strokeWidth = theme.stroke.sm;\n  const size = theme.spacer.xl;\n  return {\n    width: size,\n    height: size,\n    iconWidth: theme.spacer.md,\n    iconHeight: theme.spacer.md,\n    radius: theme.radius.xs,\n    strokeWidth\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Checkbox from './Checkbox';\nimport * as styles from './CheckboxSmall.styles';\n\nexport default class CheckboxSmall extends Checkbox {\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  itemSpacing: theme.layout.gutterY,\n  scrollIndex: 0,\n  itemTransition: {\n    ...theme.animation.standardEntrance,\n    duration: theme.animation.duration.fast\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport NavigationManager from '../NavigationManager';\nimport { getY } from '../../utils';\nimport * as styles from './Column.styles';\n\nexport default class Column extends NavigationManager {\n  static get __componentName() {\n    return 'Column';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      direction: 'column'\n    };\n  }\n\n  _isOnScreenForScrolling(child) {\n    if (!child) return false;\n\n    const y = getY(child);\n    if (!Number.isFinite(y)) return false;\n    const itemsTransitionY = this.getTransitionYTargetValue();\n    const columnY = this.core.renderContext.py;\n    let itemY = columnY + itemsTransitionY + y;\n    let yModifier;\n\n    // This section here takes the difference between a possible target value\n    // and subtracts it from the current child x. That value then is subtracted from the initial\n    // itemX value calculated on the core renderContext px value to more accurately\n    // calculate the item's location on screen when it's own x value will be updating.\n    if (child.transition('y')) {\n      yModifier = child.y - child.transition('y').targetValue;\n      itemY = itemY - yModifier;\n    }\n    return itemY >= columnY && itemY + child.h <= columnY + this.h;\n  }\n\n  _shouldScroll() {\n    if (this.alwaysScroll) {\n      return true;\n    }\n    let shouldScroll = false;\n    if (!this.neverScroll) {\n      const isCompletelyOnScreen = this._isOnScreenForScrolling(this.selected);\n      const lastChild = this.Items.childList.last;\n      shouldScroll =\n        lastChild &&\n        (this.shouldScrollUp() ||\n          this.shouldScrollDown() ||\n          !isCompletelyOnScreen);\n    }\n\n    if (this.selectedIndex < this.scrollIndex) {\n      shouldScroll = false;\n    }\n\n    return shouldScroll;\n  }\n\n  _getScrollY() {\n    let itemsContainerY;\n    let itemIndex = this.selectedIndex - this.scrollIndex;\n    itemIndex = itemIndex < 0 ? 0 : itemIndex;\n    if (itemIndex === this._firstFocusableIndex()) {\n      itemIndex = 0;\n    }\n\n    if (this.Items.children[itemIndex]) {\n      itemsContainerY = this.Items.children[itemIndex].transition('y')\n        ? -this.Items.children[itemIndex].transition('y').targetValue +\n          this.itemPosY\n        : -this.Items.children[itemIndex].y + this.itemPosY;\n    }\n\n    return itemsContainerY;\n  }\n\n  _render(next, prev) {\n    this._prevLastScrollIndex = this._lastScrollIndex;\n\n    if (\n      this.plinko &&\n      prev &&\n      prev.selected &&\n      !(this.items.indexOf(prev) === 0 && prev.skipPlinko)\n    ) {\n      const prevPlinko = this.checkSkipPlinko(prev, next);\n      next.selectedIndex = this._getIndexOfItemNear(next, prevPlinko || prev);\n    } else if (next && !next.selectedIndex) {\n      next.selectedIndex = 0;\n    }\n\n    let itemsContainerY;\n    if (!this.Items.children.length) {\n      itemsContainerY = this.itemPosY;\n    } else if (this._shouldScroll()) {\n      itemsContainerY = this._getScrollY();\n    }\n\n    if (itemsContainerY !== undefined) {\n      this.updatePositionOnAxis(this.Items, itemsContainerY);\n    }\n\n    this.onScreenEffect(this.onScreenItems);\n  }\n\n  _performRender() {\n    this._render(this.selected, this.prevSelected);\n  }\n\n  checkSkipPlinko(prev, next) {\n    // If previous doesn't have skip plinko or previous is the first or last item\n    if (\n      !prev ||\n      !prev.skipPlinko ||\n      [0, this.items.length - 1].includes(this.items.indexOf(prev))\n    ) {\n      return null;\n    }\n\n    const prevIndex = this.items.indexOf(prev);\n    const direction = prevIndex - this.items.indexOf(next);\n    const up = direction > 0;\n\n    // Grab all items below prev if up or all items before prev if down\n    const prevItems = up\n      ? this.items.slice(prevIndex).map(i => ({\n          skipPlinko: i.skipPlinko,\n          index: this.items.indexOf(i)\n        }))\n      : this.items\n          .slice(0, prevIndex + 1)\n          .map(i => ({\n            skipPlinko: i.skipPlinko,\n            index: this.items.indexOf(i)\n          }))\n          .reverse();\n\n    // first item that has skipPlinko but the previous does not\n    // Start at the index prev\n    const endOfMultiSkipPlinkos = prevItems.find(\n      i => i.skipPlinko && !this.items[i.index + direction].skipPlinko\n    );\n    const prevPlinkoIndex = endOfMultiSkipPlinkos\n      ? endOfMultiSkipPlinkos.index + direction\n      : prevIndex + direction; // +/- 1, item index before prev\n\n    return this.items[prevPlinkoIndex];\n  }\n\n  get _itemsY() {\n    return getY(this.Items);\n  }\n\n  $removeItem(item) {\n    if (item) {\n      const wasSelected = item === this.selected;\n      this.Items.childList.remove(item);\n      this.queueRequestUpdate();\n\n      if (wasSelected || this.selectedIndex >= this.items.length) {\n        // eslint-disable-next-line no-self-assign\n        this.selectedIndex = this._selectedIndex;\n      }\n\n      if (!this.items.length) {\n        this.fireAncestors('$columnEmpty');\n      }\n    }\n  }\n\n  $columnChanged() {\n    this.queueRequestUpdate();\n  }\n\n  _isOnScreen(child) {\n    if (!child) return false;\n\n    return this._isComponentVerticallyVisible(child);\n  }\n\n  // can be overridden\n  onScreenEffect() {}\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const paddingX = theme.spacer.lg;\n  const radius = theme.radius.xl;\n  const logoRadius = Math.max(radius - paddingX / 2, 0);\n\n  return {\n    height: theme.spacer.md * 8,\n    iconStyle: {\n      radius: radius,\n      width: theme.spacer.xxxl,\n      height: theme.spacer.xxxl\n    },\n    logoStyle: {\n      radius: logoRadius,\n      width: theme.spacer.md * 7,\n      height: theme.spacer.md * 6\n    },\n    minWidth: theme.spacer.md * 9,\n    paddingX,\n    paddingXNoTitle: theme.spacer.md,\n    prefixPadding: theme.spacer.md,\n    radius,\n    contentSpacing: theme.spacer.md\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ButtonSmall } from '../Button';\nimport Icon from '../Icon';\nimport * as styles from './Control.styles';\n\nexport default class Control extends ButtonSmall {\n  static get __componentName() {\n    return 'Control';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'icon', 'logo', 'shouldCollapse'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  _update() {\n    // ordering this way to make sure that this._Title is defined so the title visibility can be set properly when _updateCollapseStatus is called\n    this._updatePrefixStyle();\n    super._updateTitle();\n    this._updateCollapseStatus();\n    super._update();\n  }\n\n  _updateCollapseStatus() {\n    if (this._Title) {\n      this._Title.visible = !this._collapse;\n    }\n  }\n\n  // if user provides styling of either logo or icon, apply the style to the respected element\n  _updatePrefixStyle() {\n    if (this._prefix) {\n      // checking logo first since it takes precedence\n      if (this.logo) {\n        this._updatePrefixObj(this.logo, {\n          style: { color: undefined, ...this.style.logoStyle }\n        });\n      } else if (this.icon) {\n        this._updatePrefixObj(this.icon, { style: this.style.iconStyle });\n      }\n    }\n  }\n\n  // optimization\n  // sets Title's x and mountX values\n  _patchTitle(x, mountX) {\n    this._Title.patch({\n      x,\n      mountX\n    });\n  }\n\n  _updateContentPosition() {\n    if (this._prefix && this._Title) {\n      // placing prefix always to the left if title is present\n      // justification should only apply to title in this case\n      this._Content.patch({\n        mountX: 0,\n        x: this._paddingLeft\n      });\n\n      switch (this._justify) {\n        case 'left':\n          this._patchTitle(0, 0);\n          break;\n        case 'right':\n          if (this.w < this._Prefix.w + this._Title.w) {\n            this._patchTitle(0, 0);\n          } else {\n            const leftOverSpace =\n              this.w -\n              (this._paddingLeft +\n                this._paddingRight +\n                this._Prefix.w +\n                this.style.contentSpacing);\n\n            this._patchTitle(leftOverSpace, 1);\n          }\n          break;\n        case 'center':\n        default:\n          if (this.fixed) {\n            // if the component width is less than the prefix and title then we go to the default padding on left and right of title\n            if (this.w < this._Prefix.w + this._Title.w) {\n              this._patchTitle(0, 0);\n            } else {\n              const middle =\n                (this.w -\n                  (this._paddingLeft + this._Prefix.w + this._paddingRight)) /\n                2;\n              this._patchTitle(middle, 0.5);\n            }\n          } else if (this._Prefix !== undefined) {\n            const middle =\n              (this.w -\n                (this._paddingLeft +\n                  this._Prefix.w +\n                  this.style.contentSpacing +\n                  this._paddingRight)) /\n              2;\n            this._patchTitle(middle, 0.5);\n          }\n          break;\n      }\n    } else {\n      super._updateContentPosition();\n      this._Title && this._patchTitle(0, 0); // RESET Title back to original position\n    }\n  }\n\n  // does nothing if a prefix property is passed in for Control\n  _setPrefix() {\n    return;\n  }\n\n  // does nothing if a suffix property is passed in for Control\n  _setSuffix() {\n    return;\n  }\n\n  // optimization\n  // turning prefix property setter into a function since functionality is repeated\n  _updatePrefixObj(icon, props = {}) {\n    this._prefix = {\n      type: Icon,\n      icon,\n      ...props\n    };\n  }\n\n  _setIcon(icon) {\n    if (!this.logo) {\n      // if icon is defined then set it otherwise set prefix to be undefined\n      if (icon) {\n        this._updatePrefixObj(icon, { style: this.style.iconStyle });\n      } else {\n        this._prefix = icon;\n      }\n    }\n    return icon;\n  }\n\n  _setLogo(logo) {\n    if (logo) {\n      this._updatePrefixObj(logo, {\n        style: { color: undefined, ...this.style.logoStyle }\n      });\n      // if logo is set to undefined but an icon is provided, display the icon\n    } else if (this.icon) {\n      this._updatePrefixObj(this.icon, { style: this.style.iconStyle });\n    } else {\n      this._prefix = logo;\n    }\n    return logo;\n  }\n\n  get _paddingLeft() {\n    return this.logo ? this.style.paddingXNoTitle : this.style.paddingX;\n  }\n\n  get _paddingRight() {\n    return this.logo && (!this._hasTitle || this._collapse)\n      ? this.style.paddingXNoTitle\n      : this.style.paddingX;\n  }\n\n  get _collapse() {\n    return this.shouldCollapse && !this._isFocusedMode;\n  }\n\n  get _announceComponentName() {\n    return Control.__componentName;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { base as ControlStyle } from './Control.styles';\n\nexport const base = theme => {\n  const parentStyle = ControlStyle(theme);\n  const height = theme.spacer.md * 7;\n  const radiusOffset = (parentStyle.height - height) / 2;\n  const radius = Math.max(parentStyle.radius - radiusOffset, 0);\n  const logoRadius = Math.max(radius - parentStyle.paddingX / 2, 0);\n\n  return {\n    height,\n    logoStyle: {\n      radius: logoRadius,\n      height: theme.spacer.md * 5,\n      width: theme.spacer.md * 6\n    },\n    radius,\n    minWidth: theme.spacer.md * 8,\n    textStyle: theme.typography.button2\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Control from './Control';\nimport * as styles from './ControlSmall.styles';\n\nexport default class ControlSmall extends Control {\n  static get __componentName() {\n    return 'ControlSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByUpCount } from '../../utils';\n\nexport const base = theme => ({\n  width: getWidthByUpCount(theme, 1),\n  titleMarginBottom: theme.spacer.lg,\n  titleMarginLeft: theme.layout.gutterX,\n  titleTextStyle: {\n    ...theme.typography.headline1,\n    textColor: theme.color.textNeutral\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    titleTextStyle: { textColor: theme.color.textNeutral }\n  },\n  inverse: {\n    titleTextStyle: { textColor: theme.color.textInverse }\n  },\n  brand: {\n    titleTextStyle: { textColor: theme.color.textNeutral }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport TextBox from '../TextBox';\nimport Row from '../Row';\n\nimport * as styles from './TitleRow.styles';\n\nexport default class TitleRow extends Row {\n  static get __componentName() {\n    return 'TitleRow';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'title'];\n  }\n\n  static get tags() {\n    return [...super.tags, 'Title'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'rowMarginTop', curr: 'titleMarginBottom' }];\n  }\n\n  _titleLoaded() {\n    this._updateRow();\n  }\n\n  _construct() {\n    super._construct();\n    this._autoResizeHeight = true;\n  }\n\n  _update() {\n    super._update();\n    this._updateTitle();\n    this._updateRow();\n  }\n\n  _autoResize() {\n    this.w = this.w || this.style.w;\n    this.h = this.autoResizeHeight ? this.Items.y + this.Items.h : this.h;\n  }\n\n  _updateTitle() {\n    if (!this.title) {\n      if (this._Title) {\n        this.patch({ Title: undefined });\n      }\n      return;\n    }\n\n    let titlePatch = {\n      x: this.style.titleMarginLeft,\n      content: this.title,\n      style: { textStyle: this.style.titleTextStyle }\n    };\n    if (!this._Title) {\n      titlePatch = {\n        ...this._titleFirstLoadProps,\n        ...titlePatch\n      };\n    }\n    this.patch({ Title: titlePatch });\n  }\n\n  get _titleFirstLoadProps() {\n    return {\n      type: TextBox,\n      signals: {\n        textBoxChanged: '_titleLoaded'\n      }\n    };\n  }\n\n  _updateRow() {\n    this.applySmooth(this.Items, {\n      y: this.title ? this._Title.finalH + this.style.titleMarginBottom : 0\n    });\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Title && this._Title.announce);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  extraItemSpacing: theme.spacer.lg\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport TitleRow from '../TitleRow';\n\nimport * as styles from './ControlRow.styles';\n\nexport default class ControlRow extends TitleRow {\n  static get __componentName() {\n    return 'ControlRow';\n  }\n\n  static get __themeStyles() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      alpha: 0,\n      lazyScroll: true,\n      signals: {\n        selectedChange: '_getMoreItems'\n      }\n    };\n  }\n\n  static get properties() {\n    return [...super.properties, 'extraItemSpacing'];\n  }\n\n  _construct() {\n    super._construct();\n    this._leftControls = [];\n    this._contentItems = [];\n    this._rightControls = [];\n    this._lastLeftControlIndex = -1;\n    this._lastItemIndex = -1;\n    this._lazyLoadBuffer = 0;\n  }\n\n  _updateContent() {\n    const itemsToAppend = [];\n    if (this.leftControls.length) {\n      itemsToAppend.push(...this._withExtraSpacing(this.leftControls, true));\n    }\n    if (this.contentItems.length) {\n      itemsToAppend.push(...this._withExtraSpacing(this.contentItems));\n    }\n    if (this.rightControls.length) {\n      itemsToAppend.push(...this.rightControls);\n    }\n    if (itemsToAppend.length) {\n      this.patch({\n        alpha: 1,\n        items: itemsToAppend,\n        selectedIndex: this.leftControls.length,\n        startLazyScrollIndex: this.leftControls.length,\n        stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n      });\n    }\n  }\n\n  _withExtraSpacing(items, isControl = false) {\n    const itemsCopy = [...items];\n    const prevItems = isControl ? this._prevLeftControls : this._prevItems;\n\n    // after appending remove extra spacing from the previous last item\n    if (prevItems && prevItems.length && itemsCopy[prevItems.length - 1]) {\n      itemsCopy[prevItems.length - 1].extraItemSpacing = 0;\n    }\n\n    itemsCopy[itemsCopy.length - 1].extraItemSpacing =\n      this.extraItemSpacing == undefined\n        ? this.style.extraItemSpacing\n        : this.extraItemSpacing;\n\n    if (isControl) {\n      this._prevLeftControls = itemsCopy;\n    } else {\n      this._prevItems = itemsCopy;\n    }\n    return itemsCopy;\n  }\n\n  _getMoreItems() {\n    if (this.lazyLoadBuffer) {\n      const loadMoreIndex = this.contentItems.length - 1 - this.lazyLoadBuffer;\n      if (\n        this.selectedIndex - this.leftControls.length >= loadMoreIndex &&\n        this.selectedIndex < this.leftControls.length + this.contentItems.length\n      ) {\n        this.loadMoreItems();\n      }\n    }\n  }\n\n  loadMoreItems() {\n    this.signal('loadMoreItems');\n  }\n\n  _selectedChange(selected, prevSelected) {\n    super._selectedChange(selected, prevSelected);\n    this._getMoreItems();\n  }\n\n  _appendItemsAt(items, appendIndex, removeSpacingIndex) {\n    const itemsCopy = [...items];\n\n    if (removeSpacingIndex != undefined && removeSpacingIndex >= 0) {\n      this.items[removeSpacingIndex].extraItemSpacing = undefined;\n      itemsCopy[itemsCopy.length - 1].extraItemSpacing =\n        this.extraItemSpacing == undefined\n          ? this.style.extraItemSpacing\n          : this.extraItemSpacing;\n    }\n    this.appendItemsAt(itemsCopy, appendIndex);\n  }\n\n  addContentItems(items) {\n    const lastSelected = this.selectedIndex;\n    const itemsToAdd = this._createContentItems(items);\n    const addIndex = this._lastItemIndex + 1;\n    this._appendItemsAt(itemsToAdd, addIndex, this._lastItemIndex);\n    this._lastItemIndex += itemsToAdd.length;\n\n    if (this._contentItems) {\n      this._contentItems = [...this.contentItems, ...itemsToAdd];\n    }\n\n    this._updateContent();\n    this.selectedIndex = lastSelected;\n\n    this.patch({\n      stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n    });\n  }\n\n  addContentItemsAt(items, itemIndex) {\n    const itemsToAdd = this._createContentItems(items);\n    const addIndex = this._lastLeftControlIndex + 1 + itemIndex;\n    if (addIndex === this._lastItemIndex + 1) {\n      this.addContentItems(itemsToAdd);\n    } else {\n      this._appendItemsAt(itemsToAdd, addIndex);\n\n      if (this._contentItems) {\n        this._contentItems.splice(addIndex, 0, ...itemsToAdd);\n        this._lastItemIndex = this.contentItems.length - 1;\n      }\n\n      this.patch({\n        stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n      });\n    }\n  }\n\n  removeContentItemAt(index) {\n    const removeIndex = this._lastLeftControlIndex + 1 + index;\n    this.removeItemAt(removeIndex);\n    this._lastItemIndex--;\n\n    if (this._contentItems) {\n      this._contentItems.splice(index, 1);\n    }\n\n    this.patch({\n      startLazyScrollIndex: this.leftControls.length,\n      stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n    });\n  }\n\n  addLeftControls(controls) {\n    const itemsToAdd = this._createControls(controls);\n    const addIndex = this._lastLeftControlIndex + 1;\n\n    this._appendItemsAt(itemsToAdd, addIndex, this._lastLeftControlIndex);\n    if (this._leftControls) {\n      this._leftControls = [...this._leftControls, ...controls];\n      this._lastLeftControlIndex = this._leftControls.length - 1;\n      this._lastItemIndex += controls.length;\n    }\n\n    this.patch({\n      startLazyScrollIndex: this.leftControls.length,\n      stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n    });\n  }\n\n  addLeftControlsAt(controls, index) {\n    const itemsToAdd = this._createControls(controls);\n    if (index === this._lastLeftControlIndex + 1) {\n      this.addLeftControls(controls);\n    } else {\n      this._appendItemsAt(itemsToAdd, index);\n      if (this.leftControls) {\n        this._leftControls.splice(index, 0, ...controls);\n        this._lastLeftControlIndex = this._leftControls.length - 1;\n        this._lastItemIndex += controls.length;\n      }\n\n      this.patch({\n        startLazyScrollIndex: this.leftControls.length,\n        stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n      });\n    }\n  }\n\n  removeLeftControlAt(index) {\n    this.removeItemAt(index);\n    this._lastLeftControlIndex--;\n    this._lastItemIndex--;\n\n    if (this.leftControls) {\n      this._leftControls.splice(index, 1);\n    }\n\n    this.patch({\n      startLazyScrollIndex: this.leftControls.length,\n      stopLazyScrollIndex: this.leftControls.length + this.items.length - 1\n    });\n  }\n\n  addRightControls(controls) {\n    this._rightControls.push(...controls);\n    this._appendItemsAt(this._createControls(controls), this.items.length);\n  }\n\n  addRightControlsAt(controls, index) {\n    const appendIndex =\n      this._leftControls.length + this._contentItems.length + index;\n    this._rightControls.splice(index, 0, ...controls);\n    this._appendItemsAt(this._createControls(controls), appendIndex);\n  }\n\n  removeRightControlAt(index) {\n    const removeIndex =\n      this.leftControls.length + this.contentItems.length + index;\n    this.removeItemAt(removeIndex);\n\n    if (this.rightControls) {\n      this._rightControls.splice(index, 1);\n    }\n  }\n\n  _createControls(controls) {\n    return controls.map(controlProps => ({\n      backgroundType: 'fill',\n      centerInParent: true,\n      ...controlProps\n    }));\n  }\n\n  _createContentItems(contentItems) {\n    const newContentItems = contentItems.map(itemProps => ({\n      ...itemProps,\n      centerInParent: true\n    }));\n\n    return newContentItems;\n  }\n\n  _setLeftControls(leftControls) {\n    this._leftControls = this._createControls(leftControls);\n    this._lastLeftControlIndex = leftControls.length - 1;\n    this._updateContent();\n  }\n\n  _getLeftControls() {\n    return this._leftControls;\n  }\n\n  _setRightControls(rightControls) {\n    this._rightControls = this._createControls(rightControls);\n    this._updateContent();\n  }\n\n  _getRightControls() {\n    return this._rightControls;\n  }\n\n  _getContentItems() {\n    return this._contentItems;\n  }\n\n  _setContentItems(items) {\n    this._contentItems = this._createContentItems(items);\n    this._lastItemIndex = this._lastLeftControlIndex + items.length;\n    this._updateContent();\n  }\n\n  _getLeftControlItems() {\n    if (this.leftControls.length) {\n      return this.items.slice(0, this._lastLeftControlIndex + 1);\n    }\n    return [];\n  }\n\n  _getContentItemItems() {\n    if (this.contentItems.length) {\n      return this.items.slice(\n        this._lastLeftControlIndex + 1,\n        this._lastItemIndex + 1\n      );\n    }\n    return [];\n  }\n\n  _getRightControlItems() {\n    if (this.rightControls.length) {\n      const leftSiblingIndex =\n        this._lastItemIndex || this._lastLeftControlIndex;\n      return leftSiblingIndex\n        ? this.items.slice(leftSiblingIndex + 1)\n        : this.items;\n    }\n    return [];\n  }\n\n  set leftControls(leftControls) {\n    this._setLeftControls(leftControls);\n  }\n\n  get leftControls() {\n    return this._getLeftControls();\n  }\n\n  set rightControls(rightControls) {\n    this._setRightControls(rightControls);\n  }\n\n  get rightControls() {\n    return this._getRightControls();\n  }\n\n  set contentItems(items) {\n    this._setContentItems(items);\n  }\n\n  get contentItems() {\n    return this._getContentItems();\n  }\n\n  set lazyLoadBuffer(lazyLoadBuffer) {\n    this._lazyLoadBuffer = lazyLoadBuffer;\n    this._getMoreItems();\n  }\n\n  get lazyLoadBuffer() {\n    return this._lazyLoadBuffer;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  propertyTextStyle: {\n    ...theme.typography.headline1,\n    textColor: theme.color.textNeutral\n  },\n  valueTextStyle: {\n    ...theme.typography.body1,\n    textColor: theme.color.textNeutral\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport context from '../../globals/context/index';\nimport Column from '../Column';\nimport Row from '../Row';\nimport TextBox from '../TextBox';\nimport { getWidthByColumnSpan } from '../../utils';\nimport * as styles from './GridOverlay.styles';\n\nclass Spacer extends Base {\n  static get __componentName() {\n    return 'Spacer';\n  }\n\n  static _template() {\n    return {\n      Line: {\n        h: Spacer._lineThickness,\n        rect: true,\n        mountY: 0.5,\n        TickLeft: {\n          ...Spacer._tick,\n          x: Spacer._lineThickness * -1\n        },\n        TickRight: Spacer._tick\n      }\n    };\n  }\n\n  static get properties() {\n    return ['lineColor'];\n  }\n\n  static get tags() {\n    return ['Line', 'TickLeft', 'TickRight'];\n  }\n\n  static get _lineThickness() {\n    return 3;\n  }\n\n  static get _tickLength() {\n    return 25;\n  }\n\n  static get _tick() {\n    return {\n      rect: true,\n      mountY: 0.5,\n      w: Spacer._lineThickness,\n      h: Spacer._tickLength,\n      y: Spacer._lineThickness / 2\n    };\n  }\n\n  _update() {\n    this._Line.w = this.w;\n    this._TickRight.x = this._Line.w;\n\n    if (this.lineColor) {\n      this._Line.color =\n        this._TickLeft.color =\n        this._TickRight.color =\n          this.lineColor;\n    }\n\n    this.rotation = this.vertical ? Math.PI / 2 : 0;\n    this.signal('spacerLoaded');\n  }\n}\n\nexport default class GridOverlay extends Base {\n  static get __componentName() {\n    return 'GridOverlay';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    const textRow = {\n      type: Row,\n      autoResizeHeight: true,\n      Items: {\n        Property: {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_update'\n          }\n        },\n        Value: {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_update'\n          },\n          centerInParent: true\n        }\n      }\n    };\n\n    return {\n      Columns: {\n        alpha: 0.001,\n        type: Row\n      },\n      Margins: {\n        alpha: 0.001,\n        Horizontal: {\n          Left: {\n            type: Spacer,\n            signals: {\n              spacerLoaded: '_update'\n            }\n          },\n          Right: {\n            type: Spacer,\n            signals: {\n              spacerLoaded: '_update'\n            }\n          }\n        },\n        Vertical: {\n          Top: { type: Spacer, vertical: true }\n        }\n      },\n      Safe: {\n        alpha: 0.001,\n        Horizontal: {\n          Left: {\n            type: Spacer,\n            signals: {\n              spacerLoaded: '_update'\n            }\n          },\n          Right: {\n            type: Spacer,\n            signals: {\n              spacerLoaded: '_update'\n            }\n          }\n        },\n        Vertical: {\n          Top: { type: Spacer, vertical: true },\n          Bottom: { type: Spacer, vertical: true }\n        }\n      },\n      Gutters: {\n        alpha: 0.001,\n        Horizontal: {\n          type: Spacer,\n          signals: {\n            spacerLoaded: '_update'\n          }\n        }\n      },\n      TextPanel: {\n        alpha: 0.001,\n        type: Column,\n        autoResizeHeight: true,\n        Items: {\n          ScreenW: textRow,\n          ScreenH: textRow,\n          ColumnCount: textRow,\n          MarginX: textRow,\n          MarginY: textRow,\n          GutterX: textRow,\n          GutterY: textRow,\n          Safe: textRow\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return [\n      'showColumns',\n      'showMargins',\n      'showSafe',\n      'showGutters',\n      'showText'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'Columns',\n      'Margins',\n      { name: 'MarginHorizontal', path: 'Margins.Horizontal' },\n      { name: 'MarginLeft', path: 'Margins.Horizontal.Left' },\n      { name: 'MarginRight', path: 'Margins.Horizontal.Right' },\n      { name: 'MarginVertical', path: 'Margins.Vertical' },\n      { name: 'MarginTop', path: 'Margins.Vertical.Top' },\n      'Safe',\n      { name: 'SafeHorizontal', path: 'Safe.Horizontal' },\n      { name: 'SafeLeft', path: 'Safe.Horizontal.Left' },\n      { name: 'SafeRight', path: 'Safe.Horizontal.Right' },\n      { name: 'SafeVertical', path: 'Safe.Vertical' },\n      { name: 'SafeTop', path: 'Safe.Vertical.Top' },\n      { name: 'SafeBottom', path: 'Safe.Vertical.Bottom' },\n      'Gutters',\n      { name: 'GutterHorizontal', path: 'Gutters.Horizontal' },\n      'TextPanel',\n      { name: 'TextScreenW', path: 'TextPanel.Items.ScreenW' },\n      { name: 'TextScreenH', path: 'TextPanel.Items.ScreenH' },\n      { name: 'TextColumnCount', path: 'TextPanel.Items.ColumnCount' },\n      { name: 'TextMarginX', path: 'TextPanel.Items.MarginX' },\n      { name: 'TextMarginY', path: 'TextPanel.Items.MarginY' },\n      { name: 'TextGutterX', path: 'TextPanel.Items.GutterX' },\n      { name: 'TextGutterY', path: 'TextPanel.Items.GutterY' },\n      { name: 'TextSafe', path: 'TextPanel.Items.Safe' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._showColumns =\n      this._showMargins =\n      this._showSafe =\n      this._showGutters =\n      this._showText =\n        true;\n  }\n\n  _update() {\n    this._updateGlobalThemeProps();\n    this._updateMargins();\n    this._updateSafe();\n    this._updateColumns();\n    this._updateGutters();\n    this._updateText();\n    this._updateVisibility();\n  }\n\n  _updateVisibility() {\n    this._Columns.smooth = { alpha: Number(this.showColumns) };\n    this._Margins.smooth = { alpha: Number(this.showMargins) };\n    this._Safe.smooth = { alpha: Number(this.showSafe) };\n    this._Gutters.smooth = { alpha: Number(this.showGutters) };\n    this._TextPanel.smooth = { alpha: Number(this.showText) };\n  }\n\n  _updateGlobalThemeProps() {\n    const { layout, color } = context.theme;\n    const {\n      screenW,\n      screenH,\n      columnCount,\n      marginX,\n      marginY,\n      gutterX,\n      gutterY,\n      safe\n    } = layout;\n\n    this._screenW = screenW;\n    this._screenH = screenH;\n    this._columnCount = columnCount;\n    this._marginX = marginX;\n    this._marginY = marginY;\n    this._safe = safe;\n    this._gutterX = gutterX;\n    this._gutterY = gutterY;\n\n    this._columnColor = color.interactiveNeutralFocusSoft;\n    this._marginColor = color.green;\n    this._safeColor = color.red;\n    this._gutterColor = color.blue;\n  }\n\n  _updateMargins() {\n    const marginPatch = { lineColor: this._marginColor };\n\n    // Horizontal\n    const marginHorizontalPatch = { ...marginPatch, w: this._marginX };\n    this._MarginHorizontal.y = this._screenH / 2;\n    this._MarginLeft.patch(marginHorizontalPatch);\n    this._MarginRight.patch(marginHorizontalPatch);\n    this._MarginRight.x = this._screenW - this._marginX;\n\n    // Vertical\n    const marginVerticalPatch = { ...marginPatch, w: this._marginY };\n    this._MarginVertical.x = this._marginX - marginVerticalPatch.w / 2;\n    this._MarginTop.patch(marginVerticalPatch);\n    this._MarginTop.patch(marginVerticalPatch);\n    this._MarginTop.y = marginVerticalPatch.w / 2;\n  }\n\n  _updateSafe() {\n    const safePatch = { lineColor: this._safeColor, w: this._safe };\n\n    // Horizontal\n    this._SafeHorizontal.y = this._screenH / 4;\n    this._SafeLeft.patch(safePatch);\n    this._SafeRight.patch(safePatch);\n    this._SafeRight.x = this._screenW - this._safe;\n\n    // Vertical\n    this._SafeVertical.x = (this._screenW - safePatch.w) / 2;\n    this._SafeVertical.y = safePatch.w / 2;\n    this._SafeTop.patch(safePatch);\n    this._SafeBottom.patch(safePatch);\n    this._SafeBottom.y = this._screenH - this._safe;\n  }\n\n  _updateColumns() {\n    this._Columns.patch({\n      w: this._screenW,\n      h: this._screenH,\n      x: this._marginX,\n      style: {\n        itemSpacing: this._gutterX\n      },\n      items: this._columnRects\n    });\n  }\n\n  get _columnRects() {\n    return Array.apply(null, { length: this._columnCount }).map(() => ({\n      rect: true,\n      w: getWidthByColumnSpan(this.theme, 1),\n      h: this._screenH,\n      color: this._columnColor\n    }));\n  }\n\n  _updateGutters() {\n    const gutterPatch = { lineColor: this._gutterColor, w: this._gutterY };\n\n    // Horizontal\n    this._GutterHorizontal.patch({\n      ...gutterPatch,\n      x: (this._screenW - gutterPatch.w) / 2,\n      y: this._screenH / 4\n    });\n  }\n\n  _updatePropertyTextStyle(textPanelName, color) {\n    // clone the object so as not to mutate it\n    const style = { textStyle: { ...this.style.propertyTextStyle } };\n    if (color) {\n      style.textStyle.textColor = color;\n    }\n    textPanelName.Items.tag('Property').style = style;\n  }\n\n  _updateValueTextStyle(textPanelName) {\n    textPanelName.Items.tag('Value').style = {\n      textStyle: this.style.valueTextStyle\n    };\n  }\n\n  _updateText() {\n    const prop = 'Property';\n    const val = 'Value';\n\n    this._TextPanel.x =\n      this._screenW - this._marginX - getWidthByColumnSpan(this.theme, 3);\n    this._TextPanel.y = this._safe;\n\n    this._TextScreenW.Items.tag(prop).content = 'Screen Width';\n    this._TextScreenW.Items.tag(val).content = `${this._screenW}px`;\n    this._updatePropertyTextStyle(this._TextScreenW);\n    this._updateValueTextStyle(this._TextScreenW);\n\n    this._TextScreenH.Items.tag(prop).content = 'Screen Height';\n    this._TextScreenH.Items.tag(val).content = `${this._screenH}px`;\n    this._updatePropertyTextStyle(this._TextScreenH);\n    this._updateValueTextStyle(this._TextScreenH);\n\n    this._TextColumnCount.Items.tag(prop).content = 'Columns';\n    this._TextColumnCount.Items.tag(val).content = `${\n      this._columnCount\n    }, ${Math.round(getWidthByColumnSpan(this.theme, 1))}px each`;\n    this._updatePropertyTextStyle(this._TextColumnCount);\n    this._updateValueTextStyle(this._TextColumnCount);\n\n    this._TextMarginX.Items.tag(prop).content = 'Margin-X';\n    this._TextMarginX.Items.tag(val).content = `${this._marginX}px`;\n    this._updatePropertyTextStyle(this._TextMarginX, this._marginColor);\n    this._updateValueTextStyle(this._TextMarginX);\n\n    this._TextMarginY.Items.tag(prop).content = 'Margin-Y';\n    this._TextMarginY.Items.tag(val).content = `${this._marginY}px`;\n    this._updatePropertyTextStyle(this._TextMarginY, this._marginColor);\n    this._updateValueTextStyle(this._TextMarginY);\n\n    this._TextGutterX.Items.tag(prop).content = 'Gutter-X';\n    this._TextGutterX.Items.tag(val).content = `${this._gutterX}px`;\n    this._updatePropertyTextStyle(this._TextGutterX, this._gutterColor);\n    this._updateValueTextStyle(this._TextGutterX);\n\n    this._TextGutterY.Items.tag(prop).content = 'Gutter-Y';\n    this._TextGutterY.Items.tag(val).content = `${this._gutterY}px`;\n    this._updatePropertyTextStyle(this._TextGutterY, this._gutterColor);\n    this._updateValueTextStyle(this._TextGutterY);\n\n    this._TextSafe.Items.tag(prop).content = 'Safe';\n    this._TextSafe.Items.tag(val).content = `${this._safe}px`;\n    this._updatePropertyTextStyle(this._TextSafe, this._safeColor);\n    this._updateValueTextStyle(this._TextSafe);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByUpCount } from '../../utils';\n\nexport const base = theme => ({\n  cursorStyle: {\n    textColor: theme.color.textNeutral,\n    blink: true,\n    width: theme.spacer.xs,\n    height: theme.spacer.xxl\n  },\n  eyebrowTextStyle: {\n    ...theme.typography.caption1,\n    maxLines: 1,\n    textColor: theme.color.textNeutral\n  },\n  textStyle: {\n    ...theme.typography.body1,\n    maxLines: 1,\n    textColor: theme.color.textNeutral\n  },\n  helpTextStyle: {\n    ...theme.typography.caption1,\n    maxLines: 1,\n    textColor: theme.color.textNeutralSecondary\n  },\n  minWidth: getWidthByUpCount(theme, 4),\n  paddingX: theme.spacer.xl,\n  paddingY: theme.spacer.xl,\n  backgroundColor: theme.color.interactiveNeutral\n});\n\nexport const mode = theme => ({\n  disabled: {\n    eyebrowTextStyle: { textColor: theme.color.textNeutralDisabled },\n    helpTextStyle: { textColor: theme.color.textNeutralDisabled }\n  },\n  focused: {\n    cursorStyle: { textColor: theme.color.textInverse },\n    eyebrowTextStyle: { textColor: theme.color.textNeutral },\n    helpTextStyle: { textColor: theme.color.textNeutralSecondary }\n  }\n});\n\nexport const tone = theme => ({\n  inverse: {\n    mode: {\n      focused: {\n        eyebrowTextStyle: { textColor: theme.color.textNeutral },\n        helpTextStyle: { textColor: theme.color.textNeutral }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './Input.styles';\nimport Button from '../Button';\nimport TextBox from '../TextBox';\n\nexport default class Input extends Button {\n  static get __componentName() {\n    return 'Input';\n  }\n  static get __themeStyle() {\n    return styles;\n  }\n  static _template() {\n    return {\n      ...super._template(),\n      Eyebrow: { type: TextBox },\n      HelpText: { type: TextBox }\n    };\n  }\n\n  static get properties() {\n    return [\n      ...super.properties,\n      'actualTitle',\n      'cursor',\n      'eyebrow',\n      'helpText',\n      'listening',\n      'mask',\n      'password',\n      'position'\n      // TODO: should maybe remove \"fixed\" as an editable prop to make sure this is never dynamic\n    ];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'Eyebrow',\n      'HelpText',\n      { name: 'Cursor', path: 'Content.Cursor' },\n      { name: 'HiddenContent', path: 'Content.HiddenContent' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._title = '';\n    this.actualTitle = '';\n    this.position = this.title ? this.title.length : 0;\n    this._justify = 'left';\n    this._fixed = true;\n    this.w = this.style.minWidth;\n  }\n\n  $itemChanged() {\n    super.$itemChanged();\n    this._updateTextWrapper();\n    this._updateHiddenContent();\n    this._updateCursorPosition();\n    this._updateTitleScrollPosition();\n  }\n\n  _onTitleTextBoxChanged() {\n    this._updateHiddenContent();\n  }\n\n  _onHiddenTextBoxChanged() {\n    this._updateCursorPosition();\n  }\n\n  _update() {\n    this._updatePassword(); // need to update title masking before rendering the new title\n    super._update();\n\n    this._updateEyebrow();\n    this._updateHelpText();\n\n    this._updateTextWrapper();\n    this._updateHiddenContent();\n\n    this._updateCursor();\n    this._updateCursorListening();\n    this._updateCursorBlink();\n    this._updateCursorPosition();\n\n    this._updateTitleScrollPosition();\n  }\n\n  _updatePassword() {\n    this.title = this.password\n      ? this.mask.repeat(this.actualTitle.length)\n      : this.actualTitle;\n  }\n\n  _updateTruncation() {\n    // do not add word wrap\n    if (this._Title) {\n      this._Title.patch({\n        style: { textStyle: { ...this.style.textStyle, wordWrap: false } }\n      });\n    }\n  }\n\n  _updateEyebrow() {\n    this._Eyebrow.patch({\n      content: this.eyebrow,\n      style: { textStyle: this.style.eyebrowTextStyle },\n      mountY: 1,\n      x: this.style.paddingX,\n      y: this.y - this.style.paddingY\n    });\n  }\n\n  _updateHelpText() {\n    this._HelpText.patch({\n      content: this.helpText,\n      style: { textStyle: this.style.helpTextStyle },\n      x: this.style.paddingX,\n      y: this.y + this.innerH + this.style.paddingY\n    });\n  }\n\n  _updateTextWrapper() {\n    this._TextWrapper.clipping = true;\n    this._TextWrapper.w = this._visibleContentWidth;\n    if (this._Title) {\n      this._TextWrapper.h = this._Title.h;\n    }\n  }\n\n  _updateHiddenContent() {\n    /**\n     * Hidden value is used for measuring where the cursor should\n     * be positioned when a user changes the cursor position. Since\n     * the text is one texture we don't know the exact position of each\n     * individual character, so we render a substring version of the text\n     * to determine the render width and position the cursor based on that number\n     */\n    if (!this._HiddenContent) {\n      this._Content.patch({\n        HiddenContent: {\n          type: TextBox,\n          mountY: 0.5,\n          y: h => h / 2,\n          signals: {\n            textBoxChanged: '_onHiddenTextBoxChanged'\n          }\n        }\n      });\n    }\n\n    const { title: value = '', position, password, mask } = this;\n\n    const textBeforeCursor = password\n      ? mask.repeat(value.length).substring(0, position)\n      : value.substring(0, position);\n\n    this._HiddenContent.patch({\n      style: { textStyle: this.style.textStyle },\n      content: textBeforeCursor\n    });\n\n    this._HiddenContent._Text &&\n      this._HiddenContent._Text.patch({ alpha: 0.001 });\n  }\n\n  _updateCursor() {\n    if (this.style.cursorStyle && this.style.cursorStyle.blink) {\n      if (!this._Cursor) {\n        this._Content.patch({\n          Cursor: {\n            rect: true,\n            mountY: 0.5\n          }\n        });\n        this.cursorBlink = this._Cursor.animation({\n          duration: 1.5,\n          repeat: -1,\n          actions: [{ p: 'alpha', v: { 0: 0, 0.5: 1, 1: 0 } }]\n        });\n      }\n      this._Cursor.patch(this.style.cursorStyle);\n    }\n  }\n\n  _updateCursorListening() {\n    if (!this._isDisabledMode) {\n      if (this.cursorBlink && !this.cursorBlink.isPlaying()) {\n        this.cursorBlink.start();\n      }\n    } else {\n      if (this.cursorBlink)\n        this.isCursorActive\n          ? this.cursorBlink.start()\n          : this.cursorBlink.stop();\n    }\n    this._Cursor.smooth = {\n      color: this.style.cursorStyle.textColor\n    };\n  }\n\n  _updateCursorBlink() {\n    if (this.cursorBlink) {\n      if (this.isCursorActive) {\n        this.cursorBlink.start();\n      } else {\n        this.cursorBlink.stop();\n        this._Cursor.patch({ alpha: 0.001 });\n      }\n    }\n  }\n\n  _updateCursorPosition() {\n    this._Cursor.x =\n      this._titleX +\n      (this._isOverflow ? this._TextWrapper.w : this._HiddenContent.w);\n  }\n\n  _updateTitleScrollPosition() {\n    if (this._Title) {\n      this._Title.x = this._isOverflow\n        ? this._visibleContentWidth - this._HiddenContent.w\n        : 0;\n      if (this._HiddenContent && this._TextWrapper) {\n        this._HiddenContent.x = this._TextWrapper.x + this._Title.x;\n      }\n    }\n  }\n\n  get _suffixX() {\n    const suffixX = this._hasPrefix\n      ? this.w - this._paddingLeft - this._paddingRight - this._prefixW\n      : this.w - this._paddingLeft - this._paddingRight - this.style.paddingX;\n    return suffixX > 0 ? suffixX : 0;\n  }\n\n  get isCursorActive() {\n    return this.listening && (this._isFocusedMode || this._isUnfocusedMode);\n  }\n\n  get _isOverflow() {\n    return this._HiddenContent.w > this._visibleContentWidth;\n  }\n\n  get _visibleContentWidth() {\n    return this._fixedWordWrapWidth;\n  }\n\n  set value(value) {\n    this.title = this.actualTitle = value;\n    this.position = 0;\n    this._updatePassword();\n  }\n\n  get value() {\n    return this.actualTitle;\n  }\n\n  clear() {\n    if (this.isCursorActive) {\n      this.title = this.actualTitle = '';\n      this.position = 0;\n    }\n  }\n\n  insert(content) {\n    if (this.isCursorActive) {\n      this.actualTitle =\n        this.actualTitle.slice(0, this.position) +\n        content +\n        this.actualTitle.slice(this.position);\n      this._updatePassword();\n      this.position += content.length;\n    }\n  }\n\n  backspace() {\n    if (this.isCursorActive && this.position > 0) {\n      this.actualTitle =\n        this.actualTitle.slice(0, this.position - 1) +\n        this.actualTitle.slice(this.position);\n      this._updatePassword();\n      this.position--;\n    }\n  }\n\n  _handleLeft() {\n    if (this._isDisabledMode) {\n      return false;\n    }\n    this.moveLeft();\n    if (typeof this.onLeft === 'function') {\n      return this.onLeft(this);\n    }\n    return true;\n  }\n\n  _handleRight() {\n    if (this._isDisabledMode) {\n      return false;\n    }\n    this.moveRight();\n    if (typeof this.onRight === 'function') {\n      return this.onRight(this);\n    }\n    return true;\n  }\n\n  moveLeft() {\n    const { position } = this;\n    if (position >= 0) {\n      this.position--;\n      return true;\n    }\n    return false;\n  }\n\n  moveRight() {\n    const { position, title } = this;\n    if (position < title.length) {\n      this.position++;\n      return true;\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    // TODO - Localization?\n    // Do we need a locale file with\n    // component translations?\n    // need to check with Accessibility on what order this should read out in\n    if (this.password) {\n      return [this.eyebrow, this.helpText];\n    } else {\n      return [this.eyebrow, 'Input: ' + this.title, this.helpText];\n    }\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const textStyle = theme.typography.headline2;\n  return {\n    height: theme.spacer.md * 9,\n    minWidth: theme.spacer.md * 7,\n    paddingX: theme.spacer.md,\n    textStyle,\n    sizes: {\n      sm: 1,\n      md: 2,\n      lg: 3,\n      xl: 4,\n      xxl: 5\n    },\n    baseWidth: theme.spacer.md * 7,\n    iconWidth: textStyle.lineHeight,\n    iconHeight: textStyle.lineHeight\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Button from '../Button';\nimport * as styles from './Key.styles';\nimport Icon from '../Icon';\n\nconst isUpperCase = string => /^[A-Z]$/.test(string);\nconst isAlphaChar = string => /^[A-Za-z]$/.test(string);\n\n// TODO: Post theming when we address language/locale issues this could be a configurable object\nconst alphaNato = {\n  a: 'alpha',\n  b: 'bravo',\n  c: 'charlie',\n  d: 'delta',\n  e: 'echo',\n  f: 'foxtrot',\n  g: 'golf',\n  h: 'hotel',\n  i: 'india',\n  j: 'juliett',\n  k: 'kilo',\n  l: 'lima',\n  m: 'mike',\n  n: 'november',\n  o: 'oscar',\n  p: 'papa',\n  q: 'quebec',\n  r: 'romeo',\n  s: 'sierra',\n  t: 'tango',\n  u: 'uniform',\n  v: 'victor',\n  w: 'whiskey',\n  x: 'x-ray',\n  y: 'yankee',\n  z: 'zulu'\n};\n\nfunction getNato(title) {\n  if (isAlphaChar(title)) {\n    return `${title}, ${alphaNato[title.toLowerCase()]}`;\n  }\n\n  return title;\n}\n\nexport default class Key extends Button {\n  static get __componentName() {\n    return 'Key';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'icon', 'size', 'toggle', 'keySpacing'];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'iconH', curr: 'iconHeight' },\n      { prev: 'iconW', curr: 'iconWidth' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._size = 'sm';\n    this._keySpacing = 0;\n  }\n\n  _update() {\n    this._updatePrefixStyle();\n    super._update();\n  }\n\n  _calcDynamicWidth() {\n    const sizeMultiplier = this.style.sizes[this.size || 'sm'];\n    const baseSize = this.style.baseWidth * sizeMultiplier;\n    const padding = this.keySpacing * (sizeMultiplier - 1);\n    return baseSize + padding;\n  }\n\n  _updatePrefixStyle() {\n    if (this._prefix && this.icon) {\n      this._updatePrefixObj(this.icon, { style: this.style.iconStyle });\n    }\n  }\n\n  _updatePrefixObj(icon, props = {}) {\n    this._prefix = {\n      type: Icon,\n      icon,\n      w: this.style.iconWidth,\n      h: this.style.iconHeight,\n      ...props\n    };\n  }\n\n  _setIcon(icon) {\n    if (icon) {\n      this._updatePrefixObj(icon, { style: this.style.iconStyle });\n    } else {\n      this._prefix = icon;\n    }\n\n    return icon;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    if (isUpperCase(this.title)) {\n      return `Capital ${getNato(this.title)}, button`;\n    }\n\n    return getNato(this.title) + ', button';\n  }\n\n  _handleEnter() {\n    if (typeof this.onEnter === 'function') {\n      return this.onEnter(this);\n    } else {\n      if (this.toggle) {\n        this.fireAncestors('$toggleKeyboard', this.toggle);\n      }\n      this.fireAncestors('$onSoftKey', {\n        key: this.keyId || this.title,\n        toggle: this.toggle\n      });\n    }\n\n    return false;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  return {\n    keySpacing: theme.spacer.md,\n    screenW: theme.layout.screenW,\n    marginX: theme.layout.marginX,\n    inputSpacing: theme.spacer.md * 10 + theme.spacer.md,\n    inputStyle: { radius: theme.radius.md }\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport context from '../../globals/context/index';\nimport Base from '../Base';\nimport Key from '../Key';\nimport Row from '../Row';\nimport Column from '../Column';\nimport * as styles from './Keyboard.styles';\n\nconst capitalize = string => string.charAt(0).toUpperCase() + string.slice(1);\n\nexport default class Keyboard extends Base {\n  static get __componentName() {\n    return 'Keyboard';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [\n      'formats',\n      'centerKeyboard',\n      'rowWrap',\n      'centerKeys',\n      'keyComponent'\n    ];\n  }\n\n  _init() {\n    this._setShouldUpdateThemeBound = this._setShouldUpdateTheme.bind(this);\n    context.on('themeUpdate', this._setShouldUpdateThemeBound);\n    super._init();\n  }\n\n  _setShouldUpdateTheme() {\n    this.shouldUpdateTheme = true;\n  }\n\n  _detach() {\n    super._detach();\n    context.off('themeUpdate', this._setShouldUpdateThemeBound);\n  }\n\n  _focus() {\n    super._focus();\n    this.fireAncestors('$keyboardFocused', true);\n  }\n\n  _getFocused() {\n    return this._currentKeyboard || this;\n  }\n\n  _update() {\n    if (!this._currentFormat || this._shouldUpdateKeyboards) {\n      this._currentFormat = this.defaultFormat;\n    }\n    if (this.centerKeyboard) {\n      this.x = this.centeredXPos;\n    } else if (this.x === this.centeredXPos && !this.centerKeyboard) {\n      // if the keyboard was centered before but now should not be\n      this.x = 0;\n    } else {\n      this.x == null && (this.x = 0); // if x is undefined or null set it to 0, otherwise do not overwrite x pos\n    }\n    this._shouldUpdateKeyboards && this._createKeyboardsFromFormats();\n    this._formatKeys();\n  }\n\n  _createKeyboardsFromFormats() {\n    this.childList.clear(); // if new formats patched in, remove keyboards created from the previous formats\n    Object.keys(this.formats).forEach(key => {\n      const format = this.formats[key];\n      if (format) {\n        const keyboardData = this._formatKeyboardData(format);\n        this._createKeyboard(key, this._createRows(keyboardData, key));\n      }\n    });\n    this._formatsChanged = false;\n  }\n\n  _createKeyboard(key, rows = []) {\n    key = capitalize(key);\n    if (rows.length === 1) {\n      this.patch({ [key]: rows[0] });\n    } else {\n      this.patch({\n        [key]: {\n          type: Column,\n          plinko: true,\n          items: rows,\n          style: {\n            itemSpacing: this.style.keySpacing\n          },\n          autoResizeWidth: true,\n          autoResizeHeight: true,\n          neverScroll: true,\n          alpha: key === capitalize(this._currentFormat) ? 1 : 0.001\n        }\n      });\n    }\n  }\n\n  _createRows(rows = [], keyboard) {\n    return rows.map(keys => {\n      return {\n        type: Row,\n        autoResizeHeight: true,\n        autoResizeWidth: true,\n        centerInParent: this.centerKeys,\n        neverScroll: true,\n        wrapSelected: this.rowWrap !== undefined ? this.rowWrap : true,\n        style: {\n          itemSpacing: this.style.keySpacing\n        },\n        items: this._createKeys(keys, keyboard),\n        selectedIndex: this._currentKeyboard?.selected?.selectedIndex || 0\n      };\n    });\n  }\n\n  _createKeys(keys = [], keyboard) {\n    return keys.map(keyProps => {\n      if (!keyProps) {\n        return {\n          type: this.keyComponent || Key, // allows use of a custom Key component if specified\n          keySpacing: this.style.keySpacing,\n          skipFocus: true,\n          alpha: 0.01\n        };\n      }\n\n      const key = {\n        type: this.keyComponent || Key, // allows use of a custom Key component if specified\n        keySpacing: this.style.keySpacing\n      };\n\n      if (typeof keyProps === 'object') {\n        // keyId is used to account for style overrides on individual keys,\n        // icon updates, and localization\n        const keyName = keyProps.keyId || keyProps.title;\n        const keyOverrides =\n          this.style.keyProps?.[keyboard]?.[keyName] ||\n          this.style.keyProps?.[keyName] ||\n          {};\n        const keyPatch = { ...key, ...keyProps, ...keyOverrides };\n\n        if (keyOverrides?.icon) {\n          keyPatch.style = {\n            ...keyOverrides.style,\n            iconStyle: {\n              ...keyOverrides.iconStyle\n            }\n          };\n        }\n        return keyPatch;\n      }\n      return { ...key, title: keyProps };\n    });\n  }\n\n  _formatKeyboardData(data = []) {\n    if (Array.isArray(data) && data.length) {\n      if (!Array.isArray(data[0]) && !this.inline) {\n        const keyRows = [];\n        let idx, counter;\n        for (idx = 0, counter = -1; idx < data.length; idx++) {\n          if (idx % this.columnCount === 0) {\n            counter++;\n            keyRows[counter] = [];\n          }\n          keyRows[counter].push(data[idx]);\n        }\n        return keyRows; // TODO: Swap to a reduce\n      } else if (this.inline) {\n        return [data];\n      }\n      return data;\n    }\n  }\n\n  _formatKeys() {\n    Object.keys(this.formats).forEach(format => {\n      const element = this.tag(capitalize(format));\n      if (element) {\n        element.patch({\n          alpha: format === this._currentFormat ? 1 : 0.001,\n          style: {\n            itemSpacing: this.style.keySpacing\n          }\n        });\n        element.items.forEach(row => {\n          row.patch({\n            style: {\n              itemSpacing: this.style.keySpacing\n            },\n            centerInParent: this.centerKeys,\n            wrapSelected: this.rowWrap !== undefined ? this.rowWrap : true\n          });\n        });\n        // force Column to recalculate rows from the centerKeyboard toggle\n        element.queueRequestUpdate();\n      }\n    });\n  }\n\n  $toggleKeyboard(next) {\n    const nextKeyboard = capitalize(next);\n    if (next !== this._currentFormat) {\n      const nextKeyboardTag = this.tag(nextKeyboard);\n\n      this.selectKeyOn(nextKeyboardTag);\n      this._currentKeyboard.alpha = 0.001;\n      nextKeyboardTag.alpha = 1;\n      this._currentFormat = next;\n    }\n  }\n\n  selectKeyOn(keyboard, { row, column } = this.getSelectedKey()) {\n    if (keyboard && keyboard.constructor) {\n      const type = keyboard.constructor.name;\n      if (type === 'Row') {\n        keyboard.selectedIndex = column;\n      } else {\n        keyboard.selectedIndex = row;\n        keyboard.selected.selectedIndex = column;\n      }\n    }\n  }\n\n  getSelectedKey() {\n    let row, column;\n    const keyboard = this._currentKeyboard;\n    const type = keyboard.constructor.name;\n    if (type === 'Row') {\n      row = 0;\n      column = keyboard.selectedIndex;\n    } else {\n      row = keyboard.selectedIndex;\n      column = keyboard.selected.selectedIndex;\n    }\n    return { row, column };\n  }\n\n  $itemChanged() {\n    this.w = this._currentKeyboard.w;\n    this.fireAncestors('$itemChanged');\n    this.signal('keyboardWidthChanged');\n  }\n\n  _setFormats(formats = {}) {\n    this._formatsChanged = true;\n    return formats;\n  }\n\n  get centeredXPos() {\n    return (this.style.screenW - this.w) / 2 - this.style.marginX;\n  }\n\n  get _shouldUpdateKeyboards() {\n    return this.shouldUpdateTheme || this._formatsChanged;\n  }\n\n  set defaultFormat(format) {\n    this._defaultFormat = format;\n  }\n\n  get defaultFormat() {\n    return this._defaultFormat || Object.keys(this.formats)[0];\n  }\n\n  get _currentKeyboard() {\n    return this._currentFormat\n      ? this.tag(capitalize(this._currentFormat))\n      : null;\n  }\n\n  set columnCount(columnCount) {\n    this._columnCount = columnCount;\n  }\n\n  get columnCount() {\n    if (this._columnCount) return this._columnCount;\n    if (this.rowCount)\n      return (\n        this.formats[this.defaultFormat.toLowerCase()].length / this.rowCount\n      );\n    if (this.inline)\n      return this.formats[this.defaultFormat.toLowerCase()].length;\n    else return 11; // TODO: Remove this hard-coded number?\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n    return 'Keyboard' + (this.title ? `, ${this.title}` : '');\n  }\n\n  set announceContext(announceContext) {\n    super.announceContext = announceContext;\n  }\n\n  get announceContext() {\n    return (\n      this._announceContext || [\n        'PAUSE-2',\n        'Use arrow keys to choose characters, press center to select'\n      ]\n    );\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardEmail extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardEmail';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.emailFormat;\n  }\n\n  get emailFormat() {\n    return {\n      uppercase: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'Q',\n          'W',\n          'E',\n          'R',\n          'T',\n          'Y',\n          'U',\n          'I',\n          'O',\n          'P',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'A',\n          'S',\n          'D',\n          'F',\n          'G',\n          'H',\n          'J',\n          'K',\n          'L',\n          '@',\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          'Z',\n          'X',\n          'C',\n          'V',\n          'B',\n          'N',\n          'M',\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '_', announce: 'underscore, button' },\n          {\n            title: 'shift',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      lowercase: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'q',\n          'w',\n          'e',\n          'r',\n          't',\n          'y',\n          'u',\n          'i',\n          'o',\n          'p',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'a',\n          's',\n          'd',\n          'f',\n          'g',\n          'h',\n          'j',\n          'k',\n          'l',\n          '@',\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          'z',\n          'x',\n          'c',\n          'v',\n          'b',\n          'n',\n          'm',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'md',\n            toggle: 'uppercase',\n            announce: 'shift on, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      accents: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'ä',\n          'ë',\n          'ï',\n          'ö',\n          'ü',\n          'ÿ',\n          'à',\n          'è',\n          'ì',\n          'ò',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'ù',\n          'á',\n          'é',\n          'í',\n          'ó',\n          'ú',\n          'ý',\n          'â',\n          'ê',\n          '@',\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          'î',\n          'ô',\n          'û',\n          'ã',\n          'ñ',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'xl',\n            toggle: 'accentsUpper',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      accentsUpper: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'Ä',\n          'Ë',\n          'Ï',\n          'Ö',\n          'Ü',\n          'Ÿ',\n          'À',\n          'È',\n          'Ì',\n          'Ò',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'Ù',\n          'Á',\n          'É',\n          'Í',\n          'Ó',\n          'Ú',\n          'Ý',\n          'Â',\n          'Ê',\n          '@',\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          'Î',\n          'Ô',\n          'Û',\n          'Ã',\n          'Ñ',\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '_', announce: 'underscore, button' },\n          {\n            title: 'shift',\n            size: 'xl',\n            toggle: 'accents',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      symbols: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          { title: '!', announce: 'exclamation, button' },\n          '@',\n          '#',\n          '$',\n          '%',\n          { title: '^', announce: 'caret circumflex, button' },\n          '&',\n          '*',\n          { title: '(', announce: 'open parenthesis, button' },\n          { title: ')', announce: 'close parenthesis, button' },\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          { title: '{', announce: 'open brace, button' },\n          { title: '}', announce: 'close brace, button' },\n          { title: '[', announce: 'open bracket, button' },\n          { title: ']', announce: 'close bracket, button' },\n          { title: ';', announce: 'semicolon, button' },\n          { title: '\"', announce: 'doublequote, button' },\n          { title: ',', announce: 'comma, button' },\n          { title: '|', announce: 'vertical bar, button' },\n          { title: '\\\\', announce: 'backslash, button' },\n          { title: '/', announce: 'forwardslash, button' },\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          { title: '<', announce: 'less than, button' },\n          { title: '>', announce: 'greater than, button' },\n          { title: '?', announce: 'question mark, button' },\n          { title: '=', announce: 'equal sign, button' },\n          { title: '`', announce: 'grave accent, button' },\n          { title: '~', announce: 'tilde, button' },\n          { title: '_', announce: 'underscore, button' },\n          { title: ':', announce: 'colon, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '+', announce: 'plus sign, button' }\n        ],\n        [\n          { title: '.com', announce: 'dot, com', size: 'md' },\n          { title: '.net', announce: 'dot, net', size: 'md' },\n          { title: '.edu', announce: 'dot, edu', size: 'md' },\n          { title: '.org', announce: 'dot, org', size: 'md' },\n          { title: '.co', announce: 'dot, co', size: 'md' },\n          { title: '.uk', announce: 'dot, uk', size: 'md' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardFullScreen extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardFullScreen';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.fullscreenFormat;\n  }\n\n  get fullscreenFormat() {\n    return {\n      letters: [\n        [\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          {\n            title: '#@!',\n            size: 'lg',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          },\n          {\n            title: 'Space',\n            size: 'lg',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          },\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          ''\n        ],\n        [\n          'A',\n          'B',\n          'C',\n          'D',\n          'E',\n          'F',\n          'G',\n          'H',\n          'I',\n          'J',\n          'K',\n          'L',\n          'M',\n          'N',\n          'O',\n          'P',\n          'Q',\n          'R',\n          'S',\n          'T',\n          'U',\n          'V',\n          'W',\n          'X',\n          'Y',\n          'Z'\n        ]\n      ],\n      symbols: [\n        [\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          {\n            title: 'ABC',\n            size: 'lg',\n            toggle: 'letters',\n            announce: 'caps on, button'\n          },\n          {\n            title: 'Space',\n            size: 'lg',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          },\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          '',\n          ''\n        ],\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          { title: '!', announce: 'exclamation, button' },\n          '@',\n          '#',\n          '$',\n          '%',\n          { title: '^', announce: 'caret circumflex, button' },\n          '&',\n          '*',\n          { title: '(', announce: 'open parenthesis, button' },\n          { title: ')', announce: 'close parenthesis, button' },\n          { title: '`', announce: 'grave accent, button' },\n          '~',\n          '_',\n          '.',\n          '-',\n          '+'\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardNumbers extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardNumbers';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.numbersFormat;\n  }\n\n  get numbersFormat() {\n    return {\n      numbers: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0'],\n      dialpad: [['1', '2', '3'], ['4', '5', '6'], ['7', '8', '9'], ['0']],\n      dialpadExtended: [\n        ['1', '2', '3'],\n        ['4', '5', '6'],\n        ['7', '8', '9'],\n        [\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardQwerty extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardQwerty';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.qwertyFormat;\n  }\n\n  get qwertyFormat() {\n    return {\n      uppercase: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'Q',\n          'W',\n          'E',\n          'R',\n          'T',\n          'Y',\n          'U',\n          'I',\n          'O',\n          'P',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'A',\n          'S',\n          'D',\n          'F',\n          'G',\n          'H',\n          'J',\n          'K',\n          'L',\n          '@',\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          'Z',\n          'X',\n          'C',\n          'V',\n          'B',\n          'N',\n          'M',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      lowercase: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'q',\n          'w',\n          'e',\n          'r',\n          't',\n          'y',\n          'u',\n          'i',\n          'o',\n          'p',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'a',\n          's',\n          'd',\n          'f',\n          'g',\n          'h',\n          'j',\n          'k',\n          'l',\n          '@',\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          'z',\n          'x',\n          'c',\n          'v',\n          'b',\n          'n',\n          'm',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'md',\n            toggle: 'uppercase',\n            announce: 'shift on, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      accents: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'ä',\n          'ë',\n          'ï',\n          'ö',\n          'ü',\n          'ÿ',\n          'à',\n          'è',\n          'ì',\n          'ò',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'ù',\n          'á',\n          'é',\n          'í',\n          'ó',\n          'ú',\n          'ý',\n          'â',\n          'ê',\n          '@',\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          'î',\n          'ô',\n          'û',\n          'ã',\n          'ñ',\n          { title: '_', announce: 'underscore, button' },\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          {\n            title: 'shift',\n            size: 'xl',\n            toggle: 'accentsUpper',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      accentsUpper: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          'Ä',\n          'Ë',\n          'Ï',\n          'Ö',\n          'Ü',\n          'Ÿ',\n          'À',\n          'È',\n          'Ì',\n          'Ò',\n          {\n            title: '#@!',\n            size: 'md',\n            toggle: 'symbols',\n            announce: 'symbol mode, button',\n            keyId: 'symbols'\n          }\n        ],\n        [\n          'Ù',\n          'Á',\n          'É',\n          'Í',\n          'Ó',\n          'Ú',\n          'Ý',\n          'Â',\n          'Ê',\n          '@',\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          'Î',\n          'Ô',\n          'Û',\n          'Ã',\n          'Ñ',\n          { title: '.', announce: 'period, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '_', announce: 'underscore, button' },\n          {\n            title: 'shift',\n            size: 'xl',\n            toggle: 'accents',\n            announce: 'shift off, button',\n            keyId: 'shift'\n          }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ],\n      symbols: [\n        [\n          '1',\n          '2',\n          '3',\n          '4',\n          '5',\n          '6',\n          '7',\n          '8',\n          '9',\n          '0',\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ],\n        [\n          { title: '!', announce: 'exclamation, button' },\n          '@',\n          '#',\n          '$',\n          '%',\n          { title: '^', announce: 'caret circumflex, button' },\n          '&',\n          '*',\n          { title: '(', announce: 'open parenthesis, button' },\n          { title: ')', announce: 'close parenthesis, button' },\n          {\n            title: 'abc',\n            size: 'md',\n            toggle: 'lowercase',\n            announce: 'alpha mode, button'\n          }\n        ],\n        [\n          { title: '{', announce: 'open brace, button' },\n          { title: '}', announce: 'close brace, button' },\n          { title: '[', announce: 'open bracket, button' },\n          { title: ']', announce: 'close bracket, button' },\n          { title: ';', announce: 'semicolon, button' },\n          { title: '\"', announce: 'doublequote, button' },\n          { title: ',', announce: 'comma, button' },\n          { title: '|', announce: 'vertical bar, button' },\n          { title: '\\\\', announce: 'backslash, button' },\n          { title: '/', announce: 'forwardslash, button' },\n          {\n            title: 'áöû',\n            size: 'md',\n            toggle: 'accents',\n            announce: 'accents, button',\n            keyId: 'accents'\n          }\n        ],\n        [\n          { title: '<', announce: 'less than, button' },\n          { title: '>', announce: 'greater than, button' },\n          { title: '?', announce: 'question mark, button' },\n          { title: '=', announce: 'equal sign, button' },\n          { title: '`', announce: 'grave accent, button' },\n          { title: '~', announce: 'tilde, button' },\n          { title: '_', announce: 'underscore, button' },\n          { title: ':', announce: 'colon, button' },\n          { title: '-', announce: 'dash, button' },\n          { title: '+', announce: 'plus sign, button' }\n        ],\n        [\n          {\n            title: 'Clear',\n            size: 'lg',\n            keyId: 'clear',\n            announce: 'clear, button'\n          },\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Done',\n            size: 'lg',\n            keyId: 'done',\n            announce: 'done, button'\n          }\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport Input from '../Input';\nimport Base from '../Base';\nimport Column from '../Column';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardInput extends Base {\n  static get __componentName() {\n    return 'KeyboardInput';\n  }\n\n  static get properties() {\n    return [\n      'centerKeyboard',\n      'defaultFormat',\n      'input', // this should hold all the props passed from Input\n      'keyboardType'\n    ];\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Wrapper: {\n        type: Column,\n        neverScroll: true,\n        w: this.w,\n        items: [\n          {\n            type: Input,\n            ref: 'Input'\n          },\n          {\n            type: Keyboard,\n            ref: 'Keyboard',\n            passSignals: {\n              keyboardWidthChanged: true\n            }\n          }\n        ],\n        selectedIndex: 1,\n        signals: {\n          keyboardWidthChanged: '_updateWidth'\n        }\n      }\n    };\n  }\n\n  static get tags() {\n    return [\n      'Wrapper',\n      { name: 'Input', path: 'Wrapper.Input' },\n      { name: 'Keyboard', path: 'Wrapper.Keyboard' }\n    ];\n  }\n\n  _update() {\n    this._Wrapper.style.itemSpacing = this.style.inputSpacing;\n    this._updateKeyboardType();\n    this._updateInput();\n    this._updateKeyboard();\n    this._updateCenterKeyboard();\n  }\n\n  _updateKeyboardType() {\n    if (this._Keyboard.constructor !== this.keyboardType) {\n      this._Wrapper._resetItems();\n      this._Wrapper.items = [\n        {\n          type: Input,\n          ref: 'Input'\n        },\n        {\n          type: this.keyboardType,\n          ref: 'Keyboard',\n          passSignals: {\n            keyboardWidthChanged: true\n          }\n        }\n      ];\n    }\n  }\n\n  _updateInput() {\n    this._Input.patch({\n      ...this.input,\n      centerInParent: this.centerKeyboard,\n      w: this._Keyboard.w,\n      style: { ...this.style.inputStyle }, // allows overriding of input styles\n      listening: this._isFocusedMode\n    });\n  }\n\n  _updateKeyboard() {\n    this._Keyboard.patch({\n      defaultFormat: this.defaultFormat || 'lowercase',\n      centerKeyboard: this.centerKeyboard\n    });\n  }\n\n  // updates width of Wrapper and Input to match keyboard width\n  _updateWidth() {\n    this._Input.w = this.w = this._Keyboard.w;\n    this.fireAncestors('$itemChanged');\n  }\n\n  _updateCenterKeyboard() {\n    if (this.centerKeyboard) {\n      this.x = (this.style.screenW - this.w) / 2 - this.style.marginX;\n    } else {\n      this.x = 0;\n    }\n  }\n\n  $onSoftKey({ key = '', toggle }) {\n    if (toggle) {\n      return;\n    }\n\n    switch (key.toLowerCase()) {\n      case 'delete':\n        this._Input.backspace();\n        break;\n      case 'done':\n        break;\n      case 'space':\n        this._Input.insert(' ');\n        break;\n      case 'clear':\n        this._Input.clear();\n        break;\n      default:\n        this._Input.insert(key);\n    }\n  }\n\n  $keyboardFocused(focus) {\n    if (focus) {\n      this._Input.listening = true;\n    } else {\n      this._Input.listening = false;\n    }\n  }\n\n  _getFocused() {\n    return this._Wrapper || this;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Keyboard from './Keyboard';\nimport * as styles from './Keyboard.styles';\n\nexport default class KeyboardSearch extends Keyboard {\n  static get __componentName() {\n    return 'KeyboardSearch';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  _construct() {\n    super._construct();\n    this.formats = this.searchFormat;\n  }\n\n  get searchFormat() {\n    return {\n      uppercase: [\n        ['A', 'B', 'C', 'D', 'E', 'F'],\n        ['G', 'H', 'I', 'J', 'K', 'L'],\n        ['M', 'N', 'O', 'P', 'Q', 'R'],\n        ['S', 'T', 'U', 'V', 'W', 'X'],\n        [\n          'Y',\n          'Z',\n          { title: '1', keyId: 'number' },\n          { title: '2', keyId: 'number' },\n          { title: '3', keyId: 'number' },\n          { title: '4', keyId: 'number' }\n        ],\n        [\n          { title: '5', keyId: 'number' },\n          { title: '6', keyId: 'number' },\n          { title: '7', keyId: 'number' },\n          { title: '8', keyId: 'number' },\n          { title: '9', keyId: 'number' },\n          { title: '0', keyId: 'number' }\n        ],\n        [\n          {\n            title: 'Space',\n            size: 'xl',\n            keyId: 'space',\n            announce: 'space, button'\n          },\n          {\n            title: 'Delete',\n            size: 'md',\n            keyId: 'delete',\n            announce: 'delete, button'\n          }\n        ]\n      ]\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const size = theme.spacer.lg;\n  return {\n    width: size,\n    height: size,\n    radius: size / 2\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    circleColor: theme.color.interactiveNeutralFocus,\n    mode: {\n      disabled: {\n        circleColor: theme.color.fillNeutralDisabled\n      }\n    }\n  },\n  inverse: {\n    circleColor: theme.color.interactiveInverseFocus,\n    mode: {\n      disabled: {\n        circleColor: theme.color.fillInverseDisabled\n      }\n    }\n  },\n  brand: {\n    circleColor: theme.color.interactiveBrandFocus,\n    mode: {\n      disabled: {\n        circleColor: theme.color.fillInverseDisabled\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getMaxRoundRadius } from '../../utils';\nimport Base from '../Base';\nimport * as styles from './Knob.styles';\nimport lng from '@lightningjs/core';\n\nexport default class Knob extends Base {\n  static get __componentName() {\n    return 'Knob';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      mount: 0.5\n    };\n  }\n\n  _update() {\n    this._updateLayout();\n  }\n\n  _updateLayout() {\n    this.patch({\n      texture: lng.Tools.getRoundRect(\n        this.w,\n        this.h,\n        getMaxRoundRadius(this.style.radius, this.w, this.h),\n        null,\n        null,\n        true,\n        this.style.circleColor\n      )\n    });\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport utils from '../../utils';\n\nexport const base = theme => ({\n  alpha: theme.alpha.primary,\n  descriptionTextStyle: {\n    ...theme.typography.body3,\n    maxLines: 1,\n    textColor: theme.color.textNeutralSecondary\n  },\n  height: theme.spacer.xxl * 3,\n  logoStyle: {\n    width: theme.spacer.xxl * 2,\n    height: theme.spacer.xxl * 2,\n    radius: theme.radius.sm\n  },\n  paddingX: theme.spacer.xl,\n  contentSpacing: theme.spacer.lg,\n  titleTextStyle: {\n    ...theme.typography.headline3,\n    maxLines: 1,\n    textColor: theme.color.textNeutral\n  },\n  width: utils.getWidthByColumnSpan(theme, 3)\n});\n\nexport const mode = theme => ({\n  disabled: {\n    alpha: theme.alpha.inactive,\n    descriptionTextStyle: { textColor: theme.color.textNeutralDisabled },\n    titleTextStyle: { textColor: theme.color.textNeutralDisabled }\n  },\n  focused: {\n    descriptionTextStyle: { textColor: theme.color.textInverseSecondary },\n    titleTextStyle: { textColor: theme.color.textInverse }\n  }\n});\n\nexport const tone = theme => ({\n  inverse: {\n    mode: {\n      focused: {\n        descriptionTextStyle: { textColor: theme.color.textNeutral },\n        titleTextStyle: { textColor: theme.color.textNeutral }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './ListItem.styles';\nimport Button from '../Button';\nimport TextBox from '../TextBox';\nimport Icon from '../Icon';\n\nexport default class ListItem extends Button {\n  static get __componentName() {\n    return 'ListItem';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      ...super._template(),\n      justify: 'left',\n      fixed: true,\n      Content: {\n        ...super._template().Content,\n        TextWrapper: {\n          mountY: 0.5,\n          flex: { direction: 'column' },\n          Title: {\n            type: TextBox,\n            signals: {\n              textBoxChanged: '_onTextBoxChanged'\n            }\n          }\n        }\n      }\n    };\n  }\n  static get properties() {\n    return [\n      ...super.properties,\n      'description',\n      'prefixLogo',\n      'suffixLogo',\n      'shouldCollapse'\n    ];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      { name: 'Description', path: 'Content.TextWrapper.Description' }\n    ];\n  }\n\n  _onTextBoxChanged() {\n    this._updateTitle();\n    this._updateDescription();\n    this._updateTruncation();\n  }\n\n  _update() {\n    this._updatePrefixLogo();\n    this._updateSuffixLogo();\n    super._update();\n    this._updateDescription();\n  }\n\n  _updateTitle() {\n    this._TextWrapper.patch({\n      Title: {\n        content: this.title,\n        style: { textStyle: this.style.titleTextStyle }\n      }\n    });\n  }\n\n  _updateDescription() {\n    if (this._hasDescription) {\n      let descriptionPatch = {\n        content: this.description,\n        style: {\n          textStyle: {\n            ...this.style.descriptionTextStyle,\n            wordWrap: true,\n            wordWrapWidth: this._fixedWordWrapWidth\n          }\n        },\n        visible: !this._collapse\n      };\n      if (!this._Description) {\n        descriptionPatch = {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_onTextBoxChanged'\n          },\n          ...descriptionPatch\n        };\n      }\n      this._TextWrapper.patch({ Description: descriptionPatch });\n    } else {\n      this._TextWrapper.patch({ Description: undefined });\n    }\n  }\n\n  _updateTruncation() {\n    if (this._Title) {\n      this._Title.patch({\n        style: {\n          textStyle: {\n            ...this.style.titleTextStyle,\n            wordWrap: this.fixed,\n            wordWrapWidth: this.fixed ? this._fixedWordWrapWidth : 0\n          }\n        }\n      });\n    }\n  }\n\n  _updatePrefixLogo() {\n    if (this._hasPrefixLogo) {\n      this._prefix = this._addLogoProps(this._prefixLogo);\n    }\n  }\n\n  _updateSuffixLogo() {\n    if (this._hasSuffixLogo) {\n      this._suffix = this._addLogoProps(this._suffixLogo);\n    }\n  }\n\n  _addLogoProps(icon) {\n    return {\n      type: Icon,\n      icon,\n      style: { color: undefined, ...this.style.logoStyle }\n    };\n  }\n\n  get _hasPrefixLogo() {\n    return this.prefixLogo;\n  }\n\n  get _hasSuffixLogo() {\n    return this.suffixLogo;\n  }\n\n  get _rowProps() {\n    return {\n      ...super._rowProps,\n      autoResizeHeight: true\n    };\n  }\n\n  get _buttonProps() {\n    return {\n      ...super._buttonProps,\n      alpha: this.style.alpha\n    };\n  }\n\n  get _hasDescription() {\n    return !!this.description;\n  }\n\n  get _suffixX() {\n    return this.w - this._paddingRight - this._suffixW - this.style.paddingX;\n  }\n\n  get _collapse() {\n    return this.shouldCollapse && !this._isFocusedMode;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    return this.title + this.description + ', List Item';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = () => {\n  return {\n    showArrows: false,\n    showKnob: false\n  };\n};\n\nexport const mode = () => ({\n  focused: {\n    showArrows: true\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillInverse,\n        progressBar: {\n          barColor: theme.color.fillInverseTertiary,\n          progressColor: theme.color.fillInverse\n        }\n      }\n    }\n  },\n  inverse: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillNeutral,\n        progressBar: {\n          barColor: theme.color.fillNeutralTertiary,\n          progressColor: theme.color.fillNeutral\n        }\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillInverse,\n        progressBar: {\n          barColor: theme.color.fillBrandTertiary,\n          progressColor: theme.color.fillBrand\n        }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { getWidthByColumnSpan } from '../../utils';\n\nexport const base = theme => {\n  const size = theme.spacer.lg;\n  return {\n    arrowAlphaValue: theme.alpha.primary,\n    arrowAlphaValueLimit: theme.alpha.secondary,\n    arrowHeight: theme.spacer.xxl,\n    arrowSpacing: theme.spacer.md,\n    arrowWidth: theme.spacer.xxl,\n    arrowColor: theme.color.fillNeutral,\n    containerHeight: theme.spacer.lg + theme.spacer.xs,\n    iconLeftSrc: theme.asset.arrowLeft,\n    iconRightSrc: theme.asset.arrowRight,\n    minWidth: getWidthByColumnSpan(theme, 2),\n    progressBar: {},\n    width: size,\n    height: size,\n    radius: size / 2,\n    showArrows: true,\n    showKnob: true,\n    circleAnimation: {}\n  };\n};\n\nexport const mode = () => ({\n  disabled: {\n    arrowAlphaValue: 0\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    arrowColor: theme.color.fillNeutral,\n    circleColor: theme.color.interactiveNeutralFocus\n  },\n  inverse: {\n    arrowColor: theme.color.fillInverse,\n    circleColor: theme.color.interactiveInverseFocus\n  },\n  brand: {\n    arrowColor: theme.color.fillNeutral,\n    circleColor: theme.color.interactiveNeutralFocus\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport * as styles from './Slider.styles';\nimport ProgressBar from '../ProgressBar';\nimport Icon from '../Icon';\nimport Knob from '../Knob';\nimport { degreesToRadians } from '../../utils';\n\nexport default class Slider extends Base {\n  static get __componentName() {\n    return 'Slider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Container: {\n        mountY: 0.5,\n        y: h => h / 2,\n        Bar: {\n          mountY: 0.5,\n          SliderBar: {\n            type: ProgressBar,\n            progress: 0.5,\n            mountY: 0.5,\n            announce: ''\n          },\n          Circle: {\n            type: Knob,\n            zIndex: 5 // places circle knob on top of sliderBar\n          }\n        },\n        LeftArrow: {\n          type: Icon,\n          mountY: 0.5,\n          y: h => h / 2\n        },\n        RightArrow: {\n          type: Icon,\n          mountY: 0.5,\n          y: h => h / 2\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return ['max', 'min', 'step', 'value', 'vertical'];\n  }\n\n  static get tags() {\n    return [\n      'Container',\n      {\n        name: 'Bar',\n        path: 'Container.Bar'\n      },\n      {\n        name: 'SliderBar',\n        path: 'Container.Bar.SliderBar'\n      },\n      {\n        name: 'Circle',\n        path: 'Container.Bar.Circle'\n      },\n      {\n        name: 'LeftArrow',\n        path: 'Container.LeftArrow'\n      },\n      {\n        name: 'RightArrow',\n        path: 'Container.RightArrow'\n      }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._min = 0;\n    this._max = 100;\n    this._step = 1;\n    this._value = 0;\n    this._vertical = false;\n  }\n\n  _update() {\n    this._updateDirection();\n    this._updateSliderLayout();\n    this._updatePositions();\n    this._updateArrowAlpha();\n    this._updateArrows();\n    if (this._valueChanged) {\n      this.signal('onChange', this.value, this);\n      this.fireAncestors('$announce', this.announce);\n      this._valueChanged = false;\n    }\n    this._checkAndSignalSizeChange();\n  }\n\n  _handleLeft() {\n    if (this._isDisabledMode) {\n      return false;\n    }\n    this._decrementValue();\n    if (typeof this.onLeft === 'function') {\n      return this.onLeft(this);\n    }\n    return true;\n  }\n\n  _handleRight() {\n    if (this._isDisabledMode) {\n      return false;\n    }\n    this._incrementValue();\n    if (typeof this.onRight === 'function') {\n      return this.onRight(this);\n    }\n    return true;\n  }\n\n  _updateDirection() {\n    this.patch({\n      pivotX: 0,\n      rotation: this.vertical ? degreesToRadians(90) : 0,\n      mountY: this.vertical ? 0.5 : 0\n    });\n  }\n\n  _updateSliderLayout() {\n    const w = this.w || this.style.minWidth;\n    this._Container.patch({\n      h: this.style.containerHeight,\n      w,\n      Bar: {\n        x: this._calculatedSliderX,\n        SliderBar: {\n          y: this.style.containerHeight / 2,\n          w: this._calculatedSliderWidth,\n          style: {\n            duration: 0,\n            ...this.style.progressBar\n          }\n        }\n      }\n    });\n    this.h = Math.max(this.style.containerHeight, this.style.arrowHeight);\n  }\n\n  _checkAndSignalSizeChange() {\n    if (\n      this.h !== this.prevH ||\n      this._Container.w !== this.prevW ||\n      this.rotation !== this.prevRotation\n    ) {\n      this.signal('onSizeChange', this);\n    }\n    this.prevH = this.h;\n    this.prevW = this._Container.w;\n    this.prevRotation = this.rotation;\n  }\n\n  _updatePositions() {\n    this._updateSliderProgress();\n    this._updateCirclePosition();\n  }\n\n  _updateSliderProgress() {\n    let progress =\n      this.value < this.min ? this.min / this.max : this.value / this.max;\n\n    if (this.value > this.max || this.value - this.step > this.max) {\n      progress = this._calculatedSliderWidth;\n    } else if (this.min < 0 || this.max < 0) {\n      progress = (this.value - this.min) / (this.max - this.min);\n    }\n\n    this._SliderBar.progress = progress;\n  }\n\n  _updateCirclePosition() {\n    let xCirclePosition;\n    if (this.value < this.min || this.value + this.step < this.min) {\n      xCirclePosition = (this.min / this.max) * this._calculatedSliderWidth;\n    } else if (this.value > this.max || this.value - this.step > this.max) {\n      xCirclePosition = this._calculatedSliderWidth;\n    } else {\n      if (this.min < 0 || this.max < 0) {\n        xCirclePosition =\n          ((this.value - this.min) / (this.max - this.min)) *\n          this._calculatedSliderWidth;\n      } else {\n        xCirclePosition = (this.value / this.max) * this._calculatedSliderWidth;\n      }\n    }\n\n    if (this._Circle) {\n      this._Circle.patch({\n        mode: this.mode,\n        style: {\n          radius: this.style.radius,\n          w: this.style.w,\n          h: this.style.h,\n          circleColor: this.style.circleColor\n        },\n        y: this._SliderBar.y + 1,\n        alpha: this._isFocusedMode && this.style.showKnob ? 1 : 0\n      });\n      if (\n        this.style.circleAnimation &&\n        Object.keys(this.style.circleAnimation).length\n      ) {\n        this._Circle.smooth = {\n          x: [xCirclePosition, this.style.circleAnimation]\n        };\n      } else {\n        this._Circle.x = xCirclePosition;\n      }\n    }\n  }\n\n  _updateArrowAlpha() {\n    // fade arrows at min/max\n    let leftAlpha;\n    let rightAlpha;\n\n    // ensure arrows are always rendered, otherwise color changes might not apply right away\n    const offAlpha = 0.001;\n    const alpha = this.style.showArrows ? this.style.arrowAlphaValue : offAlpha;\n    const alphaLimit = this.style.showArrows\n      ? this.style.arrowAlphaValueLimit\n      : offAlpha;\n\n    leftAlpha = rightAlpha = alpha;\n    if (!this._isDisabledMode && this.value <= this.min) {\n      leftAlpha = alphaLimit;\n      rightAlpha = alpha;\n    } else if (!this._isDisabledMode && this.value >= this.max) {\n      leftAlpha = alpha;\n      rightAlpha = alphaLimit;\n    }\n\n    this._LeftArrow.smooth = { alpha: leftAlpha };\n    this._RightArrow.smooth = { alpha: rightAlpha };\n  }\n\n  _updateArrows() {\n    const arrowProps = {\n      w: this.style.arrowWidth,\n      h: this.style.arrowHeight,\n      style: {\n        color: this.style.arrowColor\n      }\n    };\n    this._LeftArrow.patch({\n      ...arrowProps,\n      icon: this.style.iconLeftSrc\n    });\n    this._RightArrow.patch({\n      ...arrowProps,\n      icon: this.style.iconRightSrc\n    });\n\n    this._RightArrow.smooth = {\n      x: this.style.arrowSpacing + this._calculatedSliderWidth + this._Bar.x\n    };\n  }\n\n  _decrementValue() {\n    const value = this.value - this.step;\n    this.value = value >= this.min ? value : this.min;\n    this._updatePositions();\n  }\n\n  _incrementValue() {\n    const value = this.value + this.step;\n    this.value = value <= this.max ? value : this.max;\n    this._updatePositions();\n  }\n\n  _handleUp() {\n    return false;\n  }\n\n  _handleDown() {\n    return false;\n  }\n\n  get _calculatedSliderX() {\n    return this.style.showArrows\n      ? this.style.arrowSpacing + this.style.arrowWidth\n      : 0;\n  }\n\n  get _calculatedSliderWidth() {\n    const totalArrowSize = this.style.showArrows\n      ? this.style.arrowSpacing * 2 + this.style.arrowWidth * 2\n      : 0;\n    return this.w < totalArrowSize + this._circleW\n      ? this.style.minWidth - totalArrowSize\n      : this.w - totalArrowSize;\n  }\n\n  get _circleW() {\n    return this._Circle ? this._Circle.w : 0;\n  }\n\n  _setVertical(vertical) {\n    this._setState(vertical ? 'VerticalSlider' : '');\n    return vertical;\n  }\n\n  _setValue(value) {\n    this._valueChanged = value !== this._value;\n    return value;\n  }\n\n  _setMin(min) {\n    const value = this.value;\n    this.value = min > value ? min : value;\n    this._valueChanged = value !== this.value;\n    return min;\n  }\n\n  _setMax(max) {\n    const value = this.value;\n    this.value = max < value ? max : value;\n    this._valueChanged = value !== this.value;\n    return max;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce !== undefined && this._announce !== null) {\n      return this._announce;\n    }\n    return this.value.toString();\n  }\n\n  static _states() {\n    return [\n      class VerticalSlider extends this {\n        _handleLeft() {\n          return false;\n        }\n\n        _handleRight() {\n          return false;\n        }\n\n        _handleUp() {\n          if (this._isDisabledMode) {\n            return false;\n          }\n          this._decrementValue();\n          if (typeof this.onUp === 'function') {\n            return this.onUp(this);\n          }\n          return true;\n        }\n\n        _handleDown() {\n          if (this._isDisabledMode) {\n            return false;\n          }\n          this._incrementValue();\n          if (typeof this.onDown === 'function') {\n            return this.onDown(this);\n          }\n          return true;\n        }\n      }\n    ];\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport * as styles from './NestedSlider.styles';\nimport Slider from '../Slider';\n\nexport default class NestedSlider extends Slider {\n  static get __componentName() {\n    return 'NestedSlider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  paddingY: theme.spacer.md + theme.spacer.xs,\n  valueTextStyle: {\n    ...theme.typography.headline3,\n    maxLines: 1,\n    textColor: theme.color.textNeutralSecondary\n  }\n});\n\nexport const mode = theme => ({\n  disabled: {\n    valueTextStyle: { textColor: theme.color.textNeutralDisabled }\n  },\n  focused: {\n    valueTextStyle: { textColor: theme.color.textInverseSecondary }\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    mode: {\n      focused: {\n        valueTextStyle: { textColor: theme.color.textInverseSecondary }\n      }\n    }\n  },\n  inverse: {\n    mode: {\n      focused: {\n        valueTextStyle: { textColor: theme.color.textNeutralSecondary }\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        valueTextStyle: { textColor: theme.color.textInverseSecondary }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport NestedSlider from './NestedSlider';\nimport ListItem from './ListItem';\nimport * as styles from './ListItemSlider.styles';\nimport TextBox from '../TextBox';\n\nexport default class ListItemSlider extends ListItem {\n  static get __componentName() {\n    return 'ListItemSlider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    const template = super._template;\n    return {\n      ...template(),\n      Content: {\n        ...template().Content,\n        flex: { direction: 'column' },\n        TextWrapper: {\n          ...template().Content.TextWrapper,\n          mountY: 0,\n          flex: undefined\n        },\n        Slider: {\n          type: NestedSlider,\n          mountX: 0.5,\n          signals: {\n            onChange: '_onSliderChanged'\n          }\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return [...super.properties, 'slider', 'value', 'max', 'min'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      { name: 'Slider', path: 'Content.Slider' },\n      { name: 'Value', path: 'Content.TextWrapper.Value' }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this.value = 50;\n    this.max = 100;\n    this.min = 0;\n  }\n\n  _update() {\n    super._update();\n    this._updateSliderPosition();\n    this._updateValue();\n  }\n\n  _onTextBoxChanged() {\n    super._onTextBoxChanged();\n    this._TextWrapper.h = Math.max(\n      this._Title ? this._Title.h : 0,\n      this._Value ? this._Value.h : 0\n    );\n  }\n\n  _updateValue() {\n    if (this._hasValue) {\n      let valuePatch = {\n        content: this.value.toString(),\n        style: { textStyle: { ...this.style.valueTextStyle } },\n        mountX: 1,\n        x: this.w - this._paddingX\n      };\n      if (!this._Value) {\n        valuePatch = {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_onTextBoxChanged'\n          },\n          ...valuePatch\n        };\n      }\n      this._TextWrapper.patch({ Value: valuePatch });\n    } else {\n      this._TextWrapper.patch({ Value: undefined });\n    }\n  }\n\n  _updateSliderPosition() {\n    const w = this.w - this._paddingLeft - this._paddingRight;\n    const sliderProps = {\n      mode: this.mode,\n      tone: this.tone,\n      w,\n      x: w / 2,\n      visible: !this._collapse,\n      alpha: this.style.alpha,\n      ...this.slider,\n      value: this.value,\n      max: this.max,\n      min: this.min\n    };\n\n    this._Slider.patch(sliderProps);\n  }\n\n  get _hasValue() {\n    return this.value != undefined || this.value != null;\n  }\n\n  get _fixedWordWrapWidth() {\n    const titleWrapWidth =\n      this.w - this._paddingLeft - this._paddingRight - this._paddingX;\n    return titleWrapWidth;\n  }\n\n  _onSliderChanged(value) {\n    this.value = value;\n    this._updateValue();\n    this.signal('onSliderChange', value, this);\n  }\n\n  _handleLeft() {\n    if (typeof this.onLeft === 'function') {\n      return this.onLeft(this);\n    } else if (this._Slider && !this._isDisabledMode) {\n      return this._Slider._handleLeft();\n    }\n    return false;\n  }\n\n  _handleRight() {\n    if (typeof this.onRight === 'function') {\n      return this.onRight(this);\n    } else if (this._Slider && !this._isDisabledMode) {\n      return this._Slider._handleRight();\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    return this.title + this.value + ', List Item Slider';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  arrowAlphaValue: theme.alpha.primary,\n  arrowAlphaValueLimit: theme.alpha.secondary,\n  arrowWidth: theme.spacer.xxl,\n  arrowHeight: theme.spacer.xxl,\n  iconLeftSrc: theme.asset.arrowLeft,\n  iconRightSrc: theme.asset.arrowRight\n});\n\nexport const tone = theme => ({\n  neutral: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillInverse\n      }\n    }\n  },\n  inverse: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillNeutral\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        arrowColor: theme.color.fillInverse\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport ListItem from './ListItem';\nimport * as styles from './ListItemPicker.styles';\nimport Marquee from '../Marquee';\nimport Icon from '../Icon';\nimport Row from '../Row';\n\nexport default class ListItemPicker extends ListItem {\n  static get __componentName() {\n    return 'ListItemPicker';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get properties() {\n    return [...super.properties, 'options', 'selectedIndex'];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'LeftArrow',\n      'RightArrow',\n      { name: 'Picker', path: 'Content.TextWrapper.Picker' }\n    ];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'titlePadding', curr: 'contentSpacing' }];\n  }\n\n  _onTextBoxChanged() {\n    super._onTextBoxChanged();\n    this._alignPicker();\n  }\n\n  _construct() {\n    super._construct();\n    this._options = [];\n    this._selectedIndex = 0;\n  }\n\n  _update() {\n    super._update();\n    this._updatePicker();\n    this._updateArrows();\n    this._updateArrowsAlpha();\n    this._updateAlignment();\n  }\n\n  _updateAlignment() {\n    if (this._isFocusedMode) {\n      this.patch({ justify: 'center' });\n    } else {\n      this.patch({ justify: 'left' });\n    }\n  }\n\n  _updateArrows() {\n    if (!this._isFocusedMode) {\n      const offAlpha = 0.001;\n      if (this._LeftArrow) {\n        this._LeftArrow.alpha = offAlpha;\n      }\n      if (this._RightArrow) {\n        this._RightArrow.alpha = offAlpha;\n      }\n      return;\n    }\n\n    const arrowProps = {\n      w: this.style.arrowWidth,\n      h: this.style.arrowHeight,\n      style: {\n        color: this.style.arrowColor\n      },\n      alpha: this.style.arrowAlphaValue\n    };\n    if (!this._LeftArrow) {\n      this.patch({\n        LeftArrow: {\n          type: Icon,\n          mountY: 0.5,\n          y: h => h / 2\n        }\n      });\n    }\n    this._LeftArrow.patch({\n      ...arrowProps,\n      icon: this.style.iconLeftSrc\n    });\n    this._LeftArrow.smooth = {\n      x: this.style.paddingX\n    };\n\n    if (!this._RightArrow) {\n      this.patch({\n        RightArrow: {\n          type: Icon,\n          mountY: 0.5,\n          mountX: 1,\n          y: h => h / 2\n        }\n      });\n    }\n    this._RightArrow.patch({\n      ...arrowProps,\n      icon: this.style.iconRightSrc\n    });\n\n    this._RightArrow.smooth = {\n      x: this.w - this.style.paddingX\n    };\n  }\n\n  _updatePicker() {\n    const w = this.w - this._paddingX - this.style.arrowWidth * 2;\n\n    if (!this._Picker) {\n      this._TextWrapper.patch({\n        Picker: {\n          type: Row,\n          clipping: true,\n          alwaysScroll: true,\n          signals: {\n            selectedChange: '_updateArrowsAlpha'\n          }\n        }\n      });\n    }\n    this._Picker.patch({\n      visible: !this._collapse,\n      h: this.style.descriptionTextStyle.lineHeight,\n      w,\n      items: this.options.map(option => ({\n        type: Marquee,\n        h: this.style.descriptionTextStyle.lineHeight,\n        w,\n        centerAlign: this._isFocusedMode,\n        title: {\n          ...this.style.descriptionTextStyle,\n          text: option\n        }\n      })),\n      // We need to reset the selected index to ensure it does not get reset to zero when patching items.\n      selectedIndex: this.selectedIndex\n    });\n    this._alignPicker();\n  }\n\n  _alignPicker() {\n    this._Picker.patch({\n      mountX: this._isFocusedMode ? 0.5 : 0,\n      x: this._isFocusedMode ? this._Title.w / 2 : 0\n    });\n  }\n\n  _updateArrowsAlpha() {\n    if (this._Picker) {\n      this._selectedIndex = this._Picker.selectedIndex;\n    }\n    const alpha = this._isFocusedMode ? this.style.arrowAlphaValue : 0;\n    if (this._RightArrow) {\n      this._RightArrow.alpha =\n        this.selectedIndex === this.options.length - 1 && this._isFocusedMode\n          ? this.style.arrowAlphaValueLimit\n          : alpha;\n    }\n    if (this._LeftArrow) {\n      this._LeftArrow.alpha =\n        this.selectedIndex === 0 && this._isFocusedMode\n          ? this.style.arrowAlphaValueLimit\n          : alpha;\n    }\n    this.fireAncestors('$announce', this.announce);\n  }\n\n  get _fixedWordWrapWidth() {\n    const wordWrapWidthFocused =\n      this.w -\n      this._paddingX -\n      this.style.arrowWidth * 2 -\n      2 * this.style.contentSpacing;\n    const wordWrapWidth = this.w - this._paddingLeft - this._paddingRight;\n    return this._isFocusedMode ? wordWrapWidthFocused : wordWrapWidth;\n  }\n\n  get _collapse() {\n    return this.shouldCollapse && !this._isFocusedMode;\n  }\n\n  get selectedOption() {\n    return this._Picker.selected;\n  }\n\n  _handleLeft() {\n    if (typeof this.onLeft === 'function') {\n      return this.onLeft(this);\n    }\n    this._Picker.selectPrevious();\n    return true;\n  }\n\n  _handleRight() {\n    if (typeof this.onRight === 'function') {\n      return this.onRight(this);\n    }\n    this._Picker.selectNext();\n    return true;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n    return this.title + this.options[this.selectedIndex] + ', List Item';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport MetadataBase from '../MetadataBase';\n\nexport default class MetadataCard extends MetadataBase {\n  static get __componentName() {\n    return 'MetadataCard';\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  textStyle: theme.typography.body2,\n  fadeHeight: 100,\n  scroll: {\n    timingFunction: 'linear',\n    duration: theme.animation.duration.xfast\n  },\n  contentMarginTop: theme.spacer.md,\n  contentMarginLeft: theme.spacer.xl,\n  sliderMarginLeft: theme.spacer.lg + theme.spacer.xxs\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { base as scrollWrapperBase } from './ScrollWrapper.styles';\n\nexport const base = theme => {\n  const { scroll } = scrollWrapperBase(theme);\n  return {\n    progressBar: { animation: scroll },\n    circleAnimation: scroll\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Slider from '../Slider';\nimport * as styles from './ScrollSlider.styles';\n\nexport default class ScrollSlider extends Slider {\n  static get __componentName() {\n    return 'ScrollSlider';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './ScrollWrapper.styles';\nimport TextBox from '../TextBox';\nimport ScrollSlider from './ScrollSlider';\n\nexport default class ScrollWrapper extends Base {\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      clipping: true,\n      FadeContainer: {\n        ScrollContainer: {\n          w: w => w,\n          wordWrap: true\n        }\n      },\n      Slider: {\n        type: ScrollSlider,\n        vertical: true,\n        signals: {\n          onSizeChange: '_updateScrollContainerSize'\n        },\n        announce: ' '\n      }\n    };\n  }\n\n  static get __componentName() {\n    return 'ScrollWrapper';\n  }\n\n  static get properties() {\n    return [\n      'autoScroll',\n      'autoScrollDelay',\n      'autoScrollSpeed',\n      'content',\n      'fadeContent',\n      'scrollDuration',\n      'scrollStep',\n      'showScrollBar',\n      'shouldWrap',\n      'flexDirection'\n    ];\n  }\n\n  static get tags() {\n    return [\n      'FadeContainer',\n      'Slider',\n      {\n        name: 'ScrollContainer',\n        path: 'FadeContainer.ScrollContainer'\n      },\n      {\n        name: 'ScrollableText',\n        path: 'ScrollContainer.ScrollableText'\n      }\n    ];\n  }\n\n  _construct() {\n    super._construct();\n    this._scrollStep = 10;\n    this._shouldWrap = false;\n    this._flexDirection = 'column';\n    this._fadeContent = true;\n    this._sliderWidth = 0;\n  }\n\n  _afterTextBoxUpdate(textBox) {\n    // NOTE: this does get called every time ScrollWrapper updates (ex. on each scroll change)\n    if (this._prevW !== textBox.finalW || this._prevH !== textBox.finalH) {\n      this._prevW = textBox.finalW;\n      this._prevH = textBox.finalH;\n      this._updateScrollWrapperLayout();\n      this._updateAlpha();\n    }\n  }\n\n  _resetFlexContainer() {\n    this._FadeContainer.patch({ ScrollContainer: undefined });\n    this._FadeContainer.patch({\n      ScrollContainer: { w: w => w, wordWrap: true }\n    });\n  }\n\n  _update() {\n    if (this._contentChanged) {\n      this._resetFlexContainer();\n      this._updateAutoScroll();\n    }\n    this._updateScrollContainer();\n    this._updateScrollWrapperLayout();\n    this._updateAlpha();\n  }\n\n  _updateAutoScroll() {\n    this.resetScroll();\n    this._setupAutoScroll();\n    this._contentChanged = false;\n  }\n\n  _updateScrollWrapperLayout() {\n    this._ScrollContainer.patch({\n      w: this._contentWidth\n    });\n    this._updateFadeContainer();\n    this._updateSlider();\n  }\n\n  _updateAlpha() {\n    this._Slider.smooth = {\n      alpha: this.showScrollBar && this._isFocusedMode ? 1 : 0\n    };\n  }\n\n  _updateFadeContainer() {\n    const isScrollable = this._ScrollContainer.finalH > this.h;\n    const shouldFade =\n      this.fadeContent && isScrollable && !this._isEndContentVisible;\n\n    this._FadeContainer.patch({\n      h: this.h,\n      w: this._contentWidth,\n      y: this.style.contentMarginTop,\n      x: this.style.contentMarginLeft,\n      rtt: true,\n      shader: shouldFade\n        ? {\n            type: lng.shaders.FadeOut,\n            bottom: this.style.fadeHeight\n          }\n        : undefined\n    });\n  }\n\n  _scrollContainerLoaded({ h }) {\n    this._ScrollContainer.h = h;\n    this._updateScrollWrapperLayout();\n  }\n\n  _updateScrollContainer() {\n    if (!this.content) return;\n\n    if (typeof this.content === 'string') {\n      this._ScrollContainer.patch({\n        flex: { direction: 'column' },\n        ScrollableText: {\n          h: 0,\n          w: this._contentWidth,\n          type: TextBox,\n          content: this.content,\n          style: {\n            textStyle: {\n              ...this.style.textStyle,\n              wordWrap: true,\n              wordWrapWidth: this._contentWidth\n            }\n          },\n          signals: {\n            textBoxChanged: '_scrollContainerLoaded'\n          },\n          onAfterUpdate: this._afterTextBoxUpdate.bind(this)\n        }\n      });\n    } else if (Array.isArray(this.content)) {\n      const content = {};\n      this.content.forEach((item, index) => {\n        const id = `ScrollText${index}`;\n        content[id] = {\n          w: this._contentWidth,\n          ...item\n        };\n        if (item.text) {\n          content[id] = {\n            type: TextBox,\n            content: item.text,\n            style: {\n              textStyle: {\n                ...this.style.textStyle,\n                ...item.style,\n                wordWrap: true,\n                wordWrapWidth: this._contentWidth\n              }\n            },\n            onAfterUpdate: this._afterTextBoxUpdate.bind(this)\n          };\n        }\n      });\n      this._ScrollContainer.patch({\n        flex: { direction: this.flexDirection, wrap: this.shouldWrap },\n        ...content\n      });\n    }\n  }\n\n  _scrollDown() {\n    const hasContentToScrollTo =\n      this._scrollContainerY + this._ScrollContainer.finalH > this.renderHeight;\n    if (hasContentToScrollTo) {\n      const targetY = this._scrollContainerY - this.scrollStep;\n      const canScrollByStepLength =\n        targetY + this._ScrollContainer.finalH > this.renderHeight;\n      const scrollEndY =\n        this.renderHeight -\n        this._ScrollContainer.finalH -\n        this.style.contentMarginTop;\n\n      this._ScrollContainer.patch({\n        smooth: {\n          y: [\n            canScrollByStepLength ? targetY : scrollEndY,\n            this._scrollAnimation\n          ]\n        }\n      });\n\n      const hasScrolledToEnd =\n        this._scrollContainerY + this._ScrollContainer.finalH <= this.h;\n\n      if (hasScrolledToEnd) {\n        this._isEndContentVisible = true;\n        this._autoScrollComplete = true;\n        this.fireAncestors('$scrollChanged', 'endDown', this);\n        this._updateFadeContainer();\n      }\n    } else {\n      return false;\n    }\n  }\n\n  _scrollUp() {\n    const canScrollUp = this._scrollContainerY < 0;\n\n    if (canScrollUp) {\n      const targetY = this._scrollContainerY + this.scrollStep;\n      const canScrollByStepLength = targetY < 0;\n\n      this._ScrollContainer.patch({\n        smooth: {\n          y: [canScrollByStepLength ? targetY : 0, this._scrollAnimation]\n        }\n      });\n\n      const isScrollable =\n        this._scrollContainerY + this._ScrollContainer.finalH >\n        this.renderHeight;\n      if (isScrollable) {\n        this._autoScrollComplete = false;\n      }\n\n      if (this._scrollContainerY >= 0) {\n        this.fireAncestors('$scrollChanged', 'endUp', this);\n      }\n\n      if (this._isEndContentVisible) {\n        this._isEndContentVisible = false;\n        this._updateFadeContainer();\n      }\n    } else {\n      return false;\n    }\n  }\n\n  resetScroll() {\n    this._ScrollContainer.y = 0;\n    this._Slider.value = 0;\n    this._ScrollContainer.transition('y').finish();\n    delete this._ScrollContainer._transitions;\n    this._autoScrollComplete = false;\n  }\n\n  _setAutoScroll(val) {\n    if (this._autoScroll !== val) {\n      this._autoScroll = val;\n    }\n    this._setupAutoScroll();\n    return val;\n  }\n\n  _setupAutoScroll() {\n    clearTimeout(this._startAutoScroll);\n    clearTimeout(this._performAutoScrollTimer);\n\n    if (this.autoScroll) {\n      this._startAutoScroll = setTimeout(\n        () => this._performAutoScroll(),\n        isNaN(this.autoScrollDelay) ? 2000 : this.autoScrollDelay\n      );\n    }\n  }\n\n  _performAutoScroll() {\n    if (this.autoScroll && !this._autoScrollComplete) {\n      this._Slider._handleDown();\n      this._performAutoScrollTimer = setTimeout(\n        () => this._performAutoScroll(),\n        isNaN(this.autoScrollSpeed) ? 200 : this.autoScrollSpeed\n      );\n    }\n  }\n\n  _setContent(content) {\n    if (content !== this._content && this.enabled) {\n      this._contentChanged = true;\n    }\n    return content;\n  }\n\n  _updateScrollContainerSize(slider) {\n    if (this._sliderWidth !== slider._Container.h) {\n      this._sliderWidth = slider._Container.h;\n      this._updateScrollContainer();\n    }\n  }\n\n  _updateSlider() {\n    // height of off-screen items that can be scrolled to\n    const scrollHeight = Math.max(\n      this._ScrollContainer.finalH - this.renderHeight,\n      0\n    );\n\n    // number of steps to scroll to the bottom of ScrollContainer\n    const contentScrollSteps =\n      scrollHeight > 0 ? Math.ceil(scrollHeight / this.scrollStep) : 1;\n\n    // max value of slider\n    const sliderMax = this.renderHeight;\n\n    // distance slider should move on each key press\n    const sliderStep =\n      contentScrollSteps > 0 ? sliderMax / contentScrollSteps : sliderMax;\n\n    // Ensure _Slider and required properties exist\n    if (this._Slider) {\n      // This is a vertical slider, so w is actually controlling the height\n      this._Slider.patch({\n        x: this.w - this._sliderWidth,\n        w: sliderMax,\n        min: 0,\n        max: sliderMax,\n        step: sliderStep,\n        onUp: this._scrollUp.bind(this),\n        onDown: this._scrollDown.bind(this)\n      });\n    }\n  }\n\n  get _contentWidth() {\n    return (\n      this.w -\n      this.style.contentMarginLeft -\n      this.style.sliderMarginLeft -\n      this._sliderWidth\n    );\n  }\n\n  get _scrollContainerY() {\n    return this._ScrollContainer.transition('y').targetValue;\n  }\n\n  get _scrollAnimation() {\n    const duration = isNaN(this.scrollDuration)\n      ? this.style.scroll.duration\n      : this.scrollDuration;\n    return {\n      ...this.style.scroll,\n      duration\n    };\n  }\n\n  _getFocused() {\n    return this._Slider;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    if (this._announce) {\n      return this._announce;\n    }\n\n    if (Array.isArray(this.content)) {\n      if (\n        this._ScrollContainer &&\n        this._ScrollContainer.children &&\n        this._ScrollContainer.children.length\n      ) {\n        return this._ScrollContainer.children.map(item => item.announce);\n      } else {\n        return this.content.map(item => item.announce || item.text);\n      }\n    }\n    return this.content;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  alpha: theme.alpha.none,\n  animation: theme.animation.standardEntrance,\n  blur: theme.spacer.xxl,\n  color: theme.color.shadowNeutralFocus,\n  offsetX: 0,\n  offsetY: theme.spacer.lg,\n  radius: theme.radius.md,\n  spread: theme.spacer.md * -1,\n\n  // TODO: Need to know which offsets between the base and focus style is largest. Could refactor.\n  maxOffsetY: theme.spacer.xxl,\n  maxOffsetX: 0\n});\n\nexport const mode = theme => ({\n  // Note: styleguide implies also reducing the size of the shadow here,\n  // however we currently can't gracefully animate that size change.\n  // Just animating the offset and alpha gives a pretty decent effect\n  focused: {\n    alpha: theme.alpha.secondary,\n    offsetY: theme.spacer.xxl\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {\n    color: theme.color.shadowNeutralFocus\n  },\n  inverse: {\n    color: theme.color.shadowInverseFocus\n  },\n  brand: {\n    color: theme.color.shadowBrandFocus\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Shadow.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Shadow extends Base {\n  static get __componentName() {\n    return 'Shadow';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n  static get properties() {\n    return ['maskShadow'];\n  }\n  static get tags() {\n    return ['Frame', { name: 'Shadow', path: 'Frame.Shadow' }];\n  }\n\n  _updateFocusStyle() {\n    if (!this._Shadow) return;\n    // TODO: think about how does the user know which styles are handled in the focus transition.\n    this.applySmooth(\n      this._Shadow,\n      { alpha: this.style.alpha, y: this.style.offsetY, x: this.style.offsetX },\n      {\n        alpha: [this.style.alpha, this.style.animation],\n        y: [this.style.offsetY, this.style.animation],\n        x: [this.style.offsetX, this.style.animation]\n      }\n    );\n  }\n\n  _update() {\n    // To behave like Figma's shadow settings, blur value is added to width and height to expand shadow size\n    const shadowSize = this.style.spread + this.style.blur * 2; // size increase based on shadow params\n    const holepunchError = 4; // extra value to tighten holepunch area so you don't see sliver of extra space\n\n    // TODO: Need to know which mode style has the largest offset values, could refactor\n    const extraBoundsY = this.style.maxOffsetY;\n    const extraBoundsX = this.style.maxOffsetX;\n    const radius = getMaxRoundRadius(this.style.radius, this.w, this.h);\n\n    this.patch({\n      Frame: {\n        w: this.w + shadowSize * 2 + extraBoundsX,\n        h: this.h + shadowSize * 2 + extraBoundsY,\n        x: (this.w + extraBoundsX) / 2,\n        y: (this.h + extraBoundsY) / 2,\n        mount: 0.5,\n\n        // maskShadow prop enables a holepunch shader to mask out the parent component shape\n        rtt: this.maskShadow,\n        shader: this.maskShadow\n          ? {\n              type: lng.shaders.Hole,\n              w: this.w - holepunchError,\n              h: this.h - holepunchError,\n              x: shadowSize + holepunchError / 2,\n              y: shadowSize + holepunchError / 2,\n              radius\n            }\n          : undefined,\n        Shadow: {\n          color: this.style.color,\n          texture: lng.Tools.getShadowRect(\n            // Underlying getShadowRect function adds blur to the canvas size, so we don't need to add it like above\n            this.w + this.style.spread * 2,\n            this.h + this.style.spread * 2,\n            radius,\n            this.style.blur\n          )\n        }\n      }\n    });\n\n    // Set to should smooth after initial shadow patch has been created\n    if (this.shouldSmooth === undefined) {\n      this.shouldSmooth = true;\n    }\n\n    this._updateFocusStyle();\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const size = theme.spacer.xxl;\n  return {\n    width: size,\n    height: size,\n    radius: size / 2\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Slider from './Slider';\nimport * as styles from './SliderLarge.styles';\n\nexport default class SliderLarge extends Slider {\n  static get __componentName() {\n    return 'SliderLarge';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport { stringifyCompare } from '../../utils';\n\nexport default class ContentSwitcher extends Base {\n  static get __componentName() {\n    return 'ContentSwitcher';\n  }\n\n  static get properties() {\n    return ['selectedIndex'];\n  }\n\n  _construct() {\n    super._construct();\n    this._selectedIndex = 0;\n    this._contentItems = [];\n  }\n\n  _update() {\n    super._update();\n    this._updateSelected();\n  }\n\n  _updateSelected() {\n    if (this._preveSelectedIndex !== this.selectedIndex) {\n      if (this._preveSelectedIndex !== undefined) {\n        const prevContent = this.tag(`Content${this._preveSelectedIndex}`);\n        prevContent.smooth = { alpha: 0 };\n        if (this._hasContent) {\n          prevContent._getTransition('alpha').once('finish', () => {\n            this._fadeInContent();\n          });\n        } else if (this.selectedIndex !== undefined) {\n          this._fadeInContent();\n        }\n      } else if (this._hasContent) {\n        this._fadeInContent();\n      }\n      this._preveSelectedIndex = this.selectedIndex;\n    }\n  }\n\n  _fadeInContent() {\n    this._selectedContent.smooth = { alpha: 1 };\n    this._selectedContent._getTransition('alpha').once('finish', () => {\n      this.h = this._selectedContent.h;\n      this.signal('contentHeightChange', this.h);\n    });\n  }\n\n  _updateContent() {\n    const allContent = this.contentItems.reduce((acc, item, idx) => {\n      let component;\n      const tagName = `Content${idx}`;\n\n      if (typeof item === 'function') {\n        const componentLoader = item();\n        if (componentLoader.then) {\n          // update template async after component has loaded\n          this._loadAsyncComponent(componentLoader, idx);\n        } else {\n          component = componentLoader;\n        }\n      } else {\n        component = item;\n      }\n\n      if (component) {\n        acc[tagName] = {\n          ...component,\n          alpha: 0\n        };\n      }\n\n      return acc;\n    }, {});\n    this.patch(allContent);\n  }\n\n  _loadAsyncComponent(componentLoader, idx) {\n    componentLoader.then(component => {\n      const tagName = `Content${idx}`;\n      this.patch({ [tagName]: { ...component, alpha: 0 } });\n    });\n  }\n\n  set contentItems(contentItems) {\n    if (!stringifyCompare(contentItems, this._contentItems)) {\n      this._contentItems = contentItems;\n      this._updateContent();\n    }\n  }\n\n  get contentItems() {\n    return this._contentItems;\n  }\n\n  get _hasContent() {\n    return this._selectedContent && this._selectedContent.children.length > 0;\n  }\n\n  get _selectedContent() {\n    return this.tag(`Content${this.selectedIndex}`);\n  }\n\n  _getFocused() {\n    if (this._hasContent) {\n      return this._selectedContent;\n    }\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  tabSpacing: theme.spacer.lg,\n  tabsMarginBottom: theme.spacer.xxl\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Base from '../Base';\nimport Row from '../Row';\nimport ContentSwitcher from './ContentSwitcher';\nimport * as styles from './TabBar.styles';\n\nexport default class TabBar extends Base {\n  static _template() {\n    return {\n      Tabs: {\n        type: Row,\n        autoResizeHeight: true,\n        signals: {\n          selectedChange: '_selectedTabChange'\n        }\n      },\n      TabContent: {\n        type: ContentSwitcher,\n        signals: {\n          contentHeightChange: '_updateTabBarHeight'\n        }\n      }\n    };\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get __componentName() {\n    return 'TabBar';\n  }\n\n  static get properties() {\n    return [\n      'alphaSelectedTab',\n      'collapse',\n      'reset',\n      'tabs',\n      'retainSelection',\n      ...Row.properties\n    ];\n  }\n\n  static get tags() {\n    return ['Tabs', 'TabContent'];\n  }\n\n  _construct() {\n    super._construct();\n    this._tabContent = [];\n    this._isTabsFocused = true;\n  }\n\n  _selectedTabChange(selected, prevSelected) {\n    this.fireAncestors('$tabChanged', selected, prevSelected, this);\n    if (\n      typeof this._tabContent === 'object' &&\n      typeof this._tabContent.then === 'function'\n    ) {\n      return this._tabContent.then(this.queueRequestUpdate);\n    }\n    return this.queueRequestUpdate();\n  }\n\n  _update() {\n    this._updateTabsLayout();\n    this._updateTabs();\n    this._updateTabContent();\n    this._updateTabBarHeight();\n  }\n\n  _updateTabsLayout() {\n    const defaultLayout = {\n      style: {\n        itemSpacing: this.style.tabSpacing\n      }\n    };\n    const tabsRowPatch = Row.properties.reduce((patchObj, prop) => {\n      if (this[prop] != undefined) {\n        patchObj[prop] = this[prop];\n      }\n      return patchObj;\n    }, defaultLayout);\n\n    this._Tabs.patch(tabsRowPatch);\n  }\n\n  _updateTabs() {\n    this._Tabs.wrapSelected = this.wrapSelected;\n    this._Tabs.items.forEach(tab => {\n      const isSelectedTab = tab === this._Tabs.selected;\n      if (this._isUnfocusedMode) {\n        tab.mode =\n          isSelectedTab && this.retainSelection ? 'selected' : 'unfocused';\n      } else if (this._isFocusedMode) {\n        if (this._isTabsFocused) {\n          tab.mode = isSelectedTab ? 'focused' : 'unfocused';\n        } else {\n          tab.mode = isSelectedTab ? 'selected' : 'unfocused';\n        }\n      }\n    });\n    if (this.alphaSelectedTab) {\n      this._updateTabAlphas();\n    }\n  }\n\n  _updateTabAlphas() {\n    if (this._isTabsFocused) {\n      this._Tabs.items.forEach(tab => {\n        tab.patch({ alpha: 1 });\n      });\n    } else {\n      this._Tabs.items.forEach(tab => {\n        tab.patch({ alpha: tab === this._Tabs.selected ? 1 : 0.3 });\n      });\n    }\n  }\n\n  _updateTabContent() {\n    const margin = this.style.tabsMarginBottom;\n    this._TabContent.patch({\n      y: this._Tabs.h + margin,\n      contentItems: this._tabContent,\n      selectedIndex: this._isFocusedMode ? this._Tabs.selectedIndex : undefined\n    });\n  }\n\n  $itemChanged() {\n    // triggered when the Tabs Row resizes\n    // update the height of TabBar using the latest h value from Tabs\n    this._updateTabBarHeight();\n    this._updateTabContent();\n  }\n\n  _updateTabBarHeight() {\n    let h;\n    if (this.collapse) {\n      h =\n        this._isFocusedMode &&\n        this._tabContent.filter(content => Object.keys(content).length).length\n          ? this._expandedHeight\n          : this._collapsedHeight;\n    } else {\n      h = this._expandedHeight;\n    }\n    this._TabContent.smooth = {\n      alpha: !this.collapse || this._isFocusedMode ? 1 : 0.001\n    };\n    if (this.h !== h) {\n      this.h = h;\n      this.fireAncestors('$itemChanged');\n    }\n  }\n\n  selectTabs() {\n    if (!this._isTabsFocused) {\n      this._isTabsFocused = true;\n      this._updateTabs();\n      this._updateTabBarHeight();\n    }\n  }\n\n  resetTabs() {\n    this._Tabs.selectedIndex = 0;\n  }\n\n  _handleDown() {\n    if (this._isTabsFocused && this._TabContent._hasContent) {\n      this._isTabsFocused = false;\n      this._updateTabs();\n      this._updateTabBarHeight();\n    }\n    return false;\n  }\n\n  _handleUp() {\n    this.selectTabs();\n    return false;\n  }\n\n  _setTabs(tabs) {\n    this._tabContent = [];\n    this._tabContent = tabs.map(tab => tab.tabContent || {});\n    this._Tabs.items = tabs;\n    return tabs;\n  }\n\n  _getTabs() {\n    return this._Tabs.items;\n  }\n\n  get selected() {\n    return this._Tabs.selected;\n  }\n\n  get selectedIndex() {\n    return this._Tabs.selectedIndex;\n  }\n\n  set selectedIndex(index) {\n    this._Tabs.selectedIndex = index;\n  }\n\n  get _collapsedHeight() {\n    return this._Tabs.h;\n  }\n\n  get _expandedHeight() {\n    return this._Tabs.h + this.style.tabsMarginBottom + this._TabContent.h;\n  }\n\n  _getFocused() {\n    return this._isTabsFocused ? this._Tabs : this._TabContent;\n  }\n\n  _unfocus() {\n    super._unfocus();\n    if (this.reset) {\n      this.resetTabs();\n    }\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  radius: theme.radius.xl,\n  paddingX: theme.spacer.xxxl + theme.spacer.xxs,\n  paddingY: theme.spacer.md + theme.spacer.xs,\n  paddingXNoTitle: theme.spacer.xl,\n  iconSize: theme.spacer.xxxl,\n  iconMarginRight: theme.spacer.md,\n  textStyle: {\n    ...theme.typography.headline3,\n    textColor: theme.color.textNeutral\n  },\n  backgroundColor: theme.color.fillTransparent,\n  contentColor: theme.color.fillNeutral\n});\n\nexport const mode = theme => ({\n  focused: {\n    backgroundColor: theme.color.interactiveNeutralFocus,\n    contentColor: theme.color.fillInverse,\n    textStyle: { textColor: theme.color.textInverse }\n  },\n  selected: {\n    backgroundColor: theme.color.interactiveNeutralFocusSoft,\n    contentColor: theme.color.fillNeutral,\n    textStyle: { textColor: theme.color.textNeutral }\n  },\n  disabled: {\n    backgroundColor: theme.color.fillTransparent,\n    contentColor: theme.color.fillNeutralDisabled,\n    textStyle: { textColor: theme.color.textNeutralDisabled }\n  }\n});\n\nexport const tone = theme => ({\n  neutral: {},\n  inverse: {\n    mode: {\n      focused: {\n        contentColor: theme.color.fillNeutral,\n        textStyle: { textColor: theme.color.textNeutral }\n      }\n    }\n  },\n  brand: {\n    mode: {\n      focused: {\n        contentColor: theme.color.fillNeutral,\n        textStyle: { textColor: theme.color.textNeutral }\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Surface from '../Surface';\nimport Icon from '../Icon';\nimport TextBox from '../TextBox';\nimport * as styles from './Tab.styles';\n\nexport default class Tab extends Surface {\n  static _template() {\n    return {\n      ...super._template(),\n      Content: {\n        mount: 0.5,\n        x: w => w / 2,\n        y: h => h / 2,\n        Text: {\n          type: TextBox,\n          mountY: 0.5,\n          signals: {\n            textBoxChanged: '_onTextBoxChanged'\n          }\n        }\n      }\n    };\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static get __componentName() {\n    return 'Tab';\n  }\n\n  static get properties() {\n    return ['icon', 'title'];\n  }\n\n  static get tags() {\n    return [\n      ...super.tags,\n      'Content',\n      {\n        name: 'Icon',\n        path: 'Content.Icon'\n      },\n      {\n        name: 'Text',\n        path: 'Content.Text'\n      }\n    ];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'noTitlePaddingX', curr: 'paddingXNoTitle' }];\n  }\n\n  _onTextBoxChanged() {\n    this._updateContent();\n    this._updateTabSize();\n  }\n\n  _update() {\n    super._update();\n    this._updateIcon();\n    this._updateText();\n    this._updateContent();\n    this._updateTabSize();\n  }\n\n  _updateIcon() {\n    if (!this.icon) {\n      this._Content.patch({ Icon: undefined });\n      return;\n    }\n    const iconPatch = {\n      icon: this.icon,\n      w: this.style.iconSize,\n      h: this.style.iconSize,\n      y: this._Content.h / 2,\n      style: {\n        color: this.style.contentColor\n      }\n    };\n\n    if (this.title) {\n      iconPatch.x = 0;\n      iconPatch.mountX = 0;\n    } else {\n      iconPatch.x = this._Content.w / 2;\n      iconPatch.mountX = 0.5;\n    }\n\n    if (this._Icon) {\n      this._Icon.patch(iconPatch);\n    } else {\n      this._Content.patch({\n        Icon: {\n          type: Icon,\n          mountY: 0.5,\n          ...iconPatch\n        }\n      });\n    }\n  }\n\n  _updateText() {\n    const textPatch = {\n      content: this.title,\n      style: { textStyle: this.style.textStyle },\n      y: this._Content.h / 2\n    };\n    if (this.icon) {\n      textPatch.x = this._iconW + this.style.iconMarginRight;\n      textPatch.mountX = 0;\n    } else {\n      textPatch.x = this._Content.w / 2;\n      textPatch.mountX = 0.5;\n    }\n\n    this._Text.patch(textPatch);\n  }\n\n  _updateContent() {\n    this._Content.patch({\n      w:\n        this._iconW +\n        (this.title ? this.style.iconMarginRight : 0) +\n        this._textW,\n      h: Math.max(this._iconH, this._Text.h)\n    });\n  }\n\n  _updateTabSize() {\n    if (this.title || this.icon) {\n      this.patch({\n        w: this._paddingX * 2 + this._Content.w,\n        h: this.style.paddingY * 2 + this._Content.h\n      });\n    } else {\n      this.patch({ w: 0, h: 0 });\n    }\n  }\n\n  get _textW() {\n    return this.title ? this._Text.w : 0;\n  }\n\n  get _iconW() {\n    return this.icon && this._Icon !== undefined ? this._Icon.w : 0;\n  }\n\n  get _iconH() {\n    return this.icon && this._Icon !== undefined ? this._Icon.h : 0;\n  }\n\n  get _paddingX() {\n    return this.title ? this.style.paddingX : this.style.paddingXNoTitle;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Text && this._Text.announce);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const knobSize = theme.spacer.xl;\n  const knobPadding = theme.spacer.xs;\n  const strokeWidth = theme.stroke.sm;\n  return {\n    height: knobSize + (knobPadding + strokeWidth) * 2,\n    knobWidth: knobSize,\n    knobHeight: knobSize,\n    knobRadius: knobSize / 2,\n    knobPadding,\n    strokeWidth,\n    width: (strokeWidth + knobPadding * 2 + knobSize) * 2\n  };\n};\n\nexport const tone = theme => ({\n  neutral: {\n    strokeColor: theme.color.fillNeutral,\n    backgroundColor: theme.color.fillInverseTertiary,\n    backgroundColorChecked: theme.color.fillNeutral,\n    knobColor: theme.color.fillNeutral,\n    knobColorChecked: theme.color.fillInverse,\n    mode: {\n      disabled: {\n        strokeColor: theme.color.fillNeutralDisabled,\n        backgroundColor: theme.color.fillInverseDisabled,\n        backgroundColorChecked: theme.color.fillNeutralDisabled,\n        knobColor: theme.color.fillNeutralDisabled,\n        knobColorChecked: theme.color.fillInverseDisabled\n      }\n    }\n  },\n  inverse: {\n    strokeColor: theme.color.fillInverse,\n    backgroundColor: theme.color.fillNeutralTertiary,\n    backgroundColorChecked: theme.color.fillInverse,\n    knobColor: theme.color.fillInverse,\n    knobColorChecked: theme.color.fillNeutral,\n    mode: {\n      disabled: {\n        strokeColor: theme.color.fillInverseDisabled,\n        backgroundColor: theme.color.fillNeutralDisabled,\n        backgroundColorChecked: theme.color.fillInverseDisabled,\n        knobColor: theme.color.fillInverseDisabled,\n        knobColorChecked: theme.color.fillNeutralDisabled\n      }\n    }\n  },\n  brand: {\n    strokeColor: theme.color.fillBrand,\n    backgroundColor: theme.color.fillBrandTertiary,\n    backgroundColorChecked: theme.color.fillBrand,\n    knobColor: theme.color.fillBrand,\n    knobColorChecked: theme.color.fillInverse,\n    mode: {\n      disabled: {\n        strokeColor: theme.color.fillNeutralDisabled,\n        backgroundColor: theme.color.fillInverseDisabled,\n        backgroundColorChecked: theme.color.fillNeutralDisabled,\n        knobColor: theme.color.fillNeutralDisabled,\n        knobColorChecked: theme.color.fillInverseDisabled\n      }\n    }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\nimport Base from '../Base';\nimport * as styles from './Toggle.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Toggle extends Base {\n  static get __componentName() {\n    return 'Toggle';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      Container: {\n        Stroke: {},\n        Knob: {}\n      }\n    };\n  }\n\n  static get tags() {\n    return [\n      'Container',\n      {\n        name: 'Knob',\n        path: 'Container.Knob'\n      },\n      {\n        name: 'Stroke',\n        path: 'Container.Stroke'\n      }\n    ];\n  }\n\n  static get properties() {\n    return ['checked'];\n  }\n\n  static get aliasStyles() {\n    return [{ prev: 'strokeWeight', curr: 'strokeWidth' }];\n  }\n\n  _construct() {\n    super._construct && super._construct();\n    this._checked = false;\n  }\n\n  _update() {\n    this._updateKnobPosition();\n    this._updateColors();\n    this._updateContainer();\n    this._updateStroke();\n    this._updateKnob();\n    if (this._checkedChanged) {\n      this.fireAncestors('$announce', this.announce);\n      this._checkedChanged = false;\n    }\n  }\n\n  _updateKnobPosition() {\n    const { knobPadding, knobWidth, strokeWidth } = this.style;\n\n    this.applySmooth(this._Knob, {\n      x: this.checked\n        ? this.w - strokeWidth - knobPadding - knobWidth\n        : strokeWidth + knobPadding\n    });\n  }\n\n  _updateColors() {\n    const {\n      backgroundColor,\n      backgroundColorChecked,\n      knobColor,\n      knobColorChecked\n    } = this.style;\n\n    const currentKnobColor = this.checked ? knobColorChecked : knobColor;\n    const containerColor = this.checked\n      ? backgroundColorChecked\n      : backgroundColor;\n\n    this.applySmooth(this._Knob, { color: currentKnobColor });\n    this.applySmooth(this._Container, { color: containerColor });\n  }\n\n  _updateContainer() {\n    const { knobRadius, knobPadding, strokeRadius, strokeWidth } = this.style;\n\n    const radius =\n      strokeRadius !== undefined\n        ? strokeRadius === 0\n          ? strokeRadius\n          : Math.max(0, strokeRadius - strokeWidth)\n        : Math.max(0, knobRadius + knobPadding + strokeWidth);\n\n    this._Container.patch({\n      w: this.w,\n      h: this.h,\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        this.w - strokeWidth * 2 - 2,\n        this.h - strokeWidth * 2 - 2,\n        getMaxRoundRadius(radius, this.w, this.h),\n        strokeWidth,\n        0,\n        true,\n        false\n      )\n    });\n  }\n\n  _updateStroke() {\n    const { knobRadius, knobPadding, strokeColor, strokeRadius, strokeWidth } =\n      this.style;\n\n    this._Stroke.patch({\n      w: this.w,\n      h: this.h,\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        this.w - 2,\n        this.h - 2,\n        strokeRadius !== undefined\n          ? getMaxRoundRadius(strokeRadius, this.w, this.h)\n          : getMaxRoundRadius(\n              knobRadius,\n              this.w - knobPadding * 2 - 2,\n              this.h - knobPadding * 2 - 2\n            ) +\n              knobPadding +\n              strokeWidth,\n        strokeWidth,\n        strokeColor,\n        false,\n        false\n      )\n    });\n  }\n\n  _updateKnob() {\n    const { knobHeight, knobWidth, knobRadius } = this.style;\n\n    this._Knob.patch({\n      zIndex: 2,\n      y: (this.h - knobHeight) / 2,\n      texture: lng.Tools.getRoundRect(\n        // Compensating for the extra 2 pixels getRoundRect adds\n        knobWidth - 2,\n        knobHeight - 2,\n        getMaxRoundRadius(knobRadius, knobWidth - 2, knobHeight - 2),\n        0,\n        0,\n        true,\n        false\n      )\n    });\n  }\n\n  _setChecked(checked) {\n    this._checkedChanged = checked !== this._checked;\n    return checked;\n  }\n\n  toggle() {\n    if (!this._isDisabledMode) {\n      this.checked = !this.checked;\n    }\n    return this;\n  }\n\n  _handleEnter() {\n    if (typeof this.onEnter === 'function') {\n      return this.onEnter(this);\n    } else {\n      this.toggle();\n    }\n    return false;\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this.checked ? 'Checked' : 'Unchecked');\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => {\n  const knobSize = theme.spacer.lg;\n  const knobPadding = theme.spacer.xxs;\n  const strokeWidth = theme.stroke.sm;\n  return {\n    height: knobSize + (knobPadding + strokeWidth) * 2,\n    knobWidth: knobSize,\n    knobHeight: knobSize,\n    knobRadius: knobSize / 2,\n    knobPadding,\n    strokeWidth,\n    width: (strokeWidth + knobPadding * 2 + knobSize) * 2\n  };\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Toggle from './Toggle';\nimport * as styles from './ToggleSmall.styles';\n\nexport default class ToggleSmall extends Toggle {\n  static get __componentName() {\n    return 'ToggleSmall';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class Bubble extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n    this._w = 0;\n    this._h = 0;\n    this._radius = 0;\n    this._pointerWidth = 0;\n    this._pointerHeight = 0;\n    this._strokeWidth = 0;\n    this._color = 'white';\n  }\n\n  set w(w) {\n    this._w = w;\n    this._changed();\n  }\n\n  get w() {\n    return this._w;\n  }\n\n  set h(h) {\n    this._h = h;\n    this._changed();\n  }\n\n  get h() {\n    return this._h;\n  }\n\n  set radius(radius) {\n    if (Array.isArray(radius)) {\n      this._radius = new Array(4).fill().map((_, index) => radius[index] || 0);\n    } else {\n      this._radius = radius;\n    }\n    this._changed();\n  }\n\n  get radius() {\n    return this._radius;\n  }\n\n  set pointerWidth(pointerWidth) {\n    this._pointerWidth = pointerWidth;\n    this._changed();\n  }\n\n  get pointerWidth() {\n    return this._pointerWidth;\n  }\n\n  set pointerHeight(pointerHeight) {\n    this._pointerHeight = pointerHeight;\n    this._changed();\n  }\n\n  get pointerHeight() {\n    return this._pointerHeight;\n  }\n\n  set strokeWidth(strokeWidth) {\n    this._strokeWidth = strokeWidth;\n    this._changed();\n  }\n\n  get strokeWidth() {\n    return this._strokeWidth;\n  }\n\n  set color(color) {\n    this._color = lng.StageUtils.getRgbaString(color);\n    this._changed();\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  createBubble({\n    stage,\n    w = 0,\n    h = 0,\n    radius = 0,\n    pointerWidth = 0,\n    pointerHeight = 0,\n    strokeWidth = 1,\n    color = 'white'\n  }) {\n    const canvas = stage.platform.getDrawingCanvas();\n    const ctx = canvas.getContext('2d');\n\n    canvas.width = w + strokeWidth + 4;\n    canvas.height = h + strokeWidth + 4;\n\n    ctx.imageSmoothingEnabled = true;\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    ctx.lineWidth = strokeWidth;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n\n    const initialCoord = 0.5 * strokeWidth + 1;\n    const leftX = initialCoord;\n    const rightX = leftX + w;\n    const topY = initialCoord;\n    const bottomY = topY + h;\n    const bottomBubbleY = bottomY - pointerHeight;\n    const isRadiusAnArray = Array.isArray(radius);\n    // start: top left\n    ctx.beginPath();\n    ctx.moveTo(leftX + (isRadiusAnArray ? radius[0] : radius), topY);\n    // top side\n    ctx.lineTo(rightX - (isRadiusAnArray ? radius[0] : radius), topY);\n    // top right corner\n    ctx.arcTo(\n      rightX,\n      topY,\n      rightX,\n      topY + (isRadiusAnArray ? radius[1] : radius),\n      isRadiusAnArray ? radius[1] : radius\n    );\n\n    // right side\n    ctx.lineTo(rightX, bottomBubbleY - (isRadiusAnArray ? radius[2] : radius));\n\n    // bottom right corner\n    ctx.arcTo(\n      rightX,\n      bottomBubbleY,\n      rightX - (isRadiusAnArray ? radius[2] : radius),\n      bottomBubbleY,\n      isRadiusAnArray ? radius[2] : radius\n    );\n\n    // bottom side, right of point\n    ctx.lineTo(w / 2 + pointerWidth / 2, bottomBubbleY);\n\n    // point\n    ctx.arcTo(w / 2, bottomY, w / 2 - pointerWidth / 2, bottomBubbleY, 2);\n    ctx.lineTo(w / 2 - pointerWidth / 2, bottomBubbleY);\n\n    // bottom side, left of point\n    ctx.lineTo(leftX + (isRadiusAnArray ? radius[3] : radius), bottomBubbleY);\n\n    // bottom left corner\n    ctx.arcTo(\n      leftX,\n      bottomBubbleY,\n      leftX,\n      bottomBubbleY - (isRadiusAnArray ? radius[3] : radius),\n      isRadiusAnArray ? radius[3] : radius\n    );\n\n    // left side\n    ctx.lineTo(leftX, topY + (isRadiusAnArray ? radius[0] : radius));\n\n    // top left corner\n    ctx.arcTo(\n      leftX,\n      topY,\n      leftX + (isRadiusAnArray ? radius[0] : radius),\n      topY,\n      isRadiusAnArray ? radius[0] : radius\n    );\n\n    // draw shape and fill with color\n    ctx.stroke();\n    ctx.fill();\n\n    return canvas;\n  }\n\n  _getLookupId() {\n    const { w, h, radius, pointerWidth, pointerHeight, color } = this;\n    return `__bubble_${w}x${h}_radius-${radius}_pointer-${pointerWidth}x${pointerHeight}_fill-${color}`;\n  }\n\n  _getSourceLoader() {\n    return cb => {\n      cb(null, {\n        source: this.createBubble(this)\n      });\n    };\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport const base = theme => ({\n  marginBottom: theme.spacer.xl,\n  paddingX: theme.spacer.lg,\n  paddingY: theme.spacer.md,\n  pointerWidth: theme.spacer.xxl,\n  pointerHeight: theme.spacer.lg,\n  radius: theme.radius.sm,\n  textStyle: {\n    ...theme.typography.body3,\n    textColor: theme.color.textInverse\n  },\n  transition: theme.animation.utility // TODO: should delay and duration be xfast?\n});\n\nexport const tone = theme => ({\n  neutral: {\n    backgroundColor: theme.color.fillNeutral,\n    textStyle: { textColor: theme.color.textInverse }\n  },\n  inverse: {\n    backgroundColor: theme.color.fillInverse,\n    textStyle: { textColor: theme.color.textNeutral }\n  },\n  brand: {\n    backgroundColor: theme.color.fillBrand,\n    textStyle: { textColor: theme.color.textNeutral }\n  }\n});\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Bubble from '../../textures/Bubble';\nimport TextBox from '../TextBox';\nimport Base from '../Base';\nimport * as styles from './Tooltip.styles';\nimport { getMaxRoundRadius } from '../../utils';\n\nexport default class Tooltip extends Base {\n  static get __componentName() {\n    return 'Tooltip';\n  }\n\n  static get __themeStyle() {\n    return styles;\n  }\n\n  static _template() {\n    return {\n      alpha: 0,\n      scale: 0.5,\n      mountX: 0.5,\n      x: w => w / 2,\n      Background: {\n        Text: {\n          type: TextBox,\n          signals: {\n            textBoxChanged: '_textLoaded'\n          }\n        }\n      }\n    };\n  }\n\n  static get properties() {\n    return ['title', 'delayVisible', 'timeVisible'];\n  }\n\n  static get tags() {\n    return ['Background', { name: 'Text', path: 'Background.Text' }];\n  }\n\n  static get aliasStyles() {\n    return [\n      { prev: 'pointerH', curr: 'pointerHeight' },\n      { prev: 'pointerW', curr: 'pointerWidth' }\n    ];\n  }\n\n  _update() {\n    this._updateText();\n    this._updateBackground();\n  }\n\n  _updateText() {\n    if (this._Text) {\n      this._Text.patch({\n        content: this.title,\n        style: { textStyle: this.style.textStyle }\n      });\n    }\n  }\n\n  _textLoaded() {\n    this._updateBackgroundHeight();\n    this._updateTextPosition();\n  }\n\n  /**\n   * patches Background prop updates\n   */\n  _updateBackground() {\n    this.patch({\n      Background: {\n        texture: {\n          type: Bubble,\n          w: this._Background.w,\n          h: this._Background.h,\n          radius: getMaxRoundRadius(\n            this.style.radius,\n            this._Background.w - this.style.pointerHeight,\n            this._Background.h - this.style.pointerHeight\n          ),\n          pointerWidth: this.style.pointerWidth,\n          pointerHeight: this.style.pointerHeight,\n          color: this.style.backgroundColor\n        }\n      }\n    });\n  }\n\n  /**\n   * updates height of background when text height or width is changed\n   */\n  _updateBackgroundHeight() {\n    const backgroundH =\n      this._Text.finalH + this.style.paddingY * 2 + this.style.pointerHeight;\n    const backgroundW = this._Text.finalW + this.style.paddingX * 2;\n    this.patch({\n      w: backgroundW,\n      h: backgroundH,\n      mountY: 1,\n      y: -this.style.marginBottom,\n      Background: {\n        w: backgroundW,\n        h: backgroundH,\n        texture: {\n          type: Bubble,\n          w: backgroundW,\n          h: backgroundH\n        }\n      }\n    });\n  }\n\n  _updateTextPosition() {\n    if (this._Text) {\n      this._Text.patch({\n        mount: 0.5,\n        x: this._Background.w / 2,\n        y: (this._Background.h - this.style.pointerHeight) / 2\n      });\n    }\n  }\n\n  _clearTimers() {\n    clearTimeout(this._hideTimer);\n    clearTimeout(this._showTimer);\n  }\n\n  _transitionIn() {\n    const smooth = {\n      smooth: {\n        alpha: [1, this.style.transition],\n        scale: [1, this.style.transition]\n      }\n    };\n\n    if (this.delayVisible) {\n      this._showTimer = setTimeout(() => {\n        this.patch({ smooth });\n      }, this.delayVisible);\n    } else {\n      this._showTimer = undefined;\n      this.patch({ smooth });\n    }\n\n    this._hideTimer = this.timeVisible\n      ? setTimeout(() => {\n          this._unfocus();\n        }, this.timeVisible + (this.delayVisible || 0))\n      : undefined;\n  }\n\n  _transitionOut() {\n    this.patch({\n      smooth: {\n        alpha: [0, this.style.transition],\n        scale: [0.5, this.style.transition]\n      }\n    });\n  }\n\n  _focus() {\n    this._clearTimers();\n    this._transitionIn();\n  }\n\n  _unfocus() {\n    this._clearTimers();\n    this._transitionOut();\n  }\n\n  set announce(announce) {\n    super.announce = announce;\n  }\n\n  get announce() {\n    return this._announce || (this._Text && this._Text.announce);\n  }\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/*\nCreate a Lightning Object pool and then get the component from the pool.\n\nBy default we create two objects, with expectations that one is used at a time\n\nLearn more about object pools\nhttps://egghead.io/blog/object-pool-design-pattern\n*/\n\nconst pools = new Map();\n\nfunction get(key) {\n  if (pools.has(key)) {\n    const pool = pools.get(key);\n    let index = pool.index;\n\n    if (index >= pool.components.length) {\n      index = 0;\n    }\n    pool.index = index + 1;\n\n    return pool.components[index];\n  }\n\n  return false;\n}\n\nfunction clear() {\n  pools.clear();\n}\n\nfunction create({ name, component, stage, size = 2 }) {\n  if (pools.has(name)) {\n    return get(name);\n  }\n\n  component = component || { type: name };\n  const components = [];\n  for (let i = 0; i < size; i++) {\n    components.push(stage.c(component));\n  }\n\n  pools.set(name, {\n    index: 0,\n    components\n  });\n\n  return get(name);\n}\n\nexport default {\n  get,\n  create,\n  clear\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/* global SpeechSynthesisErrorEvent */\nfunction flattenStrings(series = []) {\n  const flattenedSeries = [];\n\n  for (var i = 0; i < series.length; i++) {\n    if (typeof series[i] === 'string' && !series[i].includes('PAUSE-')) {\n      flattenedSeries.push(series[i]);\n    } else {\n      break;\n    }\n  }\n  // add a \"word boundary\" to ensure the Announcer doesn't automatically try to\n  // interpret strings that look like dates but are not actually dates\n  // for example, if \"Rising Sun\" and \"1993\" are meant to be two separate lines,\n  // when read together, \"Sun 1993\" is interpretted as \"Sunday 1993\"\n  return [flattenedSeries.join(',\\b ')].concat(series.slice(i));\n}\n\nfunction delay(pause) {\n  return new Promise(resolve => {\n    setTimeout(resolve, pause);\n  });\n}\n\n/**\n * Speak a string\n *\n * @param {string} phrase Phrase to speak\n * @param {SpeechSynthesisUtterance[]} utterances An array which the new SpeechSynthesisUtterance instance representing this utterance will be appended\n * @return {Promise<void>} Promise resolved when the utterance has finished speaking, and rejected if there's an error\n */\nfunction speak(phrase, utterances, lang = 'en-US') {\n  const synth = window.speechSynthesis;\n  return new Promise((resolve, reject) => {\n    const utterance = new SpeechSynthesisUtterance(phrase);\n    utterance.lang = lang;\n    utterance.onend = () => {\n      resolve();\n    };\n    utterance.onerror = e => {\n      reject(e);\n    };\n    utterances.push(utterance);\n    synth.speak(utterance);\n  });\n}\n\nfunction speakSeries(series, lang, root = true) {\n  const synth = window.speechSynthesis;\n  const remainingPhrases = flattenStrings(\n    Array.isArray(series) ? series : [series]\n  );\n  const nestedSeriesResults = [];\n  /*\n    We hold this array of SpeechSynthesisUtterances in order to prevent them from being\n    garbage collected prematurely on STB hardware which can cause the 'onend' events of\n    utterances to not fire consistently.\n  */\n  const utterances = [];\n  let active = true;\n\n  const seriesChain = (async () => {\n    try {\n      while (active && remainingPhrases.length) {\n        const phrase = await Promise.resolve(remainingPhrases.shift());\n        if (!active) {\n          // Exit\n          // Need to check this after the await in case it was cancelled in between\n          break;\n        } else if (typeof phrase === 'string' && phrase.includes('PAUSE-')) {\n          // Pause it\n          let pause = phrase.split('PAUSE-')[1] * 1000;\n          if (isNaN(pause)) {\n            pause = 0;\n          }\n          await delay(pause);\n        } else if (typeof phrase === 'string' && phrase.length) {\n          // Speak it\n          const totalRetries = 3;\n          let retriesLeft = totalRetries;\n          while (active && retriesLeft > 0) {\n            try {\n              await speak(phrase, utterances, lang);\n              retriesLeft = 0;\n            } catch (e) {\n              // eslint-disable-next-line no-undef\n              if (e instanceof SpeechSynthesisErrorEvent) {\n                if (e.error === 'network') {\n                  retriesLeft--;\n                  console.warn(\n                    `Speech synthesis network error. Retries left: ${retriesLeft}`\n                  );\n                  await delay(500 * (totalRetries - retriesLeft));\n                } else if (\n                  e.error === 'canceled' ||\n                  e.error === 'interrupted'\n                ) {\n                  // Cancel or interrupt error (ignore)\n                  retriesLeft = 0;\n                } else {\n                  throw new Error(`SpeechSynthesisErrorEvent: ${e.error}`);\n                }\n              } else {\n                throw e;\n              }\n            }\n          }\n        } else if (typeof phrase === 'function') {\n          const seriesResult = speakSeries(phrase(), lang, false);\n          nestedSeriesResults.push(seriesResult);\n          await seriesResult.series;\n        } else if (Array.isArray(phrase)) {\n          // Speak it (recursively)\n          const seriesResult = speakSeries(phrase, lang, false);\n          nestedSeriesResults.push(seriesResult);\n          await seriesResult.series;\n        }\n      }\n    } finally {\n      active = false;\n    }\n  })();\n  return {\n    series: seriesChain,\n    get active() {\n      return active;\n    },\n    append: toSpeak => {\n      remainingPhrases.push(toSpeak);\n    },\n    cancel: () => {\n      if (!active) {\n        return;\n      }\n      if (root) {\n        synth.cancel();\n      }\n      nestedSeriesResults.forEach(nestedSeriesResults => {\n        nestedSeriesResults.cancel();\n      });\n      active = false;\n    }\n  };\n}\n\nlet currentSeries;\nexport default function (toSpeak, lang) {\n  currentSeries && currentSeries.cancel();\n  currentSeries = speakSeries(toSpeak, lang);\n  return currentSeries;\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Don't wrap patterns with word boundaries (\\b) or set any RegExp flags.\n// Each pattern will be wrapped with \\b and use the global (g) flag when created as a capture group in combined pattern.\nconst defaultAbbreviations = [\n  { pattern: 'TV-14', replacer: 'Rated TV-14' },\n  { pattern: 'CC', replacer: 'Closed Captions available' },\n  { pattern: 'HD', replacer: 'High Definition available' },\n  { pattern: /ENG(?!\\+)/, replacer: 'English Available' },\n  { pattern: /ENG\\+ES/, replacer: 'Available in English and Spanish' },\n  { pattern: 'AD', replacer: 'Audio Description available' },\n  { pattern: 'RT', replacer: 'Rotten Tomatoes' },\n  {\n    pattern: /(S)+(\\d+)+(E)+(\\d+)+/,\n    replacer: (match, p1, p2, p3, p4) => `Season ${p2} Episode ${p4}`\n  }\n];\n\nexport const defaultAbbrevConfig = generateAbbrevConfig(defaultAbbreviations);\n\nfunction wrapWithBoundary(str) {\n  return `\\\\b${str}\\\\b`;\n}\n\nfunction getNumberOfCaptureGroups(regExp) {\n  return new RegExp(regExp.toString() + '|').exec('').length - 1;\n}\n\n/**\n * @typedef {object} AbbreviationConfig\n * @property {object} abbreviationsPattern - combined RegExp pattern of all abbreviations separated into capture groups\n * @property {object} stringPatternMap - object to look up replacers values based on string matches (uses matched string to look up)\n * @property {object} regExpPatternMap - object to look up replacers values based on RegExp matches (uses index of matched capture group to look up)\n */\n\n/**\n * Generates abbreviation config object to be passed to withAnnouncer for abbreviation translation\n * @param {object[]} abbreviations - array of custom abbreviation objects to generate config off of\n * @param {string|object} abbreviations[].pattern - pattern to match abbreviation\n * @param {string|function} abbreviations[].replacer - string or RegEx replacer function to replace matched abbreviation with\n * @param {boolean} extendDefault - if true, extend the default abbreviations config with custom abbreviations\n * @returns {AbbreviationConfig} - configuration that may be passed to withAnnouncer as abbreviations in options parameter\n */\nexport function generateAbbrevConfig(\n  abbreviations = defaultAbbreviations,\n  extendDefault\n) {\n  const abbrev = extendDefault\n    ? [...defaultAbbreviations, ...abbreviations]\n    : abbreviations;\n  const stringPatternMap = {}; // map of exact strings to the associated replacer\n  const regExpPatternMap = {}; // map of RegExp patterns to the associated replacer\n  let abbreviationsPattern = ''; // string of final RegExp pattern with each pattern as a capture group\n  let patternGroupOffset = 0; // incremented for each capture group found in RegExp patterns passed in\n\n  // If the pattern is a RegExp pattern: key RegExp pattern with its index in passed in abbreviations array parameter.\n  // The capture group for this pattern will be at this position (idx) in the combined RegExp pattern.\n  // When a string is matched, the index of the matched capture group can be used to look up the correct replacer.\n  //\n  // Else (the pattern is a string): it can be keyed by it's pattern.\n  // When a string is matched, the string matcher can be used to look up the correct replacer.\n  abbrev.forEach(({ pattern, replacer }, idx) => {\n    let stringPattern;\n    if (pattern instanceof RegExp) {\n      const patternMapIdx = idx + patternGroupOffset;\n      regExpPatternMap[patternMapIdx] = { pattern, replacer };\n      stringPattern = wrapWithBoundary(pattern.source);\n      patternGroupOffset += getNumberOfCaptureGroups(pattern);\n    } else {\n      stringPatternMap[pattern] = { replacer };\n      stringPattern = wrapWithBoundary(pattern);\n    }\n\n    // create single string for final RegExp - each pattern will be a capture group\n    abbreviationsPattern =\n      abbreviationsPattern === ''\n        ? `(${stringPattern})`\n        : `${abbreviationsPattern}|(${stringPattern})`;\n  });\n\n  abbreviationsPattern = new RegExp(abbreviationsPattern, 'g');\n  return { abbreviationsPattern, stringPatternMap, regExpPatternMap };\n}\n\n/**\n * Translates abbreviations in a string into their associated words\n * @param {string} phrase - phrase to be translated\n * @param {object} - abbreviationsPattern, stringPatternMap and regExpPatternMap\n * @returns {string} - phrase where abbreviations have been replaced with words\n */\nexport const translateAbbrev = (phrase, translationConfig) => {\n  const { abbreviationsPattern, stringPatternMap, regExpPatternMap } =\n    translationConfig;\n\n  const translated = phrase.replace(\n    abbreviationsPattern,\n    (matched, ...args) => {\n      // replace exact string match with replacement string\n      if (stringPatternMap[matched]) {\n        return stringPatternMap[matched].replacer;\n      }\n\n      // else match was found using a more complex RegExp pattern\n      // find replacer by index of matching capture group\n      const patternIdx = args.findIndex(arg => !!arg);\n      const { pattern, replacer } = regExpPatternMap[patternIdx];\n\n      // replace matched string with replacer string\n      if (typeof replacer === 'string') {\n        return replacer;\n      }\n\n      // use replace again for replacer function it can utilize substring matches in its scope\n      if (typeof replacer === 'function') {\n        return matched.replace(pattern, replacer);\n      }\n    }\n  );\n  return translated;\n};\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport Speech from './Speech';\nimport { translateAbbrev } from './abbreviations';\nimport { debounce } from '../../utils';\n\nexport { generateAbbrevConfig, defaultAbbrevConfig } from './abbreviations';\n\nconst fiveMinutes = 300 * 1000;\n\nfunction elmName(elm) {\n  return elm.ref || elm.constructor.name;\n}\n\nconst defaultOptions = {\n  voiceOutDelay: 500,\n  abbreviationsConfig: {}\n};\n\nexport default function withAnnouncer(Base, speak = Speech, options = {}) {\n  const announcerOptions = { ...defaultOptions, ...options };\n\n  return class extends Base {\n    _construct() {\n      this._announceEndedTimeout;\n      this._currentlySpeaking = '';\n      super._construct && super._construct();\n    }\n\n    _voiceOut(toAnnounce) {\n      if (this._voiceOutDisabled) {\n        return;\n      }\n      let toSpeak = toAnnounce;\n      if (announcerOptions.abbreviationsConfig.abbreviationsPattern) {\n        toSpeak = Array.isArray(toAnnounce)\n          ? toAnnounce.map(phrase =>\n              translateAbbrev(phrase, announcerOptions.abbreviationsConfig)\n            )\n          : translateAbbrev(toAnnounce, announcerOptions.abbreviationsConfig);\n      }\n      const speech = speak(toSpeak, options.language);\n      // event using speech synthesis api promise\n      if (speech && speech.series) {\n        speech.series.then(() => {\n          this.stage.emit('announceEnded');\n        });\n      }\n\n      // event in case speech synthesis api is flakey,\n      // assume the ammount of time it takes to read each word\n      const toAnnounceStr = Array.isArray(toSpeak)\n        ? toSpeak.concat().join(' ')\n        : toSpeak;\n      const toAnnounceWords = toAnnounceStr.split(' ');\n      const timeoutDelay =\n        toAnnounceWords.length * announcerOptions.voiceOutDelay;\n      clearTimeout(this._announceEndedTimeout);\n      this._announceEndedTimeout = setTimeout(() => {\n        this.stage.emit('announceTimeoutEnded');\n      }, timeoutDelay);\n\n      return speech;\n    }\n\n    _build() {\n      super._build && super._build();\n\n      this._debounceAnnounceFocusChanges = debounce(\n        this._announceFocusChanges.bind(this),\n        Number.isInteger(this.announcerFocusDebounce)\n          ? this.announcerFocusDebounce\n          : 400\n      );\n\n      this.announcerTimeout = Number.isInteger(this.announcerTimeout)\n        ? this.announcerTimeout\n        : fiveMinutes;\n\n      this._resetFocusTimer = debounce(() => {\n        // Reset focus path for full announce\n        this._lastFocusPath = undefined;\n      }, this.announcerTimeout);\n    }\n\n    _firstEnable() {\n      super._firstEnable && super._firstEnable();\n\n      // Lightning only calls Focus Change on second focus\n      this._focusChange();\n    }\n\n    _disable() {\n      clearTimeout(this._announceEndedTimeout);\n      this.stage.emit('announceEnded');\n      this.stage.emit('announceTimeoutEnded');\n    }\n\n    set announcerEnabled(val) {\n      this._announcerEnabled = val;\n      this._focusChange();\n    }\n\n    get announcerEnabled() {\n      return this._announcerEnabled;\n    }\n\n    _focusChange() {\n      if (!this._resetFocusTimer) {\n        return;\n      }\n\n      this._resetFocusTimer();\n      this.$announcerCancel();\n      this._debounceAnnounceFocusChanges();\n    }\n\n    _announceFocusChanges() {\n      const focusPath = this.application.focusPath || [];\n      const lastFocusPath = this._lastFocusPath || [];\n      const loaded = focusPath.every(elm => !elm.loading);\n      const focusDiff = focusPath.filter(elm => !lastFocusPath.includes(elm));\n\n      if (!loaded) {\n        this._debounceAnnounceFocusChanges();\n        return;\n      }\n\n      this._lastFocusPath = focusPath.slice(0);\n      // Provide hook for focus diff for things like TextBanner\n      this.focusDiffHook = focusDiff;\n\n      if (!this.announcerEnabled) {\n        return;\n      }\n\n      let toAnnounce = focusDiff.reduce((acc, elm) => {\n        if (elm.announce) {\n          acc.push([elmName(elm), 'Announce', elm.announce]);\n        } else if (elm.title) {\n          acc.push([elmName(elm), 'Title', elm.title || '']);\n        }\n        return acc;\n      }, []);\n\n      focusDiff.reverse().reduce((acc, elm) => {\n        if (elm.announceContext) {\n          acc.push([elmName(elm), 'Context', elm.announceContext]);\n        } else {\n          acc.push([elmName(elm), 'No Context', '']);\n        }\n        return acc;\n      }, toAnnounce);\n\n      if (this.debug) {\n        console.table(toAnnounce);\n      }\n\n      toAnnounce = toAnnounce.reduce((acc, a) => {\n        const txt = a[2];\n        txt && acc.push(txt);\n        return acc;\n      }, []);\n\n      if (toAnnounce.length) {\n        this.$announcerCancel();\n        this._currentlySpeaking = this._voiceOut(\n          toAnnounce.reduce((acc, val) => acc.concat(val), [])\n        );\n      }\n    }\n\n    $announce(toAnnounce, { append = false, notification = false } = {}) {\n      if (!toAnnounce || !toAnnounce.trim().length) {\n        return;\n      }\n      if (this.announcerEnabled) {\n        this._debounceAnnounceFocusChanges.flush();\n        if (\n          append &&\n          this._currentlySpeaking &&\n          this._currentlySpeaking.active\n        ) {\n          this._currentlySpeaking.append(toAnnounce);\n        } else {\n          this.$announcerCancel();\n          this._currentlySpeaking = this._voiceOut(toAnnounce);\n        }\n\n        if (notification) {\n          this._voiceOutDisabled = true;\n          this._currentlySpeaking.series.finally(() => {\n            this._voiceOutDisabled = false;\n            this.$announcerRefresh();\n          });\n        }\n      }\n    }\n\n    $announcerCancel() {\n      this._currentlySpeaking && this._currentlySpeaking.cancel();\n    }\n\n    $announcerRefresh(depth) {\n      if (depth) {\n        this._lastFocusPath = this._lastFocusPath.slice(0, depth);\n      } else {\n        this._lastFocusPath = undefined;\n      }\n      this._resetFocusTimer();\n      this._focusChange();\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport default function (classImp) {\n  const cache = new Map();\n\n  return base => {\n    if (cache.has(base)) {\n      return cache.get(base);\n    }\n\n    const classWithNewBase = classImp(base);\n    cache.set(base, classWithNewBase);\n    return classWithNewBase;\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport default function withSelections(Base, options = {}) {\n  const defaultOpts = {\n    captureKey: 'Enter',\n    defaultIndex: 0,\n    eventName: 'onSelect',\n    keys: {\n      currentSelected: 'currentSelected',\n      currentSelectedIndex: 'currentSelectedIndex',\n      isSelected: 'isSelected',\n      items: 'items',\n      setSelected: 'setSelected'\n    }\n  };\n  const {\n    captureKey,\n    defaultIndex,\n    eventName,\n    keys: {\n      currentSelected,\n      currentSelectedIndex,\n      isSelected,\n      items,\n      setSelected\n    }\n  } = {\n    ...defaultOpts,\n    ...options,\n    keys: {\n      ...defaultOpts.keys,\n      ...options.keys\n    }\n  };\n\n  return class extends Base {\n    static get name() {\n      return Base.name;\n    }\n\n    _construct() {\n      super._construct();\n      this[currentSelectedIndex] = defaultIndex;\n    }\n\n    _init() {\n      super._init();\n      this[currentSelected][isSelected] = true;\n    }\n\n    [setSelected](selected, val) {\n      const prevSelected = (this[items] || [])[this[currentSelectedIndex]];\n\n      if (\n        selected &&\n        (selected !== prevSelected || selected[isSelected] !== val)\n      ) {\n        prevSelected && (prevSelected[isSelected] = false);\n        selected[isSelected] = val;\n        this[currentSelectedIndex] = Array.from(this[items] || []).indexOf(\n          selected\n        );\n        this.fireAncestors('$' + eventName, selected, val);\n      }\n    }\n\n    _captureKey(event) {\n      if (\n        (Array.isArray(captureKey) && captureKey.indexOf(event.key) > -1) ||\n        event.key === captureKey\n      ) {\n        const [selected] = this.stage.application.focusPath.slice(-1);\n        this[setSelected](selected, true);\n      }\n      return false;\n    }\n\n    ['$' + setSelected](selected, val) {\n      this[setSelected](selected, val);\n    }\n\n    get [currentSelected]() {\n      return this[items][this[currentSelectedIndex]];\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport default function (Base) {\n  return class extends Base {\n    // Initialization and state management\n    _init() {\n      super._init();\n      this.isEditing = false;\n    }\n\n    toggleEdit() {\n      this.isEditing = !this.isEditing;\n    }\n\n    _unfocus() {\n      this.isEditing = false;\n      super._unfocus();\n    }\n\n    // Item manipulation and transition handling\n    _swapItemArrayPos(array, current, previous) {\n      [array[current], array[previous]] = [array[previous], array[current]];\n      super.selectedIndex = current;\n    }\n\n    _getPositionValue(item, axis) {\n      return item.transition(axis)\n        ? item.transition(axis).targetValue\n        : item[axis];\n    }\n\n    _waitForTransition(item, axis) {\n      return new Promise(resolve =>\n        item._getTransition(axis).on('finish', resolve)\n      );\n    }\n\n    // Selection and focus management\n    get selectedIndex() {\n      return super.selectedIndex;\n    }\n\n    set selectedIndex(index) {\n      if (\n        !this.isEditing ||\n        (this.selectedIndex >= this.items.length - 1 &&\n          index > this.selectedIndex)\n      ) {\n        if (!this.isEditing) {\n          super.selectedIndex = index;\n        }\n        return;\n      }\n\n      const currentItem = this.selected;\n      this.prevSelected = currentItem;\n      const nextItem = this.items[index];\n      const previousIndex = this.selectedIndex;\n\n      const oldPos = {\n        x: this._getPositionValue(currentItem, 'x'),\n        y: this._getPositionValue(currentItem, 'y')\n      };\n      const newPos = {\n        x: this._getPositionValue(nextItem, 'x'),\n        y: this._getPositionValue(nextItem, 'y')\n      };\n      const previousCurrentItemZIndex = currentItem.zIndex;\n      currentItem.zIndex = previousCurrentItemZIndex + 1; // Current item should appear to be on top of other items\n\n      this._swapItemArrayPos(this.items, index, previousIndex);\n      currentItem.setSmooth('x', newPos.x);\n      currentItem.setSmooth('y', newPos.y);\n      nextItem.setSmooth('x', oldPos.x);\n      nextItem.setSmooth('y', oldPos.y);\n\n      (async () => {\n        await Promise.all([\n          this._waitForTransition(currentItem, 'x'),\n          this._waitForTransition(currentItem, 'y'),\n          this._waitForTransition(nextItem, 'x'),\n          this._waitForTransition(nextItem, 'y')\n        ]);\n\n        currentItem.zIndex = previousCurrentItemZIndex; // Reset zIndex\n\n        if (\n          !this.Items.children.length ||\n          !this.Items.children[index]?.skipFocus\n        ) {\n          this._selectedIndex = index;\n          this._render(this.selected, this.prevSelected);\n          this.signal('selectedChange', this.selected, this.prevSelected);\n          this._refocus();\n        }\n      })();\n    }\n\n    _selectedChange(selected, prevSelected) {\n      if (this.isEditing) return;\n      this._render(selected, prevSelected);\n      this.signal('selectedChange', selected, prevSelected);\n    }\n  };\n}\n","﻿/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/*\n  LinearGradient texture\n\n  Properties:\n    h: height of the texture\n    w: width the texture\n    degrees: rotation of the gradient clockwise from 0 (top->bottom), inclusive to 360\n    steps: color steps in the gradient.\n\n  Usage Example (gradient from right to left)\n    Gradient: {\n      texture: {\n        type: LinearGradient,\n        w: gradient_width,\n        h: gradient_height,\n        degrees: 90,\n        steps: [\n          { percent: 0, color: 'rgba(20, 20, 23, 0.48)' },\n          { percent: 0.09, color: 'rgba(20, 20, 23, 0.52)' },\n          { percent: 0.18, color: 'rgba(20, 20, 23, 0.6)' },\n          { percent: 0.26, color: 'rgba(20, 20, 23, 0.69)' },\n          { percent: 0.37, color: 'rgba(20, 20, 23, 0.78)' },\n          { percent: 0.52, color: 'rgba(20, 20, 23, 0.87)' },\n          { percent: 0.72, color: 'rgba(20, 20, 23, 0.94)' },\n          { percent: 1, color: 'rgba(20, 20, 23, 0.96)' }\n        ]\n      }\n    }\n\n  Each step in the gradient is an object with the following properties:\n    percent: number between 0 and 1\n    color: string 'hsla(0,0,0,0)' or 'rgba(0,0,0,0)`\n*/\n\nimport lng from '@lightningjs/core';\n\n// translates degrees into radians\nconst rad = deg => {\n  return (deg * Math.PI) / 180;\n};\n\n// translates radians into degrees\nconst deg = rad => {\n  return (rad * 180) / Math.PI;\n};\n\n// given the width and height of the texture area,\n// calculates the breakpoint angles at which the assumed\n// side of the triangle necessary for calculating the origin\n// points of the linear gradient changes.\n\nconst getBreakpoints = (width, height) => {\n  const a = height / 2;\n  const b = width / 2;\n  const c = Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));\n  const C = 90;\n  const A = Math.ceil(deg(Math.asin((a * Math.sin(rad(C))) / c)));\n  const B = 180 - C - A;\n  return [B, 90, 90 + A, 180, 180 + B, 270, 270 + A, 360];\n};\n\n// given the degrees of rotation, width and height of the texture,\n// calculates the x/y coordinates on the bounding box of the texture\n// where the linear gradient should start and end\n\nconst points = (degrees, width, height) => {\n  const breakAngles = getBreakpoints(width, height);\n  const breakIndex = breakAngles.findIndex(angle => angle >= degrees);\n  let b = height / 2;\n  let max = width / 2;\n  if ([1, 2, 5, 6].includes(breakIndex)) {\n    b = width / 2;\n    max = height / 2;\n  }\n  if ([2, 4, 6].includes(breakIndex)) {\n    degrees = degrees - breakAngles[breakIndex - 1];\n  } else if (breakIndex > 0) {\n    degrees = breakAngles[breakIndex] - degrees;\n  }\n\n  const A = degrees;\n  const B = 90 - A;\n  let a = Math.ceil((Math.sin(rad(A)) * b) / Math.sin(rad(B)));\n  if (a > max) {\n    a = max;\n  }\n\n  let x0 = 0;\n  let y0 = 0;\n  let x1 = 0;\n  let y1 = 0;\n\n  switch (breakIndex) {\n    case 0:\n      x0 = width / 2 + a;\n      break;\n    case 1:\n      x0 = width;\n      y0 = height / 2 - a;\n      break;\n    case 2:\n      x0 = width;\n      y0 = height / 2 + a;\n      break;\n    case 3:\n      x0 = width / 2 + a;\n      y0 = height;\n      break;\n    case 4:\n      x0 = width / 2 - a;\n      y0 = height;\n      break;\n    case 5:\n      y0 = height / 2 + a;\n      break;\n    case 6:\n      y0 = height / 2 - a;\n      break;\n    case 7:\n      x0 = width / 2 - a;\n      break;\n  }\n\n  if (x0 == 0) {\n    x1 = width;\n    y1 = height - y0;\n  }\n  if (y0 == 0) {\n    y1 = height;\n    x1 = width - x0;\n  }\n  if (x0 == width) {\n    x1 = 0;\n    y1 = height - y0;\n  }\n  if (y0 == height) {\n    y1 = 0;\n    x1 = width - x0;\n  }\n  return { x0, y0, x1, y1 };\n};\n\n// The class for the texture\n\nexport default class LinearGradient extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n    this._w = 0;\n    this._h = 0;\n    this._steps = [];\n    this._degrees = 0;\n  }\n\n  // Width\n  get w() {\n    return this._w;\n  }\n\n  set w(w) {\n    this._w = w;\n    this._changed();\n  }\n\n  // Height\n  get h() {\n    return this._h;\n  }\n\n  set h(h) {\n    this._h = h;\n    this._changed();\n  }\n\n  // Steps\n  get steps() {\n    return this._steps;\n  }\n\n  set steps(steps) {\n    this._steps = steps;\n    this._changed();\n  }\n\n  // Degrees\n  get degrees() {\n    return this._degrees;\n  }\n\n  set degrees(degrees) {\n    this._degrees = degrees;\n    this._changed();\n  }\n\n  _getLookupId() {\n    return `__linearGradient_${this._h}_${this._w}_${this._steps.count}_${this._degrees}`;\n  }\n\n  _getSourceLoader() {\n    const w = this._w;\n    const h = this._h;\n    const d = this._degrees;\n    const p = points(d, w, h);\n    const { x0, y0, x1, y1 } = p;\n    const steps = this._steps;\n    const strokeWidth = this.strokeWidth;\n    // if there is a stroke radius, make sure it is in a 4-element array, otherwise, set to 0\n    const strokeRadius = this.strokeRadius\n      ? Array.isArray(this.strokeRadius) && this.strokeRadius.length === 4\n        ? this.strokeRadius\n        : Array(4).fill(this.strokeRadius)\n      : Array(4).fill(0);\n\n    return function (cb) {\n      const canvas = this.stage.platform.getDrawingCanvas();\n\n      canvas.width = w + strokeWidth + 2;\n      canvas.height = h + strokeWidth + 2;\n      var ctx = canvas.getContext('2d');\n\n      var gradient = ctx.createLinearGradient(x0, y0, x1, y1);\n\n      steps.forEach(step => {\n        gradient.addColorStop(step.percent, step.color);\n      });\n\n      if (strokeWidth) {\n        const x = 0.5 * strokeWidth + 1,\n          y = 0.5 * strokeWidth + 1;\n\n        ctx.beginPath();\n        ctx.moveTo(x + strokeRadius[0], y);\n        ctx.lineTo(x + w - strokeRadius[1], y);\n        ctx.arcTo(x + w, y, x + w, y + strokeRadius[1], strokeRadius[1]);\n        ctx.lineTo(x + w, y + h - strokeRadius[2]);\n        ctx.arcTo(\n          x + w,\n          y + h,\n          x + w - strokeRadius[2],\n          y + h,\n          strokeRadius[2]\n        );\n        ctx.lineTo(x + strokeRadius[3], y + h);\n        ctx.arcTo(x, y + h, x, y + h - strokeRadius[3], strokeRadius[3]);\n        ctx.lineTo(x, y + strokeRadius[0]);\n        ctx.arcTo(x, y, x + strokeRadius[0], y, strokeRadius[0]);\n        ctx.closePath();\n\n        ctx.lineWidth = strokeWidth;\n        ctx.strokeStyle = gradient;\n        ctx.stroke();\n      } else {\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, w, h);\n      }\n\n      cb(null, { source: canvas, w, h });\n    };\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class Circle extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n    this._color = 'rgb(0,0,0)';\n    this._fill = true;\n    this._radius = 100;\n    this._stroke = false;\n    this._strokeColor = 'rgb(0,0,0)';\n    this._strokeWidth = 1;\n  }\n\n  get fill() {\n    return this._fill;\n  }\n\n  set fill(fill) {\n    this._fill = fill;\n    this._changed();\n  }\n\n  get radius() {\n    return this._radius;\n  }\n\n  set radius(radius) {\n    this._radius = radius;\n    this._changed();\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this._changed();\n  }\n\n  get stroke() {\n    return this._stroke;\n  }\n\n  set stroke(stroke) {\n    this._stroke = stroke;\n    this._changed();\n  }\n\n  get strokeWidth() {\n    return this._strokeWidth;\n  }\n\n  set strokeWidth(strokeWidth) {\n    this._strokeWidth = strokeWidth;\n    this._changed();\n  }\n\n  get strokeColor() {\n    return this._strokeColor;\n  }\n\n  set strokeColor(strokeColor) {\n    this._strokeColor = strokeColor;\n    this._changed();\n  }\n\n  _getLookupId() {\n    return `__circle_${this._radius}`;\n  }\n\n  _getSourceLoader() {\n    // We need to scope these to protect them from modifications while loading (which may be async).\n    const color = this._color;\n    const fill = this._fill;\n    const radius = this._radius;\n    const stroke = this._stroke;\n    const strokeColor = this._strokeColor;\n    const strokeWidth = this._strokeWidth;\n    const canvas = this.stage.platform.getDrawingCanvas();\n    let dimension = radius;\n\n    if (stroke) {\n      dimension = radius + strokeWidth * 2;\n    }\n\n    canvas.width = dimension * 2;\n    canvas.height = dimension * 2;\n\n    return function (cb) {\n      const ctx = canvas.getContext('2d');\n      ctx.lineWidth = strokeWidth;\n      ctx.strokeStyle = strokeColor;\n      ctx.fillStyle = color;\n      ctx.beginPath();\n\n      ctx.arc(dimension, dimension, radius, 0, 2 * Math.PI);\n\n      if (fill) {\n        ctx.fill();\n      }\n\n      if (stroke) {\n        ctx.stroke();\n      }\n      cb(null, { source: canvas, radius });\n    };\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class Arrow extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n    this._color = 'rgb(13, 13, 15)';\n    this._w = 0;\n    this._h = 0;\n    this._direction = 'right';\n  }\n\n  get w() {\n    return this._w;\n  }\n\n  set w(l) {\n    this._w = l;\n    this._changed();\n  }\n\n  get h() {\n    return this._h;\n  }\n\n  set h(l) {\n    this._h = l;\n    this._changed();\n  }\n\n  get direction() {\n    return this._direction;\n  }\n\n  get color() {\n    return this._color;\n  }\n\n  set color(color) {\n    this._color = color;\n    this._changed();\n  }\n\n  set direction(direction) {\n    this._direction = direction;\n    this._changed();\n  }\n\n  _getLookupId() {\n    return `__triangle_${this._direction}_${this._w}x${this._h}`;\n  }\n\n  _getSourceLoader() {\n    // We need to scope these to protect them from modifications while loading (which may be async).\n\n    const color = this._color;\n    const w = this._w;\n    const h = this._h;\n    const direction = this._direction;\n\n    var canvas = this.stage.platform.getDrawingCanvas();\n    return function (cb) {\n      var ctx = canvas.getContext('2d');\n      canvas.width = w;\n      canvas.height = h;\n      ctx.fillStyle = color;\n      ctx.strokeStyle = ctx.fillStyle;\n      ctx.lineWidth = 2;\n      ctx.lineCap = 'round';\n      ctx.lineJoin = 'round';\n      const p = ctx.lineWidth / 2;\n      ctx.beginPath();\n\n      if (direction === 'right') {\n        ctx.moveTo(p, p);\n        ctx.lineTo(p, h - p);\n        ctx.lineTo(w - p, h / 2);\n      } else if (direction === 'down') {\n        ctx.moveTo(p, p);\n        ctx.lineTo(w - p, p);\n        ctx.lineTo(w / 2, h - p);\n      } else {\n        // default is left arrow\n        ctx.moveTo(p, h / 2);\n        ctx.lineTo(w - p, p);\n        ctx.lineTo(w - p, h - p);\n      }\n      ctx.closePath();\n      ctx.stroke();\n      ctx.fill();\n\n      cb(null, { source: canvas, w, h, direction });\n    };\n  }\n}\n","/**\n * Copyright 2023 Comcast Cable Communications Management, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport lng from '@lightningjs/core';\n\nexport default class Line extends lng.Texture {\n  constructor(stage) {\n    super(stage);\n\n    this._w = 0;\n    this._h = 0;\n    this._rounded = false;\n  }\n\n  get w() {\n    return this._w;\n  }\n\n  set w(l) {\n    this._w = l;\n    this._changed();\n  }\n\n  get h() {\n    return this._h;\n  }\n\n  set h(l) {\n    this._h = l;\n    this._changed();\n  }\n\n  get rounded() {\n    return this._rounded;\n  }\n\n  set rounded(rounded) {\n    this._rounded = rounded;\n    this._changed();\n  }\n\n  _getLookupId() {\n    return `__line_${this._w}x${this._h}${this._rounded ? '_rounded' : ''}`;\n  }\n\n  _getSourceLoader() {\n    // We need to scope these to protect them from modifications while loading (which may be async).\n    const w = this._w;\n    const h = this._h;\n    const rounded = this._rounded;\n\n    var canvas = this.stage.platform.getDrawingCanvas();\n    return function (cb) {\n      var ctx = canvas.getContext('2d');\n      canvas.width = w;\n      canvas.height = h;\n      ctx.lineWidth = h;\n\n      if (rounded) {\n        ctx.lineCap = 'round';\n      }\n\n      ctx.strokeStyle = 'white';\n      ctx.beginPath();\n      ctx.moveTo(rounded ? 2 : 0, h / 2);\n      ctx.lineTo(rounded ? w - 2 : w, h / 2);\n      ctx.stroke();\n\n      cb(null, { source: canvas, w, h, rounded });\n    };\n  }\n}\n","import Button from '../../components/Button/Button';\n\nexport default class SignalButton extends Button {\n  onEnter() {\n    this.signal(this.signalName);\n  }\n  set signalName(signalName) {\n    this._signalName = signalName;\n  }\n  get signalName() {\n    return this._signalName;\n  }\n}\n"],"names":["Logger","constructor","this","_logCallback","undefined","_prefix","_debug","debug","value","Boolean","logCallback","warn","concat","log","_len","arguments","length","args","Array","_key","level","payload","console","info","_len2","_key2","_len3","_key3","error","_len4","_key4","loggerInstance","debounce","func","wait","immediate","timeout","context","timestamp","result","later","last","Date","now","setTimeout","apply","debounced","callNow","clear","clearTimeout","flush","getEuclideanDistance","xA","yA","xB","yB","xDiff","yDiff","Math","sqrt","pow","getShortestDistance","coordinate","element","core","getAbsoluteCoords","distanceToStart","distanceToMiddle","w","h","distanceToEnd","min","isComponentOnScreen","component","offsets","renderContext","px","py","_scissor","scissor","stageH","stage","getRenderPrecision","stageW","finalX","finalY","relativeOffsetX","x","relativeOffsetY","y","offsetX","offsetY","transition","targetValue","wVis","hVis","leftBounds","topBounds","clipWidth","clipHeight","withinLeftClippingBounds","round","withinRightClippingBounds","withinTopClippingBounds","withinBottomClippingBounds","getWidthByUpCount","theme","upCount","screenW","layout","columnCount","marginX","gutterX","columnWidth","columnGapTotal","totalColumnsWidth","getWidthByColumnSpan","columnSpan","getDimensions","obj","fallback","ratioX","ratioY","fallbackW","fallbackH","dimensions","getItemRatioDimensions","_objectSpread","getAspectRatioW","ratio","seperator","ratioW","ratioH","split","getAspectRatioH","getHexColor","hex","alpha","toString","slice","replace","hexAlpha","str","Number","getValidColor","color","test","substr","parseInt","indexOf","rgba2argb","rgba","lng","StageUtils","getArgbNumber","simplifyFraction","_ref","numerator","denominator","i","reduceFraction","string","map","n","join","getValFromObjPath","object","path","filter","key","reduce","dive","rgbaStr","capitalizeFirstLetter","charAt","toUpperCase","RoundRect","getWidth","options","padding","paddingLeft","paddingRight","strokeWidth","getHeight","paddingBottom","paddingTop","clone","target","_clone","Object","create","getPrototypeOf","defineProperties","getOwnPropertyDescriptors","hasOwnProperty","getMergeValue","targetVal","objectVal","targetValType","objectValType","isArray","measureTextWidth","text","canvas","document","createElement","ctx","getContext","fontStyle","fontWeight","fontSize","fontFamily","fontFace","fontCss","font","textMetrics","measureText","width","getFirstNumber","_len5","numbers","_key5","find","isFinite","getDimension","prop","isRunning","renderProp","getX","getY","getW","getH","flatten","arr","flat","toFlatten","objectPropertyOf","stringifyCompare","objA","objB","JSON","stringify","delayForAnimation","callback","delay","downloadFile","content","fileName","contentType","validContentTypes","includes","dataStr","encodeURIComponent","dlAnchorElem","setAttribute","click","degreesToRadians","deg","PI","MARKUP_STRING_PATTERN","isMarkupString","parseInlineContent","iconRegEx","badgeRegEx","newlineRegEx","textRegEx","splitStr","forEach","item","formattedItem","badge","exec","icon","newline","title","style","push","max","from","arg","isNaN","createConditionalZContext","zOffset","zIndex","forceZIndexContext","watchForUpdates","_ref2","_element$__core","watchProps","sideEffect","isElement","logger","initialOnAfterUpdate","__core","_onAfterUpdate","onAfterUpdate","hasChanged","prevValueKey","nextValue","bind","convertTextAlignToFlexJustify","align","getMaxRoundRadius","radius","height","offset","maxRadius","r","utils","utils$1","Metrics","_keyMetricsCallback","keyMetricsCallback","metricsInstance","eventEmitterInstance","EventEmitter","events","baseTheme","name","primary","secondary","tertiary","inactive","full","none","alpha1","alpha2","alpha3","alpha4","alpha5","animation","duration","xfast","fast","normal","slow","xslow","expressive","timingFunction","expressiveEntrance","expressiveExit","standard","standardEntrance","standardExit","utility","utilityEntrance","utilityExit","asset","arrowLeft","arrowRight","backspaceOutline","check","white","black","grey","red","orange","yellow","green","blue","purple","palette","material","materialBrand","overlay","textNeutral","textNeutralSecondary","textNeutralTertiary","textNeutralDisabled","textInverse","textInverseSecondary","textInverseTertiary","textInverseDisabled","textBrand","textBrandSecondary","textBrandTertiary","textBrandDisabled","textPositive","textNegative","textInfo","textCaution","fillTransparent","fillNeutral","fillNeutralSecondary","fillNeutralTertiary","fillNeutralDisabled","fillInverse","fillInverseSecondary","fillInverseTertiary","fillInverseDisabled","fillBrand","fillBrandSecondary","fillBrandTertiary","fillBrandDisabled","fillPositive","fillNegative","fillInfo","fillCaution","strokeNeutral","strokeNeutralSecondary","strokeNeutralTertiary","strokeNeutralDisabled","strokeInverse","strokeInverseSecondary","strokeInverseTertiary","strokeInverseDisabled","strokeBrand","strokeBrandSecondary","strokeBrandTertiary","strokeBrandDisabled","strokePositive","strokeNegative","strokeInfo","strokeCaution","interactiveNeutral","interactiveNeutralFocus","interactiveNeutralFocusSoft","interactiveInverse","interactiveInverseFocus","interactiveInverseFocusSoft","interactiveBrand","interactiveBrandFocus","interactiveBrandFocusSoft","shadowNeutral","shadowNeutralFocus","shadowNeutralFocusSoft","shadowNeutralText","shadowInverse","shadowInverseFocus","shadowInverseFocusSoft","shadowInverseText","shadowBrand","shadowBrandFocus","shadowBrandFocusSoft","shadowBrandText","componentConfig","Keyboard","keyProps","delete","focusScale","gutterY","marginY","safe","screenH","xs","sm","md","lg","xl","spacer","xxs","xxl","xxxl","stroke","typography","display1","lineHeight","verticalAlign","textBaseline","display2","headline1","headline2","headline3","body1","body2","body3","button1","button2","callout1","caption1","tag1","footnote1","customFontFaces","fontLoader","fonts","promises","_loop","family","src","descriptors","fontSrc","url","FontFace","add","Promise","resolve","load","then","catch","err","Error","message","all","fontsLoaded","loaded","failed","cleanupFonts","_ref3","_asyncToGenerator","_x","THEME_KEY_REPLACER","merge","objArray","base64Cache","isSubTheme","themeName","getMimeTypeFromDataUri","dataUri","matches","match","checkBase64EncodedImage","regex","isImage","mimeType","base64ToBlobURL","base64String","byteCharacters","atob","substring","byteArrays","byteNumbers","charCodeAt","byteArray","Uint8Array","blob","Blob","type","blobURL","URL","createObjectURL","ThemeManager","_cache","Map","window","LUI","themeManagerInstances","themeManager","_setCache","_ref4","set","_deleteCache","_ref5","_emit","_ref6","emit","getTheme","has","get","_processTheme","call","setTheme","themeConfig","_this","_clearCache","extensions","_loadFonts","_refreshSubThemes","getSubTheme","subThemeName","setSubTheme","_arguments","_this2","triggerUpdate","keys","globalTheme","subTheme","original","cache","updateSubTheme","fontArray","updateTheme","_this3","currentTheme","image","revokeObjectURL","_arguments2","_this4","removeSubTheme","_getComponentUUID","id","themeArray","themeFunctions","themeString","originalValue","replacement","k","targetComponent","themeValue","validColor","parse","themeManagerInstance","Context","metrics","on","off","_len6","_key6","setSubThemes","subThemesObj","setLogCallback","setKeyMetricsCallback","config","configKeys","setMethod","contextInstance","GlobalUpdateManager","_updateThemeSet","Set","_requestUpdateSet","_timeout","_runUpdatesTimeoutHandler","_updateThemeComponent","e","requestUpdate","addUpdateTheme","deleteUpdateTheme","addRequestUpdate","deleteRequestUpdate","hasQueuedRequestFor","updateManager","capital","mergeProps","componentConfigProp","_result","getPropertyDescriptor","_this$__componentConf3","customGetter","_this$__componentConf","_this$__componentConf2","__componentConfigProps","oldValue","changeHandler","newValue","queueRequestUpdate","configurable","enumerable","getAliasPropertyDescriptor","prev","curr","deprecationWarning","withUpdates","Base","_construct","prototype","_withUpdatesInitialized","props","properties","descriptor","defineProperty","aliasProps","aliasProperties","alias","_whenEnabled","_whenEnabledResolver","super","_isAttached","_firstEnable","_readyForUpdates","requestEarlyUpdate","_detach","force","_update","__componentName","logPropTable","table","_propTable","acc","tag","withTags","_withTagsInitialized","tags","withHandleKey","_handleKey","keyEvent","_processEvent","_handleKeyRelease","suffix","keyMap","application","__keymap","keyCode","_invokeKeyPayloadCallback","metricsPayload","withLayout","_previousDimensionData","itemLayout","_itemLayout","v","componentName","_componentName","_originalW","_originalH","_updateItemLayout","_allowUpdate","circle","layoutString","values","calculatedWidth","calculatedHeight","_circleSet","_originalRadius","fireAncestors","getCharacterValue","char","index","sortObject","sortedObj","sort","getCharacterSum","sum","getHash","executeWithContextRecursive","objOrFunction","isPlainObject","RegExp","Function","p","getComponentConfig","_obj$theme","removeEmptyObjects","createSharedReferences","seenObjects","hash","process","currentObj","valueHash","getUniqueProperties","defaultProps","TypeError","generatePayload","base","defaultStyle","toneItem","modeItem","tone","mode","_tone$toneItem","_mode$modeItem","findNestedKeys","keyToFind","nestedKeys","searchNestedKeys","searchForKey","generateSolution","_ref7","modeKeys","toneKeys","solution","uniqueModes","uniqueTones","DEFAULT_KEYS","enforceContract","inputObj","fallbackKey","generateComponentStyleSource","styleChain","inlineStyle","componentDefault","_ref8","default","componentConfigDefaultStyle","localDefaultStyle","local","merged","parsedStyles","final","formatStyleObj","colorParser","cleanObj","targetObject","styleObj","processedStyle","_","startsWith","isValidColor","num","generateStyle","componentStyleSource","generateNameFromPrototypeChain","_proto$constructor","proto","trim","styleChainCache","clearStyleChainCache","getStyleChainMemoized","componentObj","cacheKey","getStyleChain","styleMap","_proto","componentConfigStyle","themeStyle","__themeStyle","mixinStyle","__mixinStyle","uniqueStyles","reverse","originalObj","aliasStyles","formatters","replaceAliasValues","formattersArray","_ref9","skipWarn","search","themeStyleCache","StyleManager","init","isActive","setupListeners","_style","update","_boundThemeUpdate","_onThemeUpdate","_hasSubTheme","_targetSubTheme","clearListeners","destroy","_cleanupCache","_styleCache","clearSourceCache","clearStyleCache","sourceKey","_generateCacheKey","_removeCache","styleKey","_customStyleHash","_addCache","existing","ids","__id","_ref10","removeIndex","_getCache","_this$_getCache","_this$_getCache2","styleSource","_componentLevelStyle","_componentConfig","hasCustomStyle","mergeObjectsWithSecondDominant","firstObj","secondObj","allKeys","withThemeStyles","_withThemeStylesSetupComplete","_hSetByUser","_wSetByUser","_styleManager","_updatePropDefaults","queueThemeUpdate","_setup","_prevComponentConfigProps","_attach","_unfocus","_isFocusedMode","_focus","_isDisabledMode","_checkDimensionUpdates","dimensionUpdateRequired","_w","_h","_updateDimensions","_componentStyle","styleConfig","_styleConfig","_this$_componentConfi","_mode","event","_tone","_this$style","_this$style2","SUFFIX","withExtensions","_withExtensionsApplied","_prototypeChain","__prototypeChain","prototypeChain","_extensions","_ref11","extension","_componentExtensions","_ref12","pattern","endsWith","ComponentRegExp","some","_ref13","_extensionApplied","_currentComponentExtensionLength","_appliedExtensionLength","_extendedList","_extensionInstance","_setupExtensionBound","_setupExtension","_calculateComponentExtensionLength","_createExtension","_resetComponent","_extensionCleanup","extensionLength","extensionMixin","ExtendedClass","_createExtensionClass","instance","_createExtensionAliases","_setComponentAliases","ExtensionBase","baseProto","extended","extensionOverrides","extensionClass","FakeClass","originalComponentDescriptors","setPrototypeOf","aliasObj","Component","skipPlinko","centerInParent","_init","_resetLoadedPromise","reject","_resolveLoadedPromise","_rejectLoadedPromise","_updateShouldSmooth","shouldSmooth","applySmooth","ref","patch","smooth","announce","_announce","announceContext","_announceContext","_shouldSmooth","_isUnfocusedMode","isFullyOnScreen","getFocusScale","getUnfocusScale","withMixins","baseComponent","Base$1","gradientTop","neutral","gradientColor","inverse","brand","Gradient","styles","rect","rtt","colorTop","colorBottom","texture","Tools","getRoundRect","animationBlurEntrance","animationBlurExit","animationComponentEntrance","animationGradientEntrance","animationGradientExit","animationImageScaleEntrance","animationImageScaleExit","blur","centerImageRadius","fallbackSrc","fillColor","imageScale","imageScalePivotX","imageScalePivotY","zIndexSet","centerImage","fill","gradient","foreground","checkFileType","createSvg","cb","platform","getDrawingCanvas","imageSmoothingEnabled","img","Image","onload","drawImage","source","onerror","Utils","isPS4","crossOrigin","imageLoader","_ref14","renderInfo","compressed","hasAlpha","removeAttribute","CustomImageTexture","Texture","_src","_hasAlpha","_changed","l","_getIsValid","_getLookupId","_getSourceLoader","getOption","fc","fileType","loadSrcTexture","getNonDefaults","Artwork","_template","_shouldBlur","shouldBur","_blur","_hasCenterImage","_Image","format","_aspectRatioEqual","_componentSrc","_generatePromise","_actualAspectRatio","_supportedAspectRatioHeights","srcCallbackAspectRatios","rw","rh","calcHeight","_closestSupportedAspectRatio","closest","abs","_processedImageSrc","srcCallback","closestAspectRatio","aspectRatio","_gradientPatch","_Gradient","findZContext","_srcCallbackAspectRatios","_setSrc","_getFallbackSrc","_fallbackSrc","resolvePromise","rejectPromise","complete","_resolveLoading","_rejectLoading","parseFloat","finalW","finalH","toFixed","signal","_this5","_updateRadius","_updateGradient","_updateImage","_updateFillColor","_updateForegroundImage","_showComponent","_updateCenterImage","_updateBlur","_updateScale","_handleImageLoadError","shouldScale","pivotX","pivotY","scale","_this6","_foregroundSrc","_ForegroundImage","ForegroundImage","foregroundImagePatch","mount","foregroundWidth","foregroundHeight","once","imageW","getRenderWidth","imageH","getRenderHeight","_Blur","_getTransition","Blur","_srcFailed","amount","getTexture","components","FastBlurComponent","_updateFormatContain","_updateFormatSquareCircle","_CenterImage","CenterImage","_this7","resizeMode","imageSize","shader","shaders","RoundedRectangle","_createGradient","_this8","FillColor","Icon","fixed","_notify","_handleTxtError","_getColor","_color","_icon","_iconPatch","isSvgTag","isSvgURI","svgTag","svgURI","getSvgTexture","colorUl","colorUr","colorBl","colorBr","contentSpacing","paddingX","paddingY","textStyle","textAlign","backgroundColor","iconColor","textColor","strokeColor","Badge","Text","mountY","signals","itemChanged","_Text","_updateLayout","_updateText","_updateIcon","_updateVisibility","_updateWidth","_updateBackground","_updatePositions","renderHeight","_Icon","iconWidth","iconHeight","renderWidth","iconAlign","_getIconHeight","justify","minWidth","paddingXNoTitle","itemSpacing","maxLines","contentColor","focused","disabled","FocusManager","_selectedIndex","_itemPosX","_itemPosY","direction","_checkSkipFocus","Items","_Items","_setDirection","state","column","row","_setState","_getItems","children","items","_resetItems","appendItems","itemPosX","itemPosY","childList","_lazyItems","_appendLazyItem","a","_refocus","appendItemsAt","idx","addIndex","isInteger","_lastAppendedIdx","itemIdx","addAt","parentFocus","hasFocus","selectedIndex","prependItems","removeItemAt","removeAt","initialSelection","skipFocus","selectNext","selected","prevSelected","_selectedChange","_render","_firstFocusableIndex","firstItem","originalIdx","shift","_lastFocusableIndex","lastItem","pop","selectPrevious","hasFocusable","wrapSelected","previousItemIndex","lastIndexOf","shouldSmoothOverride","splice","nextIndex","findIndex","_getIndexOfItemNear","prevItem","itemX","itemY","prevMiddle","selectedCoordArray","distance","b","_getFocused","focusRef","cparent","_updateTransitionTarget","property","updateTargetValue","onScreenItems","child","_isOnScreen","_isOnScreenCompletely","fullyOnScreenItems","rv","_isComponentHorizontallyVisible","transitionX","getTransitionXTargetValue","withinLeftStageBounds","withinRightStageBounds","_isComponentVerticallyVisible","transitionY","getTransitionYTargetValue","withinTopStageBounds","withingBottomStageBounds","_states","None","Row","_handleLeft","onLeft","_handleRight","onRight","Column","_handleUp","onUp","_handleDown","onDown","alwaysScroll","itemTransition","neverScroll","scrollIndex","directionPropNames","axis","crossAxis","lengthDimension","crossDimension","innerLengthDimension","innerCrossDimension","NavigationManager","_lazyUpCountBuffer","_directionPropNames","_initComponentSize","_transitionListener","parent","nextPosition","maxCrossDimensionSize","maxInnerCrossDimensionSize","childrenToCenter","loadingChildren","updateDidRun","childCrossDimensionSize","_calcCrossDimensionSize","waitForDimensions","updatePositionOnAxis","extraItemSpacing","childIdx","_totalAddedWidth","_autoResize","_centerItemsInParent","_updateLastScrollIndex","_performRender","sizes","crossDimensionSize","_ref15","autoResizeWidth","autoResizeHeight","_lastScrollIndex","itemPos","_isRow","scrollOffset","lastChild","endOfLastChild","_calcAxisPosition","lastScrollIndex","childPosition","canScrollToChild","comp","_isColumn","transitionDone","_withAfterUpdate","_appendItem","itemCrossSize","appended","$itemChanged","lazyUpCount","lazyUpCountBuffer","addAtIdx","_totalAddedLength","newItem","itemLength","_selectedPastAdded","position","scrollTo","shouldScrollLeft","_canScrollBack","shouldScrollRight","_canScrollNext","shouldScrollUp","shouldScrollDown","shouldScroll","_prevLastScrollIndex","itemsStartCoord","_itemsX","_itemsY","endOfItemsPosition","_getAlwaysScroll","_alwaysScroll","_getNeverScroll","_neverScroll","_setScrollIndex","_getScrollIndex","_scrollIndex","_setLazyUpCountBuffer","buffer","_this$parent","focusmanager","_isOnScreenForScrolling","itemsTransitionX","rowX","xModifier","_shouldScroll","prevIndex","getIndex","lazyScroll","startLazyScrollIndex","stopLazyScrollIndex","isCompletelyOnScreen","_getPrependedOffset","_getLazyScrollX","_getScrollX","currItemsX","prevX","itemsContainerX","selectedX","itemIndex","next","plinko","onScreenEffect","_getLazyScroll","_lazyScroll","Surface","Background","innerH","innerW","_radius","_Background","textY","marginBottom","strikethroughRatio","strikethroughColor","isText","isIcon","isBadge","InlineContent","_maxLinesSuffix","_updateContent","_waitForComponentLoad","_shouldTruncate","_parsedContent","flex","wrap","contentWrap","justifyContent","isLast","flexItem","contentProperties","_marginBottom","marginRight","nextItem","_createText","_createIcon","_createBadge","finally","_contentLoaded","_notifyAncestors","multiLineHeight","_layout","_lineLayouter","_lines","totalHeight","line","entries","startIndex","endIndex","_renderMaxLines","childrenDimensions","_calcChildrenDimensions","renderedLastElement","nextChild","isOnLastLine","isLastBeforeMaxLines","canRenderLastWithSuffix","hasSpaceForSuffix","isLastWithSpaceForSuffix","_addSuffix","suffixW","maxLinesSuffix","contentEndX","isNewLineElement","data","ceil","_ref16","negatedRightMargin","marginLeft","iconProps","textHeight","textOverrideStyles","customStyleMappings","textComponent","textDecoration","textWidth","strikethroughLine","badgeY","badgeProperties","loadedBadge","_updateIconPosition","_loadedBadge","_formatSpaces","parsedContent","whitespace","parsed","formattedWords","word","_setContent","_content","_setBadgeProperties","_getBadgeProperties","_badgeProperties","_setContentProperties","_getContentProperties","_contentProperties","_setCustomStyleMappings","_getCustomStyleMappings","_customStyleMappings","_setMaxLines","floor","_item$style","fadeWidth","FadeShader","WebGLDefaultShader","_margin","left","right","positionLeft","_positionLeft","positionRight","_positionRight","setupUniforms","operation","owner","shaderOwner","renderPrecision","_setUniform","gl","uniform1fv","Float32Array","uniform2fv","fragmentShaderSource","Marquee","ContentClipper","boundsMargin","ContentBox","Content","ContentLoopTexture","_scrolling","_autoStart","_centerAlign","_Content","_updateContentTexture","restartScrolling","_restartScrolling","stopScrolling","_currentTexture","_ContentClipper","_shouldClip","_updateShader","_positionTexture","startScrolling","_updateColor","_updateTexture","autoStart","_shouldTryScrolling","contentTexture","textContent","_updateAnimation","_scrollAnimation","stopNow","_loopWidth","repeat","actions","t","_shouldCenter","_textRenderedW","_ContentBox","_ContentLoopTexture","start","_setAutoStart","_setCenterAlign","center","_ref17","_this$title$text","_this$title","overrideLoopX","lightningTextDefaults","textures","TextTexture","_ref18","TextBox","_setDimensions","_isInlineContent","sizeChanged","hideOnLoad","_marqueeContentListenerAttached","_marqueeOverrideLoopX","_resetMarqueePromise","_InlineContent","_updateMarquee","_updateInlineContent","inlineContentPatch","_textStyleSet","wordWrapWidth","loadedInlineContent","marqueeOverrideLoopX","_Marquee","_resolveAwaitMarqueeOverrideX","_awaitMarqueeOverrideX","_rejectAwaitMarqueeOverrideX","_loadedMarqueeContent","marquee","_toggleMarquee","_contentTag","marqueePatch","marqueeProps","marqueeContentLoaded","_getMarqueeProps","_this$_marqueeProps","_marqueeProps","contentTag","toggleMarquee","Button","_updatePrefix","_updateTitle","_updateSuffix","_updateAllPositioning","_updateTruncation","_updateContentDimensions","_updateSurfaceDimensions","_updateContentPosition","_onTitleTextBoxChanged","_hasPrefix","_Prefix","_prefixX","_hasTitle","_TextWrapper","_titleX","_hasSuffix","_Suffix","_suffixX","prefixString","prefix","prefixPatch","_rowProps","Prefix","_updatePrefixSuffixStyles","_prevPrefix","prevProp","_prevSuffix","propString","_addButtonProps","titlePatch","_Title","textBoxChanged","TextWrapper","Title","suffixPatch","Suffix","wordWrap","_fixedWordWrapWidth","contentDimensionsPatch","_contentW","_contentProps","newWidth","_calcDynamicWidth","visible","_paddingX","_buttonProps","_getJustify","_justify","mountX","_paddingLeft","_paddingRight","_prefixW","_titleW","_suffixW","_totalTitlePaddingX","totalTitlePadding","nonTextSpace","_announceComponentName","ButtonSmall","paddingHorizontal","paddingVertical","titleTextStyle","Card","_updateTitlePosition","_calculateTextWidth","descriptionTextStyle","detailsTextStyle","CardTitle","Description","Details","_updateDescription","_updateDetails","_updateDescriptionPosition","_updateDetailsPosition","_Description","description","_Details","details","subtitleTextStyle","size","knobHeight","knobWidth","backgroundColorChecked","knobColor","Radio","Body","Knob","Stroke","_updateBody","_updateStroke","_updateKnob","_checkedChanged","_updateOpacity","bodyColor","checked","_Body","_Stroke","_Knob","_setChecked","_checked","toggle","_handleEnter","onEnter","RadioSmall","CardRadio","Subtitle","_updateRadio","_updateSubtitle","_updateSubtitlePosition","_Subtitle","subtitle","radioPatch","radio","_Radio","CardSection","iconObject","iconSrc","checkColor","Checkbox","Check","_updateCheck","_Check","alphaPatch","Label","withMarqueeSync","_shouldSync","_updateSignals","_cleanupSyncValues","syncArray","willMarquee","_willMarquee","compRef","_longestMarqueeWidth","marqueeSync","logoWidth","logoHeight","logoPadding","MetadataBase","DetailsWrapper","_titleLoaded","_subtitleLoaded","_detailsLoaded","_ref19","_updateDetailsLayout","_descriptionLoaded","_ref20","_DetailsWrapper","_updateLines","_textW","_textH","_updateMetadataHeight","_updateLogo","logo","logoPosition","newH","resetMarquee","_Logo","Logo","subtitleH","titleH","detailsH","descriptionH","_getLogoWidth","_logoWidth","_setLogoWidth","_getLogoHeight","_logoHeight","_setLogoHeight","logoTitle","MetadataBase$1","MetadataTile","_ref21","barColor","progressColor","ProgressBar","Bar","Progress","_progress","_updateTextures","_updateProgress","_progressChanged","_getProgressWidth","_Bar","_Progress","_setProgress","progress","animationEntrance","animationExit","metadataLocation","paddingYProgress","paddingYBetweenContent","Tile","imageLoaded","_Metadata","_Badge","_Label","_ProgressBar","_updateTileColor","_updateArtwork","_updateBadge","_updateLabel","_updateCheckbox","_updateProgressBar","_updateMetadata","_getRenderHeight","_this$_Metadata","_isInsetMetadata","_shouldShowGradient","_this$progressBar","_hasMetadata","_shouldShowMetadata","progressBar","_shouldShowLogo","_isCircleLayout","_foregroundDefaultWidth","_Tile","itemContainerPatch","logoObject","_calculateLogoYPosition","_metadataY","_progressBarY","persistentMetadata","_this$style3","_this$artwork","_Artwork","artwork","_getSrc","_imageLoaded","_this$badge","badgePatch","_shouldShowBadgeLabel","_badgeLabelTransitions","_this$label","label","labelPatch","loadedLabel","_this$checkbox","checkbox","_Checkbox","checkboxPatch","_targetValue","_this$progressBar2","_removeProgressBar","progressPatch","_metadataTransitions","_metadataAlpha","metadata","_metadataPatch","_nonSmoothingMetadataPatch","_getMetadataLocation","_this$_metadataLocati","_metadataLocation","Metadata","updateComponentDimensions","_animateMetadata","_resetMarqueeAnimation","_metadataLoaded","alphaTransition","counterTextStyle","itemSize","counterBackgroundColor","Provider","providersHidden","providers","_visibleCount","_providers","_updateProviders","_updateCounter","providerList","visibleCount","provider","disableRadius","_Row","remaining","counter","counterText","_getVisibleCount","descriptionDetailsStyle","MetadataCardContent","DescriptionDetails","DetailsFader","providerChanged","_setDetails","_detailsPromise","_detailsPromiseResolver","_setProvider","_providerPromise","_providerPromiseResolver","_this9","_updateProvider","_updateDescriptionDetails","_DescriptionDetails","descriptionDetails","descriptionDetailsTextStyle","maxWidth","_detailsMaxW","_DetailsFader","_resolveDetails","_Provider","_resolveProvider","_providerH","_providerW","expandedWidth","expandedHeight","CardContent","_updateSize","_updateTile","_tile","tileRadius","_collapse","_orientation","tile","_shouldShowTile","metadataPatch","_metadataPosition","_metadataDimensions","marqueeOnFocus","_collapseW","_collapseH","orientation","collapseToMetadata","shouldCollapse","CardContentHorizontal","CardContentHorizontalLarge","CardContentVertical","CardContentVerticalSmall","_setMetadata","CheckboxSmall","itemsTransitionY","columnY","yModifier","_getScrollY","itemsContainerY","prevPlinko","checkSkipPlinko","up","prevItems","endOfMultiSkipPlinkos","prevPlinkoIndex","$removeItem","wasSelected","remove","$columnChanged","logoRadius","iconStyle","logoStyle","prefixPadding","Control","_updatePrefixStyle","_updateCollapseStatus","_updatePrefixObj","_patchTitle","leftOverSpace","middle","_setPrefix","_setSuffix","_setIcon","_setLogo","parentStyle","ControlStyle","radiusOffset","ControlSmall","titleMarginBottom","titleMarginLeft","TitleRow","_updateRow","_autoResizeHeight","_titleFirstLoadProps","ControlRow","__themeStyles","selectedChange","_leftControls","_contentItems","_rightControls","_lastLeftControlIndex","_lastItemIndex","_lazyLoadBuffer","itemsToAppend","leftControls","_withExtraSpacing","contentItems","rightControls","isControl","itemsCopy","_prevLeftControls","_prevItems","_getMoreItems","lazyLoadBuffer","loadMoreIndex","loadMoreItems","_appendItemsAt","appendIndex","removeSpacingIndex","addContentItems","lastSelected","itemsToAdd","_createContentItems","addContentItemsAt","removeContentItemAt","addLeftControls","controls","_createControls","addLeftControlsAt","removeLeftControlAt","addRightControls","addRightControlsAt","removeRightControlAt","controlProps","backgroundType","newContentItems","itemProps","_setLeftControls","_getLeftControls","_setRightControls","_getRightControls","_getContentItems","_setContentItems","_getLeftControlItems","_getContentItemItems","_getRightControlItems","leftSiblingIndex","propertyTextStyle","valueTextStyle","Spacer","Line","_lineThickness","TickLeft","_tick","TickRight","_tickLength","_Line","_TickRight","lineColor","_TickLeft","rotation","vertical","GridOverlay","textRow","Property","Value","Columns","Margins","Horizontal","Left","spacerLoaded","Right","Vertical","Top","Safe","Bottom","Gutters","TextPanel","ScreenW","ScreenH","ColumnCount","MarginX","MarginY","GutterX","GutterY","_showColumns","_showMargins","_showSafe","_showGutters","_showText","_updateGlobalThemeProps","_updateMargins","_updateSafe","_updateColumns","_updateGutters","_Columns","showColumns","_Margins","showMargins","_Safe","showSafe","_Gutters","showGutters","_TextPanel","showText","_screenW","_screenH","_columnCount","_marginX","_marginY","_safe","_gutterX","_gutterY","_columnColor","_marginColor","_safeColor","_gutterColor","marginPatch","marginHorizontalPatch","_MarginHorizontal","_MarginLeft","_MarginRight","marginVerticalPatch","_MarginVertical","_MarginTop","safePatch","_SafeHorizontal","_SafeLeft","_SafeRight","_SafeVertical","_SafeTop","_SafeBottom","_columnRects","gutterPatch","_GutterHorizontal","_updatePropertyTextStyle","textPanelName","_updateValueTextStyle","val","_TextScreenW","_TextScreenH","_TextColumnCount","_TextMarginX","_TextMarginY","_TextGutterX","_TextGutterY","_TextSafe","cursorStyle","blink","eyebrowTextStyle","helpTextStyle","Input","Eyebrow","HelpText","_title","actualTitle","_fixed","_updateTextWrapper","_updateHiddenContent","_updateCursorPosition","_updateTitleScrollPosition","_onHiddenTextBoxChanged","_updatePassword","_updateEyebrow","_updateHelpText","_updateCursor","_updateCursorListening","_updateCursorBlink","password","mask","_Eyebrow","eyebrow","_HelpText","helpText","clipping","_visibleContentWidth","_HiddenContent","HiddenContent","textBeforeCursor","_Cursor","Cursor","cursorBlink","isPlaying","isCursorActive","stop","_isOverflow","suffixX","listening","insert","backspace","moveLeft","moveRight","baseWidth","isUpperCase","isAlphaChar","alphaNato","c","d","f","g","j","m","o","q","s","u","z","getNato","toLowerCase","Key","_size","_keySpacing","sizeMultiplier","baseSize","keySpacing","keyId","inputSpacing","inputStyle","capitalize","_setShouldUpdateThemeBound","_setShouldUpdateTheme","shouldUpdateTheme","_currentKeyboard","_currentFormat","_shouldUpdateKeyboards","defaultFormat","centerKeyboard","centeredXPos","_createKeyboardsFromFormats","_formatKeys","formats","keyboardData","_formatKeyboardData","_createKeyboard","_createRows","_formatsChanged","rows","keyboard","_this$_currentKeyboar","centerKeys","rowWrap","_createKeys","keyComponent","_this$style$keyProps","_this$style$keyProps2","keyName","keyOverrides","keyPatch","inline","keyRows","$toggleKeyboard","nextKeyboard","nextKeyboardTag","selectKeyOn","getSelectedKey","_setFormats","_defaultFormat","rowCount","KeyboardEmail","emailFormat","uppercase","lowercase","accents","accentsUpper","symbols","KeyboardFullScreen","fullscreenFormat","letters","KeyboardNumbers","numbersFormat","dialpad","dialpadExtended","KeyboardQwerty","qwertyFormat","KeyboardInput","Wrapper","passSignals","keyboardWidthChanged","_Wrapper","_updateKeyboardType","_updateInput","_updateKeyboard","_updateCenterKeyboard","_Keyboard","keyboardType","_Input","input","$onSoftKey","_ref22","$keyboardFocused","focus","KeyboardSearch","searchFormat","circleColor","ListItem","_onTextBoxChanged","_updatePrefixLogo","_updateSuffixLogo","_hasDescription","descriptionPatch","_hasPrefixLogo","_addLogoProps","_prefixLogo","_hasSuffixLogo","_suffix","_suffixLogo","prefixLogo","suffixLogo","base$c","showArrows","showKnob","mode$4","arrowColor","arrowAlphaValue","arrowAlphaValueLimit","arrowHeight","arrowSpacing","arrowWidth","containerHeight","iconLeftSrc","iconRightSrc","circleAnimation","mode$3","Slider","Container","SliderBar","Circle","LeftArrow","RightArrow","_min","_max","_step","_value","_vertical","_updateDirection","_updateSliderLayout","_updateArrowAlpha","_updateArrows","_valueChanged","_checkAndSignalSizeChange","_decrementValue","_incrementValue","_Container","_calculatedSliderX","_calculatedSliderWidth","prevH","prevW","prevRotation","_updateSliderProgress","_updateCirclePosition","step","_SliderBar","xCirclePosition","_Circle","leftAlpha","rightAlpha","offAlpha","alphaLimit","_LeftArrow","_RightArrow","arrowProps","totalArrowSize","_circleW","_setVertical","_setValue","_setMin","_setMax","VerticalSlider","NestedSlider","ListItemSlider","template","onChange","_updateSliderPosition","_updateValue","_Value","_hasValue","valuePatch","sliderProps","slider","_Slider","titleWrapWidth","_onSliderChanged","ListItemPicker","_alignPicker","_options","_updatePicker","_updateArrowsAlpha","_updateAlignment","_Picker","Picker","option","centerAlign","wordWrapWidthFocused","selectedOption","MetadataCard","fadeHeight","scroll","contentMarginTop","contentMarginLeft","sliderMarginLeft","scrollWrapperBase","ScrollSlider","ScrollWrapper","FadeContainer","ScrollContainer","onSizeChange","_scrollStep","_shouldWrap","_flexDirection","_fadeContent","_sliderWidth","_afterTextBoxUpdate","textBox","_prevW","_prevH","_updateScrollWrapperLayout","_updateAlpha","_resetFlexContainer","_FadeContainer","_contentChanged","_updateAutoScroll","_updateScrollContainer","resetScroll","_setupAutoScroll","_ScrollContainer","_contentWidth","_updateFadeContainer","_updateSlider","showScrollBar","isScrollable","shouldFade","fadeContent","_isEndContentVisible","FadeOut","bottom","_scrollContainerLoaded","_ref23","ScrollableText","flexDirection","shouldWrap","_scrollDown","hasContentToScrollTo","_scrollContainerY","targetY","scrollStep","canScrollByStepLength","scrollEndY","hasScrolledToEnd","_autoScrollComplete","_scrollUp","canScrollUp","finish","_transitions","_setAutoScroll","_autoScroll","_startAutoScroll","_performAutoScrollTimer","autoScroll","_performAutoScroll","autoScrollDelay","autoScrollSpeed","enabled","_updateScrollContainerSize","scrollHeight","contentScrollSteps","sliderMax","sliderStep","scrollDuration","spread","maxOffsetY","maxOffsetX","Shadow","_updateFocusStyle","_Shadow","shadowSize","holepunchError","extraBoundsY","extraBoundsX","Frame","maskShadow","Hole","getShadowRect","SliderLarge","ContentSwitcher","_updateSelected","_preveSelectedIndex","prevContent","_hasContent","_fadeInContent","_selectedContent","allContent","tagName","componentLoader","_loadAsyncComponent","tabSpacing","tabsMarginBottom","TabBar","Tabs","TabContent","contentHeightChange","_tabContent","_isTabsFocused","_selectedTabChange","_updateTabsLayout","_updateTabs","_updateTabContent","_updateTabBarHeight","defaultLayout","tabsRowPatch","patchObj","_Tabs","tab","isSelectedTab","retainSelection","alphaSelectedTab","_updateTabAlphas","margin","_TabContent","collapse","_expandedHeight","_collapsedHeight","selectTabs","resetTabs","_setTabs","tabs","tabContent","_getTabs","reset","iconSize","iconMarginRight","Tab","_updateTabSize","iconPatch","textPatch","_iconW","_iconH","knobSize","knobPadding","knobRadius","knobColorChecked","Toggle","_updateKnobPosition","_updateColors","_updateContainer","currentKnobColor","containerColor","strokeRadius","ToggleSmall","Bubble","_pointerWidth","_pointerHeight","_strokeWidth","pointerWidth","pointerHeight","getRgbaString","createBubble","_ref24","fillStyle","strokeStyle","lineWidth","lineCap","lineJoin","initialCoord","leftX","rightX","topY","bottomY","bottomBubbleY","isRadiusAnArray","beginPath","moveTo","lineTo","arcTo","Tooltip","_textLoaded","_updateBackgroundHeight","_updateTextPosition","backgroundH","backgroundW","_clearTimers","_hideTimer","_showTimer","_transitionIn","delayVisible","timeVisible","_transitionOut","pools","pool","_ref25","index$2","flattenStrings","series","flattenedSeries","pause","speak","phrase","utterances","lang","synth","speechSynthesis","utterance","SpeechSynthesisUtterance","onend","speakSeries","root","remainingPhrases","nestedSeriesResults","active","seriesChain","totalRetries","retriesLeft","SpeechSynthesisErrorEvent","seriesResult","append","toSpeak","cancel","currentSeries","Speech","defaultAbbreviations","replacer","p1","p2","p3","p4","defaultAbbrevConfig","generateAbbrevConfig","wrapWithBoundary","getNumberOfCaptureGroups","regExp","abbreviations","extendDefault","abbrev","stringPatternMap","regExpPatternMap","abbreviationsPattern","patternGroupOffset","_ref27","stringPattern","patternMapIdx","translateAbbrev","translationConfig","translated","matched","_len7","_key7","patternIdx","fiveMinutes","elmName","elm","defaultOptions","voiceOutDelay","abbreviationsConfig","withAnnouncer","announcerOptions","_announceEndedTimeout","_currentlySpeaking","_voiceOut","toAnnounce","_voiceOutDisabled","speech","language","toAnnounceStr","toAnnounceWords","timeoutDelay","_build","_debounceAnnounceFocusChanges","_announceFocusChanges","announcerFocusDebounce","announcerTimeout","_resetFocusTimer","_lastFocusPath","_focusChange","_disable","announcerEnabled","_announcerEnabled","$announcerCancel","focusPath","lastFocusPath","every","loading","focusDiff","focusDiffHook","txt","$announce","notification","$announcerRefresh","depth","index$1","classImp","classWithNewBase","withSelections","defaultOpts","captureKey","defaultIndex","eventName","currentSelected","currentSelectedIndex","isSelected","setSelected","_captureKey","isEditing","toggleEdit","_swapItemArrayPos","array","current","previous","_getPositionValue","_waitForTransition","_this10","currentItem","previousIndex","oldPos","newPos","previousCurrentItemZIndex","setSmooth","_this10$Items$childre","rad","getBreakpoints","C","A","asin","sin","B","points","degrees","breakAngles","breakIndex","angle","x0","y0","x1","y1","LinearGradient","_steps","_degrees","steps","count","createLinearGradient","addColorStop","percent","closePath","fillRect","_fill","_stroke","_strokeColor","dimension","arc","Arrow","_direction","_rounded","rounded","SignalButton","signalName","_signalName"],"mappings":"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NqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;eAET;gBACE51D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,MAEF,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;YAGJ8vC,SAAS,EACP,EACE,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA;gBACE74D,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,MAEF,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB,KACA,KACA,KACA,KACA;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB,KACA,KACA;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB,KACA,KACA,KACA,KACA;;AAIP;;;AC1JY,MAAMkwC,wBAAwB/uD;IAC3C,0BAAWkO;QACT,OAAO;AACR;IAED,uBAAWkI;QACT,OAAO2J;AACR;IAEDjT,UAAAA;QACEY,MAAMZ;QACNhoB,KAAK2nE,UAAU3nE,KAAKkqE;AACrB;IAED,iBAAIA;QACF,OAAO;YACLx8D,SAAS,EAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK;YACvDy8D,SAAS,EAAC,EAAC,KAAK,KAAK,OAAM,EAAC,KAAK,KAAK,OAAM,EAAC,KAAK,KAAK,OAAM,EAAC;YAC9DC,iBAAiB,EACf,EAAC,KAAK,KAAK,OACX,EAAC,KAAK,KAAK,OACX,EAAC,KAAK,KAAK,OACX,EACE,KACA;gBACEp5D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;;;AAKnB;;;ACjCY,MAAMswC,uBAAuBnvD;IAC1C,0BAAWkO;QACT,OAAO;AACR;IAED,uBAAWkI;QACT,OAAO2J;AACR;IAEDjT,UAAAA;QACEY,MAAMZ;QACNhoB,KAAK2nE,UAAU3nE,KAAKsqE;AACrB;IAED,gBAAIA;QACF,OAAO;YACLb,WAAW,EACT,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACEz4D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE/oB,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE51D,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBAAE51D,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBACE/oB,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE;gBACE51D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;;YAIhB2vC,WAAW,EACT,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE14D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE/oB,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE51D,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBAAE51D,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBACE/oB,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE;gBACE51D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;;YAIhB4vC,SAAS,EACP,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE34D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE/oB,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE51D,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBACE/oB,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE;gBACE51D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;;YAIhB6vC,cAAc,EACZ,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE54D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE/oB,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE51D,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;iBAGd,EACE,KACA,KACA,KACA,KACA,KACA;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBAAE/oB,OAAO;gBAAK+oB,UAAU;eACxB;gBACE/oB,OAAO;gBACP81C,MAAM;gBACNqB,QAAQ;gBACRpuB,UAAU;gBACV6sC,OAAO;iBAGX,EACE;gBACE51D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;eAEZ;gBACE/oB,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;;YAIhB8vC,SAAS,EACP,EACE,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA;gBACE74D,OAAO;gBACP81C,MAAM;gBACN8f,OAAO;gBACP7sC,UAAU;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"}